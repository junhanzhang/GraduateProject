String.prototype.hasString=function(b){if("object"==typeof b){for(var e=0,g=b.length;e<g;e++)if(!this.hasString(b[e]))return!1;return!0}if(-1!=this.indexOf(b))return!0};String.prototype.breakWord=function(b,e){e||(e="<wbr/>");return this.replace(RegExp("(\\w{"+(b?b:0)+"})(\\w)","g"),function(b,h,l){return h+e+l})};window.UI&&function(){var b=UI;window.UI_=function(){for(var e in b)UI[e]||(UI[e]=b[e])}}();UI={ajax:function(b){var e=b.xhr||UI.xmlHttp(),g,h;b.async=UI.isUndefined(b.async)?!0:b.async;e.onreadystatechange=function(){e&&(1==e.readyState?b.timeout&&b.fail&&(h=setTimeout(function(){g||(g=1,b.fail(),e.abort(),e=null)},b.timeout),b.timeout=0):2==e.readyState?b.send&&b.send():4==e.readyState&&!g&&(g=1,200==e.status?b.success&&b.success(e.responseText):b.fail&&b.fail(),clearTimeout(h),e=null))};if(UI.isObject(b.data)){var l=[],m;for(m in b.data)l.push(m+"="+encodeURIComponent(b.data[m]));b.data=l.join("&")}l=function(){b.refer&&e.setRequestHeader("rf",b.refer)};"get"==b.type?(e.open("GET",b.url+(b.url.hasString("?")?"&":"?")+(b.data||""),b.async),l(),e.send(null)):(e.open("POST",b.url,b.async),l(),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(b.data));return e},get:function(b,e,g){var h=UI.xmlHttp(),l=b.hasString("?")?"&":"?";h.onreadystatechange=function(){if(4==h.readyState&&200==h.status)try{g(h.responseText)}catch(b){}else return h};if(void 0!=e)if(UI.isObject(e)){var m=[],o;for(o in e)m.push(o+"="+encodeURIComponent(e[o]));b+=l+m.join("&")}else b+=l+e;h.open("GET",b,!0);h.send(null);return h},xmlHttp:function(){return window.ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:window.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){}}(),crossAsynJson:function(b,e,g,h){var l=UI.DC("script"),m=UI.GT(document,"head")[0];window[e]=function(b){window[e]=void 0;try{delete window[e]}catch(h){}g(b);m&&setTimeout(function(){m.removeChild(l)},5)};h&&UI.A(l,"charset",h);UI.A(l,"type","text/javascript");UI.A(l,"src",b);m.appendChild(l)},getScript:function(b,e,g){var h=UI.DC("script");UI.B.ie?h.onreadystatechange=function(){if("loaded"==this.readyState||"complete"==this.readyState)e&&e(),h=null}:h.onload=function(){e&&e();h=null};g&&UI.A(h,"charset",g);UI.A(h,"type","text/javascript");UI.A(h,"src",b);UI.A(h,"async","true");UI.GT(document,"head")[0].appendChild(h)},getCss:function(){function b(){try{for(var e=document.styleSheets,g,h,l=0,m=e.length;l<m;l++)if(h=e[l].ownerNode,h.href==url)if(UI.B.safari)g=h.sheet;else if(h.sheet)try{g=h.sheet.cssRules}catch(o){1E3==o.code&&(g=1)}g?call():setTimeout(b,50)}catch(s){setTimeout(b,50)}}return function(e,g,h){var l=h?h:UI.DC("link");g&&(UI.B.safari||UI.B.firefox?setTimeout(b,50):l.onload=function(){g()});h||(UI.A(l,"rel","stylesheet"),UI.A(l,"type","text/css"),UI.GT(document,"head")[0].appendChild(l));UI.A(l,"href",e)}}(),evalScript:function(b){var e=this.regExp.script;(b=(b||"").match(RegExp(e,"img")))&&UI.each(b,function(b){eval(b.match(RegExp(e,"im"))[1])})},regExp:{script:"<script[^>]*>([\\S\\s]*?)<\/script>"},encode:function(b){return escape(UI.utfEncode(b))},decode:function(b){return UI.utfDecode(unescape(b))},utfEncode:function(b){for(var b=b.replace(/\r\n/g,"\n"),e="",g=0,h=b.length;g<h;g++){var l=b.charCodeAt(g);128>l?e+=String.fromCharCode(l):(127<l&&2048>l?e+=String.fromCharCode(l>>6|192):(e+=String.fromCharCode(l>>12|224),e+=String.fromCharCode(l>>6&63|128)),e+=String.fromCharCode(l&63|128))}return e},utfDecode:function(b){for(var e="",g=0,h=c1=c2=c3=0;g<b.length;)h=b.charCodeAt(g),128>h?(e+=String.fromCharCode(h),g++):191<h&&224>h?(c2=b.charCodeAt(g+1),e+=String.fromCharCode((h&31)<<6|c2&63),g+=2):(c2=b.charCodeAt(g+1),c3=b.charCodeAt(g+2),e+=String.fromCharCode((h&15)<<12|(c2&63)<<6|c3&63),g+=3);return e},parseUrl:function(b,e){var g=b?b:document.location.href,h={},e=e||"?";if(!g.hasString(e))return h;for(var g=g.split(e)[1].split("&"),l=0;l<g.length;l++){var m=g[l].replace(/#.*$/g,"").split("=");m[1]||(m[1]="");h[m[0]]=UI.B.ie?m[1]:UI.decode(m[1])}return h},cookie:function(b,e,g,h){if(void 0==e){b+="=";e=document.cookie.split(";");g=0;for(h=e.length;g<h;g++){for(var l=e[g];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(b))return decodeURIComponent(l.substring(b.length,l.length))}return null}l="";g&&(l=new Date,l.setTime(l.getTime()+864E5*g),l="; expires="+l.toGMTString());document.cookie=b+"="+e+l+"; path=/"+(h?";domain="+h:"")},drag:function(b,e,g){var h=document,g=void 0!=g?g:!0;UI.EA(b,"mousedown",function(l){e.start&&e.start(l);g&&(b.setCapture?b.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP));e.drag&&(h.onmousemove=e.drag);h.onmouseup=function(){g&&(b.releaseCapture?b.releaseCapture():window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP));e.stop&&e.stop(l);h.onmousemove=null;h.onmouseup=null;e.call&&e.call(l)}})},animate:function(b,e,g,h,l,m){var l=l||0.4,o=e.hasString("scroll"),s="height,width,marginLeft,marginTop".hasString(e),u,p=setInterval(function(){var m,v,t,F="opacity"==e;m=s?b.style[e]:o?b[e]:UI.C(b,e);F?(m*=100,g*=100,100<g&&(g=100)):o||(m="auto"==m?0:Number(m.slice(0,-2)));if(isNaN(g))clearInterval(p);else{if(3>=Math.abs(g-m)||o&&u==m)m=g,clearInterval(p);t=(g-m)*l;F||(0<t&&1>t?t=1:0>t&&-1<t&&(t=-1));v=u=m+t;if(!F&&(0>t&&0<g-v||0<t&&0<v-g))v=g;s?b.style[e]=v+"px":o?b[e]=parseInt(v):UI.C(b,e,!F?v+"px":v/100+"");m==g&&(UI.isString(h)?eval(h):h&&h())}},m||40);return p},getX:function(b){return b.getBoundingClientRect?b.getBoundingClientRect().left+UI.scrollX():(b.offsetParent?b.offsetLeft+UI.getX(b.offsetParent):b.offsetLeft)+("fixed"==UI.C(b,"position")?UI.scrollX():0)},getY:function(b){return b.getBoundingClientRect?b.getBoundingClientRect().top+UI.scrollY():(b.offsetParent?b.offsetTop+UI.getY(b.offsetParent):b.offsetTop)+("fixed"==UI.C(b,"position")?UI.scrollY():0)},within:function(b,e){var g=UI.getX(e)-UI.scrollX(),h=UI.width(e)+g,l=UI.getY(e)-UI.scrollY(),m=UI.height(e)+l,o={};if(b[0]>g&&b[0]<h&&b[1]>l&&b[1]<m)return b[0]-g<(h-g)/2&&(o.left=!0),b[1]-l<(m-l)/2&&(o.top=!0),o},frameX:function(b){return b.frameElement?UI.getX(b.frameElement)+UI.frameX(b.parent):0},frameY:function(b){return b.frameElement?UI.getY(b.frameElement)+UI.frameY(b.parent):0},width:function(b){return b?parseInt(b.offsetWidth):0},height:function(b){return b?parseInt(b.offsetHeight):0},pageWidth:function(){return document.body.scrollWidth||document.documentElement.scrollWidth},pageHeight:function(){return document.body.scrollHeight||document.documentElement.scrollHeight},windowWidth:function(){var b=document.documentElement;return self.innerWidth||b&&b.clientWidth||document.body.clientWidth},windowHeight:function(){var b=document.documentElement;return self.innerHeight||b&&b.clientHeight||document.body.clientHeight},scrollX:function(b){var e=document.documentElement;if(b){var g=b.parentNode,h=b.scrollLeft||0;b==e&&(h=UI.scrollX());return g?h+UI.scrollX(g):h}return self.pageXOffset||e&&e.scrollLeft||document.body.scrollLeft},scrollY:function(b){var e=document.documentElement;if(b){var g=b.parentNode,h=b.scrollTop||0;b==e&&(h=UI.scrollY());return g?h+UI.scrollY(g):h}return self.pageYOffset||e&&e.scrollTop||document.body.scrollTop},scrollTo:function(b,e,g){if(b==document.documentElement||b==document.body)return window.scrollTo(e,g)},hide:function(b){UI.isString(b)&&(b=this.G(b));if(b){if(!b.__curDisplay){var e=this.C(b,"display");"none"!=e&&(b.__curDisplay=e)}b.style.display="none"}},show:function(b){UI.isString(b)&&(b=this.G(b));b&&(b.style.display=b.__curDisplay||"")},toggle:function(b){UI.isString(b)&&(b=this.G(b));"none"==this.C(b,"display")?this.show(b):this.hide(b)},hasClass:function(b,e){return!b||!b.className?!1:b.className!=b.className.replace(RegExp("\\b"+e+"\\b"),"")},addClass:function(b,e){b&&(b.className?this.hasClass(b,e)||(b.className+=" "+e):b.className=e)},removeClass:function(b,e){if(b){var g=e.split(" ");1<g.length?UI.each(g,function(e){UI.removeClass(b,e)}):this.hasClass(b,e)&&(b.className=b.className.replace(RegExp("\\b"+e+"\\b"),"").replace(/\s$/,""))}},toggleClass:function(b,e){this.hasClass(b,e)?this.removeClass(b,e):this.addClass(b,e)},next:function(b){b=b.nextSibling;return null==b?!1:UI.isElement(b)?b:this.next(b)},prev:function(b){b=b.previousSibling;return null==b?!1:UI.isElement(b)?b:this.prev(b)},remove:function(b){b&&b.parentNode&&b.parentNode.removeChild(b)},append:function(b,e){e.appendChild(b)},prepend:function(b,e){var g=e.firstChild;g?UI.before(b,g):UI.append(b,e)},after:function(b,e){var g=e.parentNode;g.lastChild==b?g.appendChild(b):g.insertBefore(b,e.nextSibling)},before:function(b,e){e.parentNode.insertBefore(b,e)},replace:function(b,e){e.parentNode.replaceChild(b,e)},tmpl:function(){var b={};return function g(h,l){var m=!/\W/.test(h)?b[h]=b[h]||g(UI.G(h).innerHTML):UI.tmplString(h);return l?m(l):m}}(),tmplString:function(b){return new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")},txTpl:function(){var b={};return function(e,g,h,l,m){var o=[];if((m=void 0!=m?m:!0)&&b[e]){for(var m=0,s=b[e].propList,u=s.length;m<u;m++)o.push(g[s[m]]);g=b[e].parsefn}else{s=[];h||(h="<%");l||(l="%>");l=(-1==e.indexOf(h)?document.getElementById(e).innerHTML:e).replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split(h).join("\t").replace(RegExp("((^|"+l+")[^\t]*)'","g"),"$1\r").replace(RegExp("\t=(.*?)"+l,"g"),"';\n s+=$1;\n s+='").split("\t").join("';\n").split(l).join("\n s+='").split("\r").join("\\'");for(u in g)s.push(u),o.push(g[u]);g=new Function(s," var s='';\n s+='"+l+"';\n return s");m&&(b[e]={parsefn:g,propList:s})}try{return g.apply(null,o)}catch(p){e="txTpl"+(new Date).getTime(),g="var "+e+"="+g.toString(),m=navigator.userAgent.toLowerCase(),s=document.getElementsByTagName("head")[0],u=document.createElement("script"),-1<m.indexOf("gecko")&&-1==m.indexOf("khtml")?window.eval.call(window,g):(u.innerHTML=g,s.appendChild(u),s.removeChild(u)),window[e].apply(null,o)}}}(),html:function(b){var e=UI.DC("div"),g=[];e.innerHTML=b;UI.each(e.childNodes,function(b){UI.isElement(b)&&g.push(b)});return g},css:function(b,e){var g;e||(e=UI.DC("style"),UI.A(e,"type","text/css"),UI.append(e,UI.GT(document,"head")[0]));if(e.styleSheet)try{e.styleSheet.cssText=b}catch(h){g=$$("head style");var l=g.length;1<l&&(UI.remove(g[l-1]),g[l-2].styleSheet.cssText+=b)}else g=document.createTextNode(b),UI.append(g,e)},text:function(b){for(var e=[],b=b.childNodes,g,h=0,l=b.length;h<l;h++)g=b[h].nodeName.toUpperCase(),"STYLE"==g||"SCRIPT"==g||e.push(1!=b[h].nodeType?b[h].nodeValue:UI.text(b[h]));return e.join("")},parent:function(b,e){if(UI.isArray(b)){var g=[];UI.each(b,function(b){(e&&UI.hasClass(b.parentNode,e)||!e)&&g.push(b.parentNode)});return g}return b&&b.parentNode},parents:function(b,e){if(e){var g=[],h=UI.parents(b);UI.each(h,function(b){UI.hasClass(b,e)&&g.push(b)});return g}return(h=b.parentNode)?"HTML"==h.nodeName?[h]:[h].concat(UI.parents(h)):[]},children:function(b,e){var g=[];e&&(e=e.split("|"));UI.each(b.childNodes,function(b){var l=!1;if(e)for(var m=0,o=e.length;m<o;m++)if(UI.hasClass(b,e[m])){l=!0;break}UI.isElement(b)&&(!e||l)&&g.push(b)});return g},A:function(b,e,g){if(b&&b.getAttribute){if(void 0==g)return b.getAttribute(e)||"";""==g?b.removeAttribute(e):b.setAttribute(e,g)}},C:function(){var b;return function(e,g,h){if(e)if(void 0==h){if(window.getComputedStyle)return g=g.replace(/([A-Z])/g,"-$1"),g=g.toLowerCase(),window.getComputedStyle(e,null).getPropertyValue(g);if(e.currentStyle)return"opacity"==g?0<=e.style.filter.indexOf("opacity=")?parseFloat(e.style.filter.match(/opacity=([^)]*)/)[1])/100:"1":e.currentStyle[g]}else!b&&"opacity"==g&&(b="opacity"in e.style?1:2),"opacity"==g&&2==b?e.style.filter=(e.style.filter||"").replace(/alpha\([^)]*\)/,"")+"alpha(opacity="+100*h+")":e.style[g]=h}}(),DC:function(b){return document.createElement(b)},E:function(b){if(b&&b.clone)return b;b=window.event||b||{};return{clone:!0,stop:function(){b&&b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},prevent:function(){b&&b.preventDefault?b.preventDefault():b.returnValue=!1},target:b.target||b.srcElement,relatedTarget:b.relatedTarget||(b.fromElement&&b.fromElement===b.srcElement?b.toElement:b.fromElement),x:b.clientX||b.pageX,y:b.clientY||b.pageY,button:b.button,key:b.keyCode,shift:b.shiftKey,alt:b.altKey,ctrl:b.ctrlKey,type:b.type,wheel:b.wheelDelta/120||-b.detail/3}},bind:function(b,e,g){g&&UI.clear(function(){e=null});return function(){return b.apply(e,Array.prototype.slice.call(arguments))}},EA:function(b,e,g,h){if(b){if(UI.isString(b))var l=g,g=function(){eval(l)};return b.addEventListener?("mousewheel"==e&&UI.B.firefox&&(e="DOMMouseScroll"),b.addEventListener(e,g,h),!0):b.attachEvent?b.attachEvent("on"+e,g):!1}},ER:function(b,e,g){if(b)return b.removeEventListener?(b.removeEventListener(e,g,!1),!0):b.detachEvent?b.detachEvent("on"+e,g):!1},fireEvent:function(){return document.dispatchEvent?function(b,e){var g=document.createEvent("HTMLEvents");g.initEvent(e,!0,!0);return!b.dispatchEvent(g)}:function(b,e){var g=document.createEventObject();return b.fireEvent("on"+e,g)}}(),linkEvent:function(){var b={},e=function(e,h){var l=b[e];l&&UI.each(l,function(b){UI.isFunction(b)&&b(h)})};e.event=b;e.add=function(e,h){b[e]||(b[e]=[]);h&&b[e].push(h)};e.remove=function(e,h){var l=b[e];UI.each(l,function(b,e){h&&b==h&&l.splice(e,1)})};return e}(),proxyEvent:function(b,e,g,h){UI.EA(b,e,function(e){var m=UI.E(e),e=m.target,o=1,s=[],u=[];for(UI.proxyEventCache={};e;){o++;s.push(e);var p=e.className.split(" ").join(".");u.push(e.nodeName.toLowerCase()+(e.id?"#"+e.id:"")+(p?"."+p:""));UI.proxyEventStop||h&&o>=h||e===b?(e=null,UI.proxyEventStop=0):e=e.parentNode}UI.each(s,function(b,e){for(var h=0,l=g.length;h<l;h++){var o=g[h][1](b,u,s,e);o&&g[h][0].call(UI.isElement(o)?o:b,m)}})})},G:function(b){return UI.isElement(b)?b:document.getElementById(b)},GT:function(b,e){return b.getElementsByTagName(e)},GC:function(){function b(t,p){p||(p=t,t=document);t=t||document;if(!/^[\w\-_#]+$/.test(p)&&t.querySelectorAll)return e(t.querySelectorAll(p));if(-1<p.indexOf(",")){for(var B=p.split(/,/g),G=[],J=0,w=B.length;J<w;++J)G=G.concat(b(t,B[J]));return u(G)}var B=p.match(h),w=B.pop(),G=(w.match(m)||s)[1],v=!G&&(w.match(l)||s)[1],J=w.split(".").slice(2),w=!G&&(w.match(o)||s)[1];if(v&&!w&&t.getElementsByClassName)w=e(t.getElementsByClassName(v));else{w=!G&&e(t.getElementsByTagName(w||"*"));if(v){for(var v=RegExp("(^|\\s)"+v+"(\\s|$)"),K=-1,E,H=-1,A=[],J=J||"";E=w[++K];)v.test(E.className)&&E.className.hasString(J)&&(A[++H]=E);w=A}if(G)return(B=t.getElementById(G))?[B]:[]}return B[0]&&w[0]?g(B,w):w}function e(b){try{return Array.prototype.slice.call(b)}catch(e){for(var g=[],h=0,l=b.length;h<l;++h)g[h]=b[h];return g}}function g(b,e,h){var p=b.pop();if(">"===p)return g(b,e,!0);for(var u=[],w=-1,v=(p.match(m)||s)[1],K=!v&&(p.match(l)||s)[1],p=!v&&(p.match(o)||s)[1],E=-1,H,A,x,p=p&&p.toLowerCase();H=e[++E];){A=H.parentNode;do if(x=(x=(x=!p||"*"===p||p===A.nodeName.toLowerCase())&&(!v||A.id===v))&&(!K||RegExp("(^|\\s)"+K+"(\\s|$)").test(A.className)),h||x)break;while(A=A.parentNode);x&&(u[++w]=H)}return b[0]&&u[0]?g(b,u):u}var h=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/ig,l=/^(?:[\w\-_]+)?\.([\w\-_]+)/,m=/^(?:[\w\-_]+)?#([\w\-_]+)/,o=/^([\w\*\-_]+)/,s=[null,null],u,p=+new Date,O,v=1;O=function(b){var e=b[p],g=v++;return!e?(b[p]=g,!0):!1};u=function(b){for(var e=b.length,g=[],h=-1,l=0,m;l<e;++l)m=b[l],O(m)&&(g[++h]=m);p+=1;return g};return b}(),closest:function(b,e,g){g=g||document;for(e=UI.GC(g,e);b;){if(UI.has(e,b))return b;b=b.parentNode}return null},getEvent:function(){if(window.event)return window.event;for(var b=arguments.callee.caller;b;){var e=b.arguments[0];if(e&&(e.constructor===Event||e.constructor===MouseEvent||"object"===typeof e&&e.preventDefault&&e.stopPropagation))return e;b=b.caller}return null},sortElement:function(b,e){if(1<b.length&&e)for(var g=0,h=e.length;g<h;g++)b=b.sort(function(b,h){return b.className.hasString(e[g])&&!h.className.hasString(e[g])?1:-1});return b},withinElement:function(b,e){for(var e=UI.E(e||UI.getEvent()),g=e.relatedTarget||document;g;){if(b===g)return!0;g=g.parentNode}return!1},isDate:function(b){return"Date"==this.getType(b)},isMouseMove:function(){var b,e,g;UI.EA(document.body,"mousedown",function(b){b=UI.E(b);e=b.x+","+b.y});UI.EA(document.body,"mouseup",function(h){h=UI.E(h);g=h.x+","+h.y;b=e!=g});UI.isMouseMove=function(){return b}},cloneDate:function(b){if(!b)return b;d=new Date;d.setTime(b.getTime());return d},formatDate:function(b,e){for(var g=e.replace(/\W/g,",").split(","),h="yyyy MM dd hh mm ss ww".split(" "),l={y:b.getFullYear(),M:b.getMonth()+1,d:b.getDate(),h:b.getHours(),m:b.getMinutes(),s:b.getSeconds(),w:b.getDay()},m=0,o=g.length;m<o;m++)for(var s=g[m],u=0;7>u;u++){var p=h[u].slice(-1);s.hasString(p)&&("w"==p&&0==l[p]&&(l[p]=7),e=s.hasString(h[u])?e.replace(RegExp(h[u],"g"),this.addZero(l[p])):e.replace(RegExp(h[u].slice(h[u].length/2),"g"),l[p]))}return e},parseDate:function(b,e){e||(e="yyyy-MM-dd");var e=e.replace(/\W/g,",").split(","),b=b.replace(/\D/g,",").split(","),g=2E3,h=0,l=1,m=0,o=0,s=0;UI.each(e,function(e,p){""!=b[p]&&!isNaN(b[p])&&(e.hasString("y")&&(g=Number(b[p])),e.hasString("M")&&(h=Number(b[p])-1),e.hasString("d")&&(l=Number(b[p])),e.hasString("h")&&(m=Number(b[p])),e.hasString("m")&&(o=Number(b[p])),e.hasString("s")&&(s=Number(b[p])),e.hasString("w")&&(s=Number(b[p])))});return new Date(g,h,l,m,o,s)},zoneDate:function(b,e){var g=new Date(Number(b)),g=g.getTime()+6E4*g.getTimezoneOffset();return new Date(g+36E5*e)},isObject:function(b){return"object"==typeof b},isElement:function(b){return b&&1==b.nodeType},isUndefined:function(b){return"undefined"==typeof b},isFunction:function(b){return"Function"==this.getType(b)},isNumber:function(b){return"Number"==this.getType(b)},isString:function(b){return"String"==this.getType(b)},isArray:function(b){return"Array"==this.getType(b)},getType:function(b){return Object.prototype.toString.call(b).slice(8,-1)},json:function(b){var e={};if(b)try{e=eval("("+b+")")}catch(g){}return e},json2str:function(b){var e=[],g=UI.isArray(b);if(UI.isObject(b)){if(null===b)return"null";if(window.JSON&&window.JSON.stringify)return JSON.stringify(b);for(var h in b)e.push((g?"":'"'+h+'":')+UI.json2str(b[h]));e=e.join();return g?"["+e+"]":"{"+e+"}"}return UI.isNumber(b)||UI.isFunction(b)?b.toString():UI.isUndefined(b)?"undefined":!b?'""':'"'+b+'"'},addZero:function(b,e){return Array(Math.abs((""+b).length-((e||2)+1))).join(0)+b},trim:function(b){return b.replace(/^\s+|\s+$/g,"")},random:function(b,e){void 0==b&&(b=0);void 0==e&&(e=9);return Math.floor(Math.random()*(e-b+1)+b)},has:function(b,e){for(var g=0,h=b.length;g<h;g++)if(b[g]==e)return!0;return!1},hasKey:function(b,e){return e in b},each:function(b,e){if(b)if(UI.isUndefined(b[0])&&!UI.isArray(b))for(var g in b){if(e(b[g],g))break}else{g=0;for(var h=b.length;g<h&&!e(b[g],g);g++);}},merge:function(b,e){var g=[];if(e)return UI.each(e,function(e){UI.has(b,e)||g.push(e)}),b.concat(g);UI.each(b,function(b){UI.has(g,b)||g.push(b)});return g},ready:function(b){if(UI.ready.done)return b();UI.isReady.done?UI.readyDo.push(b):(UI.readyDo=[b],UI.isReady())},readyDo:[],isReady:function(){if(!UI.isReady.done){UI.isReady.done=!0;if("complete"==document.readyState)UI.onReady();else if(document.addEventListener)if("interactive"==document.readyState&&!UI.B.ie9)UI.onReady();else document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1);UI.onReady()},!1);else if(document.attachEvent){var b=top!=self;b?document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),UI.onReady())}):document.documentElement.doScroll&&!b&&function(){if(!UI.ready.done){try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}UI.onReady()}}()}UI.EA(window,"load",UI.onReady)}},onReady:function(){if(!UI.ready.done){UI.ready.done=!0;for(var b=0,e=UI.readyDo.length;b<e;b++)try{UI.readyDo[b]()}catch(g){}UI.readyDo=null}}};UI.B=function(){var b={},e=navigator.userAgent;b.win=b.win||e.hasString("Win32");UI.each({win:"Windows",mac:"Mac",ie:"MSIE",ie6:"MSIE 6",ie7:"MSIE 7",ie8:"MSIE 8",ie9:"MSIE 9",safari:"WebKit",webkit:"WebKit",chrome:"Chrome",ipad:"iPad",iphone:"iPhone",os4:"OS 4",os5:"OS 5",os6:"OS 6",qq:"QQBrowser",firefox:"Firefox",tt:"TencentTraveler",opera:"Opera"},function(g,l){b[l]=e.hasString(g)});b.ie6=b.ie6&&!b.ie7&&!b.ie8;b.opera=window.opera||b.opera;try{b.maxthon=window.external&&window.external.max_version}catch(g){}return b}();UI.proxyEvent.stop=function(){UI.proxyEventStop=1};window.UI_&&UI_();UI.B.ie&&document.execCommand("BackgroundImageCache",!1,!0);UI._clearCache=[];UI.clear=function(b){UI._clearCache.push(b)};UI.EA(window,"unload",function(){for(var b=0,e=UI._clearCache.length;b<e;b++)UI._clearCache[b]()});UI.isMouseMove();(function(b,e){function g(a){return function(c){return Object.prototype.toString.call(c)==="[object "+a+"]"}}function h(a,c,f){T(a,c);return c[f]}function l(a){a=a.match(L);return(a?a[0]:".")+"/"}function m(a){a=a.replace(Q,"/");for(a=a.replace(da,"$1/");a.match(U);)a=a.replace(U,"/");return a}function o(a){a=m(a);R.test(a)?a=a.slice(0,-1):S.test(a)||(a+=".js");return a.replace(":80/","/")}function s(b,e){var r;a.test(b)?r=b:c.test(b)?r=(e?l(e):D)+b:f.test(b)?(r=(e||D).match(ia),r=(r?r[1]:"")+b):r=M.base+b;return r}function u(a,c){if(!a)return"";var f=a,b=M.alias;b&&b.hasOwnProperty(f)&&r.test(f)&&(f=b[f]);var e=M.vars;e&&0<=f.indexOf("{")&&(f=f.replace(Y,function(a,c){return e.hasOwnProperty(c)?e[c]:a}));var a=s(f,c),f=a=o(a),b=M.map,q=f;if(b)for(var j=0;j<b.length&&!(q=b[j],q=z(q)?q(f)||f:f.replace(q[0],q[1]),q!==f);j++);return q}function p(a,c){var f=a.sheet,b;if(ja)f&&(b=!0);else if(f)try{f.cssRules&&(b=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(b=!0)}setTimeout(function(){b?c():p(a,c)},20)}function O(){if($)return $;if(aa&&"interactive"===aa.readyState)return aa;for(var a=Z.getElementsByTagName("script"),c=a.length-1;0<=c;c--){var f=a[c];if("interactive"===f.readyState)return aa=f}}function v(a,c){this.uri=a;this.status=c||I.INITIALIZED;this.dependencies=[];this.waitings=[];T("initialized",this)}function t(a,c){if(C(a)){for(var f=[],b=0;b<a.length;b++)f[b]=t(a[b],c);return f}f={id:a,refUri:c};b=h("resolve",f,"id");return f.uri||u(b,c)}function F(a,c,f){function b(a){a&&a.status<I.LOADED&&(a.status=I.LOADED);0===--e&&c()}f=f||{};a=f.filtered?a:X(a);if(0===a.length)c();else{T("load",a);for(var e=f=a.length,r=0;r<f;r++)(function(a){function c(){if(f.status<I.SAVED)b();else if(K(f)){var a=W;a.push(a[0]);k("Circular dependencies: "+a.join(" --\> "));W.length=0;b()}else a=f.waitings=X(f.dependencies),0===a.length?b(f):F(a.slice(),function(){b(f)},{filtered:!0})}var f=P[a],e=f.dependencies;f.status<I.SAVED?e.length?f.load(e.splice(0,e.length),function(){B(a,c)}):B(a,c):c()})(a[r])}}function B(a,c){function f(){delete ea[b];fa[b]=!0;ba&&(J(a,ba),ba=null);var c,e=ca[b];for(delete ca[b];c=e.shift();)c()}P[a].status=I.FETCHING;var b=h("fetch",{uri:a},"requestUri")||a;if(fa[b])c();else if(ea[b])ca[b].push(c);else{ea[b]=!0;ca[b]=[c];var r=M.charset,j={uri:a,requestUri:b,callback:f,charset:r};if(!h("request",j,"requested")){var j=j.requestUri,g=na.test(j),n=q.createElement(g?"link":"script");if(r&&(r=z(r)?r(j):r))n.charset=r;var D=n;g&&(ja||!("onload"in D))?setTimeout(function(){p(D,f)},1):D.onload=D.onerror=D.onreadystatechange=function(){oa.test(D.readyState)&&(D.onload=D.onerror=D.onreadystatechange=null,!g&&!M.debug&&Z.removeChild(D),D=e,f())};g?(n.rel="stylesheet",n.href=j):(n.async=!0,n.src=j);$=n;y?Z.insertBefore(n,y):Z.appendChild(n);$=null}}}function G(a,c,f){var b=arguments.length;1===b?(f=a,a=e):2===b&&(f=c,c=e,C(a)&&(c=a,a=e));if(!C(c)&&z(f)){var r=[];f.toString().replace(pa,"").replace(qa,function(a,c,f){f&&r.push(f)});c=r}var b={id:a,dependencies:c,factory:f},j;if(!a&&q.attachEvent){var g=O();g?j=g.src:k("Failed to derive: "+f)}(j=a?t(a):j)?J(j,b):ba=b}function J(a,c){c.uri=a;var a=h("save",c,"uri"),f=P[a]||(P[a]=new v(a,void 0));f.status<I.SAVED&&(f.id=c.id||a,f.dependencies=t(c.dependencies||[],a),f.factory=c.factory,f.status=I.SAVED)}function w(a){function c(f){f=P[c.resolve(f)];if(f===e)return null;f.parent=a;return w(f)}if(!a)return null;if(a.status>=I.EXECUTING)return a.exports;T("execute",a);if(a.status<I.LOADED&&a.exports===e)return null;a.status=I.EXECUTING;c.async=function(f,b){a.load(f,b);return c};c.resolve=function(c){return t(c,a.uri)};var f=a.factory,b=f===e?a.exports:f;z(f)&&(b=f(c,a.exports={},a));a.exports=b===e?a.exports:b;a.status=I.EXECUTED;T("executed",a);return a.exports}function X(a){for(var c=[],f=0;f<a.length;f++){var b=a[f];b&&(P[b]||(P[b]=new v(b,void 0))).status<I.LOADED&&c.push(b)}return c}function K(a){var c=a.waitings;if(0===c.length)return!1;W.push(a.uri);a:{for(a=0;a<c.length;a++)for(var f=0;f<W.length;f++)if(W[f]===c[a]){a=!0;break a}a=!1}if(a){a=W[0];for(f=c.length-1;0<=f;f--)if(c[f]===a){c.splice(f,1);break}return!0}for(a=0;a<c.length;a++)if(K(P[c[a]]))return!0;W.pop();return!1}function E(a){var c=M.preload,f=c.length;f?ka.load(c,function(){c.splice(0,f);E(a)}):a()}function H(a){for(var c in a){var f=a[c];if(f&&"plugins"===c){c="preload";for(var b=[],e=void 0;e=f.shift();)b.push(la+"plugin-"+e);f=b}if((b=M[c])&&V(b))for(var r in f)b[r]=f[r];else C(b)?f=b.concat(f):"base"===c&&(f=o(s(f+"/"))),M[c]=f}return x}var A=b.seajs;if(!A||A.args){var x=b.seajs={version:"2.0.0pre"},V=g("Object"),C=Array.isArray||g("Array"),z=g("Function"),k=x.log=function(a,c){b.console&&(c||M.debug)&&console[c||(c="log")]&&console[c](a)},N=x.events={};x.on=function(a,c){if(!c)return x;(N[a]||(N[a]=[])).push(c);return x};x.off=function(a,c){if(!a&&!c)return x.events=N={},x;var f=N[a];if(f)if(c)for(var b=f.length-1;0<=b;b--)f[b]===c&&f.splice(b,1);else delete N[a];return x};var T=x.emit=function(a,c){var f=N[a],b;if(f)for(f=f.slice();b=f.shift();)b(c);return x},L=/[^?#]*(?=\/.*$)/,Q=/\/\.\//g,U=/\/[^/]+\/\.\.\//g,da=/([^:\/])\/\/+/g,S=/\?|\.(?:css|js)$|\/$/,R=/#$/,Y=/{([^{}]+)}/g,ia=/^(.*?:\/\/.*?)(?:\/|$)/,a=/(?:^|:)\/\/./,c=/^\.{1,2}\//,f=/^\//,r=/^[^./][^:]*$/,q=document,j=location,D=l(j.href),n;if(!(n=q.getElementById("seajsnode")))n=q.getElementsByTagName("script"),n=n[n.length-1];var la=l(n.hasAttribute?n.src:n.getAttribute("src",4))||D;x.cwd=function(a){return a?D=m(a+"/"):D};var Z=q.getElementsByTagName("head")[0]||q.documentElement,y=Z.getElementsByTagName("base")[0],na=/\.css(?:\?|$)/i,oa=/^(?:loaded|complete|undefined)$/,$,aa,ja=536>1*navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"),qa=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,pa=/\\\\/g,P=x.cache={},I=v.STATUS={INITIALIZED:1,FETCHING:2,SAVED:3,LOADED:4,EXECUTING:5,EXECUTED:6};v.prototype.load=function(a,c){var f=t(C(a)?a:[a],this.uri);F(f,function(){for(var a=[],e=0;e<f.length;e++)a[e]=w(P[f[e]]);c&&c.apply(b,a)})};var ea={},fa={},ca={},ba=null;v.prototype.destroy=function(){var a=this.uri;delete P[a];delete fa[a]};var W=[],ka=new v(e,I.EXECUTED);x.use=function(a,c){E(function(){ka.load(a,c)});return x};b.define=G;x.resolve=u;var ga=la,ma=ga.match(/^(.+?\/)(?:seajs\/)+(?:\d[^/]+\/)?$/);ma&&(ga=ma[1]);var M=H.data={base:ga,charset:"utf-8",preload:[]};x.config=H;var ha,j=j.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),j=j+(" "+q.cookie);j.replace(/seajs-(\w+)=1/g,function(a,c){(ha||(ha=[])).push(c)});H({plugins:ha});j=n.getAttribute("data-config");n=n.getAttribute("data-main");j&&M.preload.push(j);n&&x.use(n);if(A&&A.args){j=["define","config","use","on"];A=A.args;for(n=0;n<A.length;n+=2)x[j[A[n]]].apply(x,A[n+1])}}})(this);(function(){var b=UI.G,e=UI.GC;if(!window.MIApp||window.MIApp.lib)window.$=UI.G,window.$$=UI.GC;window._||(window._=function(a){if(1==arguments.length)return a;var c=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,b){return c[b]})});var g=!UI.parseUrl().jsDebug;g&&(onerror=function(a,c,f){if((window.MIApiId||MI.api.type)<1E3&&document.domain=="qq.com"){if(UI.B.ie)for(var b=arguments.callee.caller.caller,e,j=[];b;){e=b;j.push(e.toString().replace(/function/g,"F").substring(0,80));b=b.caller}b=navigator.userAgent;j={name:"btnOnerror",iBak1:f||"",sText:j?j.join(""):"",sBak1:encodeURIComponent(a||""),sBak2:b,id:1210};e=UI.json2str(j);if(!MI.Error[e]&&(!UI.B.webkit||!b.hasString("MetaSr"))){MI.Bos(j);MI.Error[e]=1}}if(!MI.user.isLab&&MI.hostType)return true});String.prototype.toTitle=function(){return this.replace(/\r/g,"").replace(/\n/g,"").replace(/\'/g,"&#39;").replace(/\"/g,"&#34;").replace(/</g,"&#60;").replace(/>/g,"&#62;")};try{document.domain="qq.com"}catch(h){}if(window.MI){var l=MI;window.MI_=function(){for(var a in l)MI[a]||(MI[a]=l[a])}}var m={picTool:['<div class="tl_tools bor_bg picTools"><a href="$Url/2000" class="btnOriginal" onclick="MI.Bos(\'btnPicSource\')" target="_blank"><i class="ic ic_tool_zoomIn"></i>',_("查看原图"),'</a><a href="#" class="btnBack"><i class="ic ic_tool_rtl"></i>',_("向左"),'</a><a href="#" class="btnPrev"><i class="ic ic_tool_rtr"></i>',_("向右"),'</a><a href="$hisUrl" boss="btn_pic_getMore" class="btnMore" target="_blank"><i class="ic ic_tool_album"></i>'+_("更多图片")+'</a><a href="#" codeUrl="$codeUrl" class="btnMobile" style="display:none;"><i class="ic ic_tool_qrcode"></i>存到手机</a></div>'].join(""),reply:['<div class="talkWrap bgr3 dialogPics" style="overflow:visible"><div class="SA"><em>◆</em><span>◆</span></div>\t<div class="top c_tx5"><span class="left"><span class="number cNote"></span><span class="replyTitle"></span><span class="addReply"></span></span><a href="#" class="close" title="',_("关闭"),'">',_("关闭"),'</a>\t</div>\t<div class="cont"><textarea class="inputTxt"></textarea><div class="sendStatus clear"></div></div>\t<div class="bot"><div class="insertFun"><div class="sendList insertFace"><a class="txt" href="#" title="',_("表情"),'"><em class="sico ico_face"></em></a></div><div class="sendList atSome"><a class="txt" href="#" title="',_("@朋友帐号就可以提到他"),'"><em class="sico ico_at"></em>',_("朋友"),'</a></div><div class="sendList newTopic"><a href="#" class="creatNew txt" title="',_("汇聚相同热点的广播"),'" tabindex="3"><em class="sico ico_topic"></em>',_("话题"),'</a></div><div class="sendList uploadPic" style="display:none"><a href="#" class="txt sendPic" tabindex="3" title="',_("支持jpg、jpeg、gif、png格式，文件小于5M"),'"><em class="sico ico_pic"></em></a></div><div class="sendList uploadPic" style="display:none"><form target="retweetPic" method="post" enctype="multipart/form-data" class="sPicForm"><a href="javascript:;" class="txt sendPic"><em class="sico ico_pic"></em><input class="filePrew" name="pic" type="file" size="3" title="',_("支持jpg、jpeg、gif、png格式，文件小于5M"),'" tabindex="3"/></a></form></div><div class="sendList keyWords schBrace" style="display:none"><a class="txt" title="分享你的兴趣、关注点" href="#" boss="btnWideKeyWord"><em class="sico ic_keyword"></em>关键词</a></div></div><div class="left"></div><input type="button" class="inputBtn sendBtn" value="" /><a hrer="#" class="autoBackspace" style="display:none">',_("[自动缩减]"),'</a><span class="countTxt c_tx5"></span>\t</div>\t<div class="talkSuc c_tx5" style="display:none"><span class="ico_tsW"><span class="ico_ts"></span></span><span class="msg"></span></div>\t<iframe id="retweetPic" name="retweetPic" src="about:blank" style="display:none"></iframe></div>'].join("")},o=[_("添加到特别收听"),_("取消特别收听")],s=function(a,c){var f=c.match(/[\.#]?[\w|-]+/g),b=1;if(a){UI.each(f,function(c){var f=c.slice(0,1);if(f=="."){f=a.match(/\.[^\.#]+/g);if(!f||!UI.has(f,c))b=0}else(f=f=="#"?a.match(/#\w+/g):a.match(/\w+/g))&&f[0]==c||(b=0)});return b}},u={},p=1,O,v,t,F,B,G,J,w=0,X=function(){if(t)w=UI.height(t)-UI.height(F);else{F=b("mainWrapper"+MI.layoutFix);UI.each(F.childNodes,function(a){a.nodeType==1&&(w=w+UI.height(a))});w=w-UI.height(F)}w=w+MI.bottomFix},K={host:"http://"+(window.MIAPIHost||"api.t.qq.com"),type:0,version:"",time:"110602",source:null,boss:null},E={ui:{DatePicker:"110906",ColorPicker:"110107"},mi:{}},H={ui:{datePicker:"121106",colorPicker:"101228"},mi:{base:"130226",wide:"130226",apollo:"130320",talkListShare:"120221",mood:"130204",picList:"120912",itemSelect:"120305",message:"120704"}},A={},x={City:1,CityAll:1},V={_js:{},_css:{},_auto:{}},C;for(C in E)for(var z in E[C])E[C][z].hasString(":")?V[z]=E[C][z]:(V[z]="http://mat1.gtimg.com/www/mb/js/"+(z.hasString("/")?"":C+".")+z+(A[z]?".lab":"")+(x[z]&&window.MILang?"."+window.MILang:"")+"_"+E[C][z]+".js",V._js[z]=E[C][z]);for(C in H)for(z in H[C])V[z]="http://mat1.gtimg.com/www/mb/css/"+C+"."+z+(A[z]?".lab":"")+"_"+H[C][z]+".css",V._css[z]=H[C][z];m=MI={time:null,user:{account:"",name:"",fun:{}},string:{length:function(a){var c=(a||"").match(/[^\x00-\x80]/g);return a.length+(c?c.length:0)},escape:function(a){return MI.string.html(a).replace(/'/g,"\\'")},escapeReg:function(a){for(var c=[],f=0;f<a.length;f++){var b=a.charAt(f);switch(b){case ".":case "$":case "^":case "{":case "[":case "(":case "|":case ")":case "*":case "+":case "?":case "\\":c.push("\\x"+b.charCodeAt(0).toString(16).toUpperCase());break;default:c.push(b)}}return c.join("")},html:function(a){var a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=a.replace(/\/\*(\s|.)*?\*\//g,"");c.match(/expression/g)&&(a=c.replace(/expression/g,"expressio n"));return a},cut:function(a,c,f){var f=UI.isUndefined(f)?"...":f,b=[],e="";if(MI.string.length(a)>c){a=a.split("");UI.each(a,function(a){if(c>0){b.push(a);c=c-MI.string.length(a)}else return 1});e=b.join("")+f}else e=a;return e},id:function(a){var a=a||"",c;if(c=a.match(/[\w-]{9,99}/g))c=c[0];else if((c=a.match(/[?#&]account=([^&]+)($|&)/))&&c[1])c=c[1];else(c=a.match(/[^\/]+$/g))&&(c=c[0]);return(c||"").replace("#M","").split("?")[0]},account:function(a){return(a=(a||"").match(/@[^@]+$/g))&&a[0]?a[0].slice(1,-1):""},parseInt:function(a){if(UI.isNumber(a))return a;if(UI.isString(a))return a.replace(/\D/g,"")},sprintf:function(){var a=arguments,c=a[0]||"",f,b;f=1;for(b=a.length;f<b;f++)c=c.replace(/%s/,a[f]);return c},entityReplace:function(a){return a.replace(/&#38;?/g,"&amp;").replace(/&amp;/g,"&").replace(/&#(\d+);?/g,function(a,f){return String.fromCharCode(f)}).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&nbsp;/g," ").replace(/&#13;/g,"\n").replace(/(&#10;)|(&#x\w*;)/g,"").replace(/&amp;/g,"&")}},html:{button:function(a,c,f){if(!MI.html.buttonId)MI.html.buttonId=MI.random();MI.html.buttonId++;var b="btn_"+MI.html.buttonId;return'<label class="'+(c?c+" ":"")+'gb_btn" for="'+b+'"><input id="'+b+'" type="button" value="'+(a||"")+'" class="'+(f?f+" ":"")+'t" /></label>'}},number:{format:function(a){return(a+"").replace(/(?=(?!\b)(?:\w{3})+$)/g,",")}},random:function(a){return parseInt((new Date).getTime()/(a||1))},drop:{},delay:{},validate:{},canvas:{},focus:function(a){if(a){var c,f=a.nodeName;try{a.focus();if(f=="INPUT"||f=="TEXTAREA"){c=a.value.length;MI.selectTxt(a,c,c,c)}}catch(b){}}},blur:function(){this.blur()},click:function(){return false},cancelBubble:function(a){UI.E(a).stop()},hideFocus:function(){UI.A(this,"hideFocus","true");this.onmouseover=null},boss:null,ajaxTimes:0,talkNew:[],talkMore:[],host:"",hostType:0,crs:[],lazy:{},quickLogin:null,json:function(a){a=UI.json(a);a.result==-1E3?MI.user.fun.apiNoMove=1:a.result==-1&&MI.quickLogin&&MI.quickLogin();return a},music:{info:"",state:null,box:""},tmpl:m,selectTxt:function(a,c,f){if(document.createRange)a.setSelectionRange(c,f);else{a=a.createTextRange();a.collapse(1);a.moveStart("character",c);a.moveEnd("character",f-c);try{a.select()}catch(b){}}},getSelectTxt:function(a){var c=MI.cursorX(a),f=0,b="";if(document.selection){b=document.selection.createRange().text;f=c+b.length}else{f=a.selectionEnd;b=a.value.substring(c,f)}return{start:c,end:f,txt:b}},insertTxt:function(a,c,f,b){var e,j=false;b==void 0&&(b=0);a.focus();if(document.selection){e=document.selection.createRange();if(e.parentElement()===a){e.moveStart("character",-b);e.text=c;j=true}}if(!j){e=a.value;cursor=f+c.length-b;a.value=e.substring(0,f-b)+c+e.substring(f,e.length);MI.selectTxt(a,cursor,cursor,cursor)}},cursorX:function(a){if(document.selection){var c=document.selection.createRange(),f=0;c.moveStart("character",-a.value.length);a=c.text.split("");c=document.selection.createRange().text;return f=a[a.length-1].replace(/\r/g,"").length-c.length}return a.selectionStart},countNum:function(a,c,f){if(a&&a&&!a.innerHTML.hasString(_("超过"))){var b=a.innerHTML.replace(/\D/g,"")||0,b=f?MI.number.format(parseInt(b.replace(/,/g,""))+c):parseInt(b)+c;a.innerHTML=b<0?0:b}},countTxt:function(a,c,f,b){f==null&&(f=1);var e=MI.string.length(a),j,g=0,n=0,h=a.match(RegExp("((news|telnet|nttp|file|http|ftp|https)://){1}(([-A-Za-z0-9]+(\\.[-A-Za-z0-9]+)*(\\.[-A-Za-z]{2,5}))|([0-9]{1,3}(\\.[0-9]{1,3}){3}))(:[0-9]*)?(/[-A-Za-z0-9_\\$\\.\\+\\!\\*\\(\\),;:@&=\\?/~\\#\\%]*)*","gi"))||[];if(!f)e=a.length;if(b!=140||e<1E3){c&&UI.each(h,function(c){a=a.replace(c,"_");n++;j=c.length;j>256&&(g=g+(j-256))});c=UI.trim(a).replace(RegExp(_("#输入话题标题#"),"g"),"");e=Math.ceil((MI.string.length(c)+n*20+g)/2);f||(e=c.length+n*20+g)}return e},fC:{numFormat:[],num:[]},sFollowTip:o,proxyEvent:function(a,c,f,b){var e,j;if(a){if(!UI.A(a,"p_h")){UI.A(a,"p_h",p);u[p]={};p++}e=u[UI.A(a,"p_h")];if(!e[c]){e[c]=[];UI.proxyEvent(a,c,e[c],10)}j=e[c];UI.each(b,function(a){j.push([f(a),function(c,f,b,e){var r,j,q=a.split("|"),g=[];q.length==2&&(g=q[1].split("&"));q=q[0].split(",");if(!UI.proxyEventStop&&!UI.proxyEventCache[a]){UI.each(q,function(a){if(a=="*")r=1;else if(a){r=0;for(var c=e,q=a.split(" "),g=q.length-1,n=g+5;n>=0;n--){a=f[c];if(s(a,q[g])){j||(j=b[c]);g--}if(g<0||!a)break;c++}g<0&&(r=1)}if(r)return 1});UI.each(g,function(a){a=a.split("=");a[1]&&UI.A(c,a[0])==a[1]||a[1]==""&&UI.A(c,a[0])||(r=0)})}if(r&&j){j&&(r=j);UI.proxyEventCache[a]=1}return r}])})}},newCountNum:0,newCountFirst:1,newCount:function(a,c,f,b){MI.app({NewMsgBox:function(){MI._newCount&&MI._newCount(a,c,f,b)}})},cPlayer:{show:function(a,c,f){f=f||{};if(MI.api.type!==5)MI.app({"c/player/mi.cSlide.player":function(){MI.cPlayer.player&&MI.cPlayer.player.destroy();MI.cPlayer.player=new MI.CSlidePlayer;MI.cPlayer.player.config({comment:f.noComment?0:{opened:f.comment?1:0}});MI.cPlayer.player.create();if(f.onBeforePlay)f.onBeforePlay();MI.cPlayer.player.play(a,c);UI.EA(document.body,"keyup",MI.cPlayer.key)}});else{if(f.onBeforePlay)f.onBeforePlay();a=a[c]||a[0]||a;a.imgurl&&QZONE.FP.fullscreenDialog({src:"/qzone/app/controls/viewer/img.html#"+QZFL.util.genHttpParamString({url:a.imgurl+"/2000"})})}},key:function(a){if(UI.E(a).key==27){MI.cPlayer.player.close();UI.ER(document.body,"keyup",MI.cPlayer.key)}},load2Show:function(a,c,f){var b=[],e=function(a){UI.each(f,function(c){var f={imgurl:c};if(a){a=a.source||a;f={imgurl:c,tid:a.id,name:a.name,count:a.count||0,counts:a.counts,time:a.time,content:a.content,nick:a.nick,icon:a.icon,pic:a.pic}}b.push(f)});MI.cPlayer.show(b,c,{comment:false,onBeforePlay:function(){}})};MI.ajax({url:MI.url.getMsg,data:{ids:a,_r:MI.random},success:function(a){a&&(a=MI.json(a));a&&a.result===0&&a.info&&a.info.talk&&a.info.talk[0]?e(a.info.talk[0]):e()},fail:function(){e()}})}},bottomFix:0,bottom:function(a){if(!G){O=MI.bottom._lists||e(".main"+MI.layoutFix+" .LC");O.length||(O=e(".LC"));v=O[O.length-1];G=1}if(a&&!J){B=e("."+a)[0];J=1}if(b(a)){if(t=UI.parents(b(a),"main"+MI.layoutFix)[0])F=t.parentNode;if(v&&UI.height(b(a))){UI.C(v,"marginBottom",0);X();UI.C(v,"marginBottom",w<-1?-w+"px":"")}}else if(a){if(a&&B){if(t=UI.parents(B,"main"+MI.layoutFix)[0])F=t.parentNode;if(v&&UI.height(B)){UI.C(B,"marginBottom",0);X();UI.C(B,"marginBottom",w<-1?-w+"px":"")}}}else{b("pageNav")&&MI.bottom("pageNav");b("pageNavWrap")&&MI.bottom("pageNavWrap");window.MIApp&&MI.App.autoHeight()}},report:function(a){a&&a.match(/[^\d]/g)?jubao_user(a):jubao_msg(a)},relay:function(a,c,f,b,e,j){var g={},n;if(c)if(UI.isString(c))g.content=c;else if(UI.isElement(c))g.tweetDom=c;if(f)g.title=f;if(b)g.pref=b;if(e){g.config=e;n=e.type}if(j)g.focusLast=1;return MI.TalkBox.showBox(a,n||1,g)},relayMsg:function(a,c,f,b,e,j,g,n){f={title:f,talkToTip:b,originPos:e,pref:j,config:g,focusLast:n,hasOrigin:true};if(c)if(UI.isString(c))f.content=c;else if(UI.isElement(c))f.tweetDom=c;return MI.TalkBox.showBox(a,1,f)},comment:function(a,c,f,b,e){e?e.type=4:e={type:4};MI.relay(a,c,f,b,e)},picError:function(a){var c=a.src||"",f=/\/\/t[\d]/;(c.hasString("qlogo.cn")||c.hasString("qpic.cn"))&&c.match(f)&&MI.Bos({name:"btnOnerrorPic",sBak1:a.src,id:1210});a.onerror=null},picErrorReloaded:function(a){MI.Bos({name:"btnOnerrorPicReloaded",id:1210});UI.ER(UI.E(a).target,"load",MI.picErrorReloaded)},scrollHack:function(a){return a.getBoundingClientRect?0:UI.scrollY(a)-UI.scrollY()*(UI.B.safari&&!UI.B.ipad?2:1)},ajax:function(a,c){var f="_ajaxProxy_",b="_ajax_",e="_ajaxXhr_",j="http://"+document.location.host,g=j,n,h=UI.isObject(a);if(h){if(a.url){if(MI.user.fun.apiNoMove){n=/http:\/\/api1.t.qq.com/g;if(a.url.match(n))a.url=a.url.replace(n,MI.api.host)}(n=a.url.match(/(http:\/\/)+([^\/]+)/i))&&n[0]&&(g=n[0])}a.data=a.data||"";if(MI.api.type){n=MI.random();var k=MI.api.type,l=MI.api.host;if(UI.isObject(a.data)){if(!a.data.apiType){a.data.apiType=k;a.data.apiHost=l}a.type=="get"&&(a.data._r=n)}else if(UI.isString(a.data)){if(!a.data.hasString("apiType")){a.data=a.data+("&apiType="+k);a.data=a.data+("&apiHost="+l)}if(a.type=="get")a.data=a.data+("&_r="+n)}}if(g.hasString(j))return UI.ajax(a)}else UI.isString(a)&&(g="http://"+a.replace(b,""));j=g.replace("http://","");f=f+j;e=e+j;b=b+j;UI.isString(a)&&(b=a);MI[b]||(MI[b]=[]);if(MI[f])if(MI[e])if(MI[b].length&&!c)UI.each(MI[b],function(a){MI.ajax(a,true)});else{if(a){MI[b]=[];if(a.url&&a.url.hasString(g)){try{a.xhr=MI[f].contentWindow.xmlHttp()}catch(m){e=/api[\d].t.qq.com/g;if(a.url.match(e)){a.url=a.url.replace(e,"api.t.qq.com");MI.ajax(a,true)}return}a.refer=document.location.href}return UI.ajax(a)}}else h&&MI[b].push(a);else{h&&MI[b].push(a);h="ajaxProxy"+MI.random();MI[f]=UI.html('<iframe id="'+h+'" name="'+h+'" src="'+g+'/proxy.html" style="display:none" onload="setTimeout(function(){MI[\''+e+"'] = 1;MI.ajax('"+b+"');},50);\"></iframe>")[0];UI.ready(function(){UI.append(MI[f],document.body)})}return{abort:function(){for(var c=0,f=MI[b].length;c<f;c++)if(MI[b][c]==a){MI[b].splice(c,1);break}}}},layoutFix:"",api:K,version:V,versionSet:function(a){for(var c in a){var f=MI.version[c],b;if(c.slice(0,1)=="_"){f=c.slice(1);b=MI.swf[f];MI.swf[f]=b?b.replace(/_\w+/g,"_"+a[c]):"http://mat1.gtimg.com/www/mb/swf/"+f+"_"+a[c]+".swf"}else if(a[c].hasString(":"))MI.version[c]=a[c];else{if(f){b=f.split("_");if(b.length==3){f=b[0]+"_"+b[1];b=b[2]}else{f=b[0];b=b[1]}MI.version[c]=f+"_"+a[c]+"."+b.match(/\.\w+$/g)[0].slice(1)}else MI.version[c]="http://mat1.gtimg.com/www/mb/js/"+(c.hasString("/")?c:"mi."+c)+"_"+a[c]+".js";MI.version._js[c]=a[c]}f=MI.version[c];if(window.seajs&&f){b={};b[c]=f;seajs.config({alias:b})}}},app:function(a){for(var c in a)if(MI[c]){if(UI.isFunction(a[c]))a[c]()}else if(MI._appLoad[c])MI._appLoad[c].push(a[c]);else{MI._app[c]=a[c];MI._appLoad[c]=[];MI.appLoaded&&MI.appLoad(a)}},_appHost:["mat1.gtimg.com/www","mat1.t.qq.com/mb/mat1","www.qq.com/mb/mat1"],_appHostType:0,_app:{},_appLoad:{},_appLoading:{},appLoad:function(a){for(var c in a||MI._app)if(MI.version[c])if(MI[c]){if(MI._app[c]){if(UI.isFunction(MI._app[c]))MI._app[c]();MI._appLoad[c]=MI._app[c]=null}}else if(!MI._appLoading[c]){setTimeout(function(a){return function(){UI.getScript(MI.version[a],function(){MI.appLoadDo(a)},"utf-8");MI.api.type<1E3&&MI.version[a]==MI.version._auto[a]&&MI.Bos({name:"btnOnerrorJsFileAutoSuccess",sBak1:a,id:1210})}}(c),20);(a=MI.version[c.slice(0,1).toLocaleLowerCase()+c.slice(1)])&&a.match(/\.css$/g)&&UI.getCss(a);a=0;MI._appLoading[c]=1}MI.appLoaded=1},appLoadDo:function(a){if(MI[a]||UI[a]){if(UI.isFunction(MI._app[a]))MI._app[a]();MI._appLoad[a]&&UI.each(MI._appLoad[a],function(a){UI.isFunction(a)&&a()});MI._appLoad[a]=MI._app[a]=null;MI.api.type<1E3&&MI.version[a]==MI.version._auto[a]&&MI.Bos({name:"btnOnerrorJsFileAuto",sBak1:a,id:1210})}else if(g){var c=MI._appHost,f="",b="",e=MI.version[a],j,h,n={};if(e){if(e.hasString(c[0])){j=c[0];h=c[1];f="btnOnerrorJsFile";b="btnOnerrorJsFileReloadSuccess"}else if(e.hasString(c[1])){j=c[1];h=c[2];f="btnOnerrorJsFileReload";b="btnOnerrorJsFileReloadSuccess2"}else e.hasString(c[2])&&(f="btnOnerrorJsFile2");if(h){MI.version[a]=e.replace(j,h);n[a]=function(){MI.api.type<1E3&&MI.Bos({name:b,sBak1:MI.version[a],sBak2:MI.user.account||"",id:1210});if(MI.isS){var c=MI.json(MI.S("option_load_js"));c[a]=[MI.version._js[a],h];MI.S("option_load_js",UI.json2str(c))}};MI._appLoading[a]=0;MI._appLoad[a]&&MI._appLoad[a].push(n[a]);MI.appLoad(n)}}MI.api.type<1E3&&MI.Bos({name:f,sBak1:e,sBak2:MI.user.account||"",id:1210})}},appLoaded:0};o=function(){return"http://mat1.gtimg.com/www/mb/img/p1/head_normal_"};o={h:o(),h20:o()+"20.png",h30:o()+"30.png",h40:o()+"40.png",h50:o()+"50.png",h80:o()+"80.png",h100:o()+"100.png",h120:o()+"120.png",h180:o()+"180.png"};m.picSrc=o;MI.focusDropList=function(a,c){a.onfocus=function(){UI.show(c)}};MI.swf={};var m=MI,k="",N="http://api1.t.qq.com";MI.api.host&&(k=MI.api.host+MI.api.version);window.MIApiHost&&(k=MIApiHost,MI.api.host=MIApiHost);MI.user.fun.apiNoMove&&(N=k);location.href.match(/^https?:\/\/qun\.t\.qq\.com/i);setTimeout(function(){if(MI.user.fun.wideStyle)MI.url.userCard=MI.url.userCard.replace(k,N)},0);m.url={t:k+"/old/message.php",mySidebar:k+"/asyn/mysidebar.php",mySidebarNew:k+"/asyn/mysidebar_n_new.php",userSidebar:k+"/asyn/usersidebar.php",similarUser:k+"/asyn/samiliarRecStars.php",recommend:k+"/recommend.json?_v=1.0",recommendGet:k+"/recommend/get.json?",relations:k+"/relations?_v=1.0",recommendBlock:k+"/recommend/block.json?_v=1.0",relationsIdol:k+"/relations/idol_follow.json?_v=1.0",birthdayGet:k+"/recommend/friends_birthday.json",tag:k+"/asyn/tag_oper.php",topNavApp:k+"/asyn/topNavApp.php",topNavGroup:k+"/asyn/myWQNavJson.php",htmlContent:k+"/asyn/getHtmlContent.php",viewSet:k+"/asyn/myViewSetting.php",thirdappshield:k+"/asyn/thirdappshield.php",recommendAdd:k+"/recommend/add.json?",homeBitSet:k+"/asyn/homeBitSet.php",fansList:k+"/friends/follower.json",lastYearToday:k+"/msg/lytNextMsg.json",getWidget:k+"/side/get.json",missTalkGuide:k+"/missedSurprise",closeMissTalkGuide:k+"/mcop?type=1&op=1",getWidgetConfig:k+"/side/getAppConfig.json",setWidgetConfig:k+"/side/setAppConfig.json",delWidgetConfig:k+"/side/delAppConfig.json",addWidgetConfig:k+"/side/addAppConfig.json",list:k+"/asyn/mylist.php",listGet:k+"/asyn/getList.php",listAdd:k+"/asyn/createlist.php",listEdit:k+"/asyn/editlist.php",listDel:k+"/asyn/dellist.php",listFollow:k+"/asyn/list.php",listJoin:k+"/asyn/joinlist.php",listJoins:k+"/asyn/joinlists.php",listExit:k+"/asyn/exitlist.php",otherSave:k+"/asyn/others_save.php",listCnt:k+"/asyn/listcnt.php",validateVideo:k+"/asyn/validvideo.php",uploadSearchPic:k+"/asyn/searchpic.php",uploadUrlPic:"http://upload.t.qq.com/old/uploadextpic.php",uploadOrder:k+"/asyn/richMsgOp.php",musicPlayUrl:k+"/asyn/musicPlayUrl.php",vote:k+"/vote/vote.php",newvote:"http://vote.t.qq.com/createVote.php",talkPublish:k+"/old/publish.php",at:k+"/asyn/nicktips.php",topic:k+"/asyn/topicSuggest.php",relativeTopics:k+"/asyn/relativeTopics.php",topic:k+"/asyn/relativeTopics.php",notice:k+"/asyn/notice.php",MoodList:k+"/asyn/userEmotionStatistics.php",getAvatar:k+"/user/gets.json?_v=1.1",talkDel:k+"/old/delete.php",talkFavor:k+"/asyn/favoritemsg.php",talkUpTop:k+"/asyn/myTopTweet.php",talkShield:k+"/asyn/blockAtMsg.php",favGroup:k+"/asyn/favoritemsggroup.php",newCount:"http://message.t.qq.com/newMsgCount.php",newly:k+"/asyn/home.php",relayList:k+"/old/message_relay_frame.php",relayListAt:k+"/asyn/atMessageFrame.php",relayListSecond:k+"/old/message_relay_second.php",urlPreview:k+"/asyn/urlpreview.php",praiseReply:k+"/asyn/praiseReply.php",shareQzone:k+"/share/shareQzone.php",shareMail:k+"/mail/mailShare.php",shareMailActive:k+"/mail/mailActive.php",shareMailList:k+"/mail/mailist.php",shareQQ:k+"/share/shareMsg.php",shareQQList:k+"/share/qqList.php",translate:k+"/asyn/translate.php",urlDetail:k+"/asyn/urldetail.php",reportSpam:k+"/asyn/reportSpam.php",reportRead:k+"/report",readList:k+"/asyn/getUserMiniList.php",delReadList:k+"/asyn/delMiniUser.php",like:k+"/msg/setLike.php",allMyList:k+"/asyn/allmylist.php",qunList:k+"/asyn/myWQjson.php",mySidebar:k+"/asyn/mysidebar.php",myAtSet:k+"/asyn/myAtSettingSave.php",inboxSend:k+"/inbox/send.php",historyFace:k+"/old/historyFace.php",syncQzoneSet:k+"/asyn/userSyncSetting.php",userBit:k+"/asyn/userBitAttrSave.php",userAttr:k+"/asyn/userAttrSave.php",userRelation:N+"/asyn/userRelation.php",follow:k+"/old/follow.php",unfollow:k+"/old/unfollow.php",sFollow:k+"/asyn/group_oper.php",block:k+"/asyn/block.php",unblock:k+"/asyn/unblock.php",bkName:k+"/asyn/bkName_oper.php",topicFollow:k+"/asyn/topic.php",searchFeed:k+"/asyn/messageSearch.php",signList:k+"/asyn/signList.php",friendSigns:k+"/asyn/friendSigns.php",topicInfo:k+"/asyn/topicInfo.php",medal:k+"/asyn/medalpoint.php",shop:k+"/asyn/shoppoint.php",medals:k+"/medal/list.json",searchList:k+"/asyn/searchBoxList.php",userCard:k+"/asyn/userCard.php",uRela:k+"/recommend/same_listener.php",message:k+"/messages/send.php",comm:k+"/asyn/comm.php",urlDetail:k+"/asyn/urldetail.php",smartBox:k+"/asyn/messagetips.php",reportSpam:k+"/asyn/reportSpam.php",chatStat:k+"/chat/updateChatStat.php",recommendStat:k+"/asyn/recommendStat.php",userTips:k+"/asyn/userTips.php",taskUrl:k+"/asyn/taskInfo.php",taskSubscribe:k+"/asyn/taskSubscribe",userAttrSave:k+"/asyn/userAttrSave.php",myViewSettingSave:k+"/asyn/myViewSettingSave.php",ajaxTips:k+"/asyn/getExtTipsInfo.php",userFriends:k+"/asyn/userFriends.json",getPresentInfo:k+"/asyn/getPresentInfo.php",topMenuApps:k+"/asyn/topMenuApps.php",topMenuWQ:k+"/asyn/topMenuWQ.php",micrTpcTl:k+"/mictopic/getMicTopic.php",micrTpcCate:k+"/mictopic/getMicCategory.php",micrTpcList:k+"/mictopic/getMicCategoryTopic.php",micrTpcCollect:k+"/mictopic/collectMessage.php",micrTpcTl2:k+"/asyn/subjectOperation.php",rtPicMsgs:k+"/asyn/messageRtpic.php",getMsg:k+"/msg/getmsg.php",updateTips:N+"/asyn/updateTips.php",exceptionShow:k+"/asyn/exceptionShow.php",getPRCode:k+"/asyn/getPRCode.php",killnoreply:"http://p.t.qq.com/asyn/killnoreply.php",applyDownload:"http://file.t.qq.com/air/applyDownload.php",applyDownloadXF:"http://file.t.qq.com/air/offline_linkinfo.php",olympicCollect:"http://c.t.qq.com/asyn/selectedPersonalCategoryInfo.php",collectMessage:"http://c.t.qq.com/asyn/selectedPersonalMessage.php",uploadGrabPic:"http://upload.t.qq.com/asyn/uploadpicCommon.php",uploadPic:"/asyn/uploadpic.php"};MI.S=function(a,c){try{if(window.localStorage)if(c!=void 0)localStorage[a]=c;else return localStorage[a]||"";else if(UI.B.ie){if(!MI.S._body){MI.S._body=UI.html('<input style="display:none;behavior:url(#default#userData)" id="usersData">')[0];document.body.appendChild(MI.S._body)}var f=MI.S._body;try{f.load("oXMLBranch")}catch(b){}if(c!=void 0){c==""?f.removeAttribute(a):UI.A(f,a,c);f.save("oXMLBranch")}else return UI.A(f,a)||""}}catch(e){if(!MI.S.hasClear){MI.Bos({name:"btnStorageFull",id:1210});MI.S.clear()}}return""};MI.isS=1;MI.S.clear=function(){var a=/^draft|top|time|option|tips|follow/,c=window.localStorage;if(c)try{for(var f in c)if(!f.match(a)){c[f]="";c.removeItem(f)}}catch(b){}else if(UI.B.ie){a=MI.S._body;c=new Date;c.setSeconds(c.getSeconds()-1);a.expires=c.toUTCString();try{a.save("oXMLBranch");MI.Bos({name:"btnStorageClear",id:1210})}catch(e){}}MI.S.hasClear=1};MI.pageSpeed=function(){UI.EA(window,"load",MI.pageSpeedDo)};MI.pageSpeedDo=function(){if(window.QosS){var a=QosS.t;a[5]=+new Date;MI.Speed(QosS.site,0.1,a[1]-a[0],a[5]-a[0],a[2]-a[0],a[3]-a[0],a[4]-a[0])}};MI.videoThumb=function(a){a.src="http://mat1.gtimg.com/www/mb/images/vNoThumbs.jpg"};var m=MI,T=function(a,c){var f=L[c],b={};b.height=f.width/a.width*a.height;if(b.height<f.height)b.width=f.width;else{b.height=f.height;b.width=f.height/a.height*a.width}b.id=f.width;return b},L=[{id:60,width:60,height:60},{id:80,width:80,height:80},{id:120,width:120,height:120},{id:160,width:160,height:150},{id:220,width:220,height:999999},{id:240,width:240,height:320},{id:320,width:320,height:480},{id:460,width:460,height:999999},{id:2E3,width:2E3,height:999999}],Q=function(a,c){a.height=a.height*c/a.width;a.width=c;return a},U=function(a,c){a.width=a.width*c/a.height;a.height=c;return a},da=function(a){if(!a)return null;var a=a.match(/(fitfill|fitbound|max|mode),([-\d]+)x?([-\d]+)?/),c={};if(!a)return null;var f=parseInt(a[2],10),b=parseInt(a[3],10);if(a[1]!=="mode"&&(isNaN(f)||isNaN(b)))return null;f==-1&&(f=999999);b==-1&&(b=999999);if(a[1]!=="mode"){c.w=f;c.h=b}else c.mode=f;c.key=a[1];return c},S;S=function(a,c,f){var b,f=f||{};f.fitmode=f.fitmode==="fitbound"?"fitbound":"fitfill";f.mode=f.mode||5;f.id=f.id||120;f.max=f.max||{w:999,h:2E3};c.width=c.width||c.w;c.height=c.height||c.h;a.width=a.width||a.w;a.height=a.height||a.h;switch(f.fitmode){case "fitbound":b={};var e=c.width>c.height?"width":"height",j;j=0;for(len=L.length;j<len;j++){b=T(c,j);if(b[e]>=a[e]*0.9)break}if(j==len){b.width=c.width;b.height=c.height;b.id=L[--j].id}if(e=="width"){Q(b,a.width);b.benchmark="height"}else{U(b,a.height);b.benchmark="width"}c=b;f.mode=5;break;default:b=c.width/c.height;e={};j=0;for(len=L.length;j<len;j++){e=T(c,j);if(e.width>=a.width&&e.height>=a.height*0.9)break;if(e.width>=a.width*0.9&&e.height>=a.height)break}if(j===len){e.width=c.width;e.height=c.height;e.id=L[--j].id}if(b>=1){U(e,a.height);e.width<a.width&&Q(e,a.width);e.benchmark="height"}else{Q(e,a.width);e.height<a.height&&Q(e,a.height);e.benchmark="width"}c=e}if(f.max){b=f.max;b.width=b.width||b.w;b.height=b.height||b.h;c.benchmark==="width"?c.height>b.h&&U(c,b.h):c.width>b.w&&Q(c,b.w)}b=(b=f.mode)?b>0&&b<10?b:5:5;b--;f=b%3;b=(b-f)/3;f=f==0?0:f==1?-(c.width-a.width)/2:-(c.width-a.width);a=b==0?0:b==1?-(c.height-a.height)/2:-(c.height-a.height);c.left=f;c.top=a;c.w=c.width;c.h=c.height;c.l=c.left;c.t=c.top;c.css="position:relative;width:"+c.w+"px;height:"+c.h+"px;left:"+c.l+"px;top:"+c.t+"px";return c};S.limits=L;S.fitWidth=Q;S.fitHeight=U;S.calcByImg=function(a){var c;if(c=UI.A(a,"resizeto")){c=c.split(";");var f={},b;for(i=0;i<c.length;++i)(b=da(c[i]))&&(f[b.key]=b);c=f}else c=null;f=c.fitfill||c.fitbound;b=a.src.match(/\/(\d+)$/);var e={w:0,h:0},j;if(b){b=parseInt(b[1],10);for(e=0;e<L.length;++e)if(L[e].id==b){j=L[e];break}a.style.cssText="width:auto;height:auto;padding:0";a={w:a.naturalWidth||a.width,h:a.naturalHeight||a.height};b=Q(a,j.w);b.h>j.h&&(b=U(a,j.h));e=b}return S(f,e,c)};m.calcImgInfo=S;MI.Crs=function(a,c){function b(a){var c=UI.A(a,n)||"",f=MI.Crs.iconPic&&c.hasString("mblogpic")&&!UI.hasClass(a,"noIconPic"),j;setTimeout(function(){if(a.parentNode){var b=e(a.parentNode,".preview")[0];if(f){var r=c.match(/\w{10,30}/g)||["NOMD5"];if(MI.user.fun.mergePic&&MI.Crs.iconPic.hasString(r[0])&&!UI.A(a,"show")){c=MI.Crs.iconPicUrl;UI.addClass(a.parentNode.parentNode.parentNode,"iconPic");j=true}else{b&&setTimeout(function(){UI.remove(b)},50);MI.Crs.iconPic=MI.Crs.iconPic+c}}if(!j&&b&&MI.Crs.autoExpandPic){if(a.parentNode&&a.parentNode.onclick)a.parentNode.onclick()}else if(b&&MI.user.fun.autoPic)if(r=UI.A(b,"crs")){if(!f){UI.A(b,"src",r);UI.A(b,"crs","")}MI.Crs.preLoad(r)}if(UI.hasClass(a.parentNode,"vThumbs")){var r=a.parentNode.parentNode,g,q;if(MI.user.fun.mergePic&&MI.Crs.iconPic.hasString(c)&&!UI.A(a,"show")){g=e(r,".vSimple")[0];q=e(r,".vThumbs")[0];e(q,"img");UI.hide(q);g.style.display="inline";r.onmouseover=function(){q.style.display="inline";UI.addClass(this,"hover")};r.onmouseout=function(){UI.hide(q);UI.removeClass(this,"hover")};(r=UI.parents(a,"mediaWrap")[0])&&UI.addClass(r,"iconPic")}else MI.Crs.iconPic=MI.Crs.iconPic+c}UI.A(a,"resizeto")&&UI.EA(a,"load",function(){MI.Crs.onLoadResize(a)});if(c)a.src=c;a.style.display="inline";UI.removeClass(a,"loading")}},k);UI.removeClass(a,n)}var r,g=UI.scrollY(),j=g+UI.windowHeight()*1.5,h=g-100,n="crs",k=0,l=0,y=5;MI.Crs.y&&(j=j+MI.Crs.y);if(a){r=e(c,"."+n);if(!c)MI.crs=r}MI.Crs._body||UI.ready(function(){MI.Crs._body=UI.html('<div style="display:none"></div>')[0];UI.append(MI.Crs._body,document.body)});UI.each(r||MI.crs,function(a){a.onerror=function(){MI.picError(this)};if(!l&&UI.hasClass(a,n)&&a.parentNode){y--;if(y>=0)b(a);else if(c){y=5;b(a)}else{var e=UI.getY(a.parentNode)||UI.getY(a.parentNode.parentNode);if(e&&e<j&&e>h){y=5;b(a)}!MI.Crs.less&&(e&&e>j)&&(l=1)}k=k+2}});clearTimeout(MI.delay.resetCrs);MI.delay.resetCrs=setTimeout(function(){MI.crs=e("."+n)},400)};MI.Crs.autoExpandPic=!1;MI.Crs.iconPic="x";MI.Crs.iconPicUrl="http://mat1.gtimg.com/www/mb/images/"+("en_US"==window.MILang?"en/":"")+"vT.png";MI.Crs.disabled=0;MI.Crs.less=0;MI.Crs.preview=[];MI.Crs.preLoad=function(a,c){if(MI.Crs.preview.length>=(c||5)){var b=[];b.push("<div>");UI.each(MI.Crs.preview,function(a){if(a){b.push('<img src="'+a.replace(/[^\/]+$/g,"460")+'" onerror="MI.picError(this)" />');MI.Bos("btnPicBigPreload","",1E-4)}});b.push("</div>");setTimeout(function(){UI.append(UI.html(b.join(""))[0],MI.Crs._body)},500);MI.Crs.preview=[]}else{MI.Crs.preview.push(a);clearTimeout(MI.Crs.preDelay);MI.Crs.preDelay=setTimeout(function(){MI.Crs.preLoad("",1)},3E3)}};MI.Crs.onLoadResize=function(a){var c;c=a?UI.isElement(a)?a:UI.E(a).target:this;(a=UI.A(c,"onloadState"))||(a=0);a==0&&setTimeout(function(){var a=parseInt(UI.C(c,"width"),10)||c.offsetWidth,b=parseInt(UI.C(c,"height"),10)||c.offsetHeight,e={};if(UI.B.ie?c.complete:a>0&&b>0){UI.A(c,"onloadState",1);if(UI.A(c,"resizeto")){a=e=MI.calcImgInfo.calcByImg(c);if(b=c.src.match(/\/(\d+)$/)){b=parseInt(b[1],10);if(b!==a.id)c.src=c.src.replace(/\/\d+$/,"/"+a.id);c.style.cssText=["position:relative;width:",a.w,"px;height:",a.h,"px;left:",a.l,"px;top:",a.t,"px"].join("")}UI.A(c,"resizeto","")}}},0)};MI.Tips=function(){};MI.Tips.prototype={txt:"",delay:0,delayOut:0,_body:null,_bodyMouseover:function(){UI.show(this._body);clearTimeout(this.delayOut)},_bodyMouseout:function(){var a=this;clearTimeout(a.delay);a.delayOut=setTimeout(function(){a.hide()},150)},create:function(){if(!this._body){this._body=UI.html('<div class="cmtTip uc_hand_up"><div class="cmtTipCont"></div><div class="cmtTipArrow"><b class="caret_out"></b><b class="caret_in"></b></div></div>')[0];this._cont=this._body.firstChild;this._arrow=this._body.lastChild;UI.append(this._body,document.body);UI.EA(this._body,"mouseover",UI.bind(this._bodyMouseover,this,true));UI.EA(this._body,"mouseout",UI.bind(this._bodyMouseout,this,true))}},build:function(a){var c=this;a.area=a.area||document.body;MI.proxyEvent(a.area,"mouseover",function(){return function(){clearTimeout(c.delayOut);var b=this;if(UI.A(b,"title")){UI.A(b,"titleName",UI.A(b,"title"));b.title=""}c.delay=setTimeout(function(){c.show(b,a.txt);UI.C(c._cont,"width",a.width?a.width+"px":"")},150)}},[a.target]);MI.proxyEvent(a.area,"mouseout",function(){return function(){clearTimeout(c.delay);c.delayOut=setTimeout(function(){c.hide()},100)}},[a.target]);a.click&&MI.proxyEvent(a.area,"click",function(){return function(){a.click.apply(this)}},[a.target])},show:function(a,c){this.create();UI.hide(this._arrow);this._cont.style.cssText="";if(UI.isString(c)){this._cont.innerHTML=c;UI.show(this._body);this.position(a)}else c.call(a,this);this.display=1},position:function(a){var c=this._body,b=UI.getX(a),e=UI.getY(a),g=UI.height(a),j=UI.width(c),h=UI.windowWidth(),n="_up",k=UI.scrollY(),a=MI.scrollHack(a);b+j>h&&(b=h-j);c.style.cssText=c.style.cssText+(";top:"+(e+g-a+5)+"px;left:"+(b-20)+"px");b=UI.height(c);if(b+UI.getY(c)>k+UI.windowHeight()){c.style.top=e-b-5-a+"px";n="_down"}c.className=c.className.replace(/_[updown]+/g,n)},hide:function(){if(this.display){if(MI.Tips.xhr){MI.Tips.xhr.abort();MI.Tips.xhr=null}UI.hide(this._body);this._body.style.left="-999px";this.display=0}}};MI.Tips.txt=[_("这条消息来自手机微博。")+_("<br>想要成为微博手机达人？")+_("点")+'<a href="http://t.qq.com/client.php?t=mobile" onclick="MI.Bos(\'btnPhoneIconTip\')" target="_blank" class="ulink">'+_("这里")+"</a>"];MI.Tips.url={};MI.Uin=function(){var a=UI.trim(UI.cookie("p_luin")||UI.cookie("uin")||UI.cookie("luin")||"");return Number(a.replace(/o/g,""))};MI.Pic=function(a,c){a.src=MI.picSrc.h+(c?c:50)+".png"};MI.Load=function(a,c,f,g){function q(a,c){var f=b(a);if(f){var g=f.parentNode,r=e(g,"h3 .btn")[0]||UI.DC("a");UI.hasClass(g,k);a=="star"&&MI.user.fun.widgetAdmin&&(c='<div class="sc_cnt_rmdfollow">'+c+"</div>");if(f.innerHTML==""||l)f.innerHTML=c;if(a=="medaltips")MI.app({Sidebar:function(){MI.Sidebar.medalShow(c)}});else if(a=="taskDegree"){var q=b("taskDegree");if(q){q.innerHTML=c;UI.each(e(q,"a"),function(a){a.onclick=function(){MI.Bos("btn_openTask_Degree");MI.app({Task:function(){MI.Task.build()}});return false}});UI.show(q)}}UI.removeClass(g,k);r.title=j;UI.evalScript(c);UI.removeClass(r,n);MI.app({Base:function(){if(a=="recommend"||a=="star"||a=="citylife"){MI.Card.build(f,".userPic img",3);MI.Card.build(f,".knownInfo .BossHref,.kRelaBox a",MI.hostType===3?3:2)}else a=="appRecommend"&&MI.Card.build(f,".knownInfo .rela_info a",MI.hostType===3?3:2)}})}}var j=_("收起"),h=_("展开"),n="loading",k="fold",l,y,m,p,o;if(UI.isArray(a)&&(a.length||MI.user.fun.widgetAdmin)){UI.each(a,function(a){(a=b(a))&&(e(a.parentNode,"h3 .btn")[0]||UI.DC("a"))});y=+new Date;var s=function(c){if(c.result==0){UI.each(a,function(a,b){var e=c.info[f[b]];if(e)try{q(a,e)}catch(j){}});MI.Load.bottom()}UI.each(a,function(a){if(a=b(a)){a=e(a.parentNode,"h3 .btn")[0];UI.removeClass(a,n)}});if(c.result==0&&MI.user.fun.widgetAdmin)for(var j in c.info){var g=c.info[j];if(g)if(j.hasString("app_")){setTimeout(function(a,c){return function(){MI.Load.widget.show(a,c)}}(j,g),MI.Load.widget.delayNum);MI.Load.widget.delayNum=MI.Load.widget.delayNum+(UI.B.ie?50:10)}else q(j,g)}};UI.isObject(c)?s(c):MI.ajax({url:c,type:"get",data:"t="+f.join(","),success:function(a){m=+new Date-y;a=MI.json(a);s(a);p=+new Date-y;setTimeout(function(){o=+new Date-y;MI.Speed("t_asyn_sidebar",0.1,m,p,o)},0)}})}else{var u=b(a);if(u){var v=u.parentNode,t=e(v,"h3 .btn")[0]||UI.DC("a"),w=UI.hasClass(v,k);t.title=w?j:h;if(UI.A(u,"refresh")){l=1;MI.Bos("btnRefresh"+f)}if(UI.hasClass(t,n))return;if(u.innerHTML==""||l){l||UI.addClass(t,n);y=+new Date;MI.ajax({url:c,type:"get",data:"t="+f,success:function(c){m=+new Date-y;c=MI.json(c);if(c.result==0){q(a,c.info[f]);MI.Load.bottom()}UI.removeClass(t,n);UI.A(u,"refresh","");p=+new Date-y;setTimeout(function(){o=+new Date-y;MI.Speed("t_asyn_sidebar",0.1,m,p,o)},0)}})}else UI.toggleClass(v,k)}MI.Load.bottom();try{t.blur()}catch(x){}if(!l&&MI.Load.id[f]){MI.ajax({url:MI.url.userBit,data:{t:MI.Load.id[f],v:w?0:1}});g!=0&&MI.Bos("btn"+(w?"Un":"")+"Fold"+f)}}};MI.Load.widget={index:0,time:0,delay:1,delayNum:50,data:[],delayShow:function(){var a=MI.Load.widget;a.delay=0;UI.linkEvent.remove("windowScroll",a.delayShow);if(a.data.length){UI.each(a.data,function(c){a.show(c[0],c[1])});a.data=[]}MI.app({Wide:function(){MI.Widget.widgetFloat()}})},create:function(a,c,b){c.innerHTML=b;c.id=a;if(a=="app_recStars")if(a=e(c,".SC_bd")[0])a.id="star";UI.evalScript(b);MI.Load.bottom()},show:function(a,c){var f=this;if(!f.time)f.time=+new Date;if(f.delay&&(f.index>4&&a)&&UI.height(f._wrap)>UI.scrollY()+UI.windowHeight()-200)f.data.push([a,c]);else{if(!f._body){f._wrap=b("widgetWrap");if(!f._wrap)return;f._body=f._wrap.childNodes;setTimeout(function(){UI.linkEvent.add("windowScroll",f.delayShow)},1E3);MI.app({Wide:function(){MI.Widget.update()}})}var e=f._body[f.index];if(e){f.create(a,e,c);f.index++}}}};MI.Load.id={star:36,topic:37,tags:38,recommend:39,citylife:104};MI.Load.bottom=function(){clearTimeout(MI.Load.delay);MI.Load.delay=setTimeout(function(){MI.talkList&&MI.talkList.bottom();MI.bottom();MI.bottom("pageNav")},50)};MI.TalkBox=function(a,c){if(this._body=UI.isString(a)?b(a):a){var f=this;f._txt=f.$("textarea")||f.$(".inputTxt");f._tip=f.$(".countTxt");f._guide=f.$("h2 em");f._tipBig=f.$(".talkSuc");f._btn=f.$(".sendBtn");f._num=[b("talkNum")];f._close=f.$(".close");f._addReply=f.$(".addReply");f._sendCnt=f.$(".sendCnt")||f._body;f.otherCheck=[];f.getOtherValue={};f.resetOtherValue=[];var e=function(){UI.ER(f._body,UI.B.ipad?"touchstart":"mouseover",e);UI.ER(f._txt,"focus",e);MI.app({TalkBoxRich:function(){f.addEvent()}})};UI.EA(f._body,UI.B.ipad?"touchstart":"mouseover",e);UI.EA(f._txt,"focus",e);UI.EA(f._txt,"click",function(){f.guideTextRemove()});MI.proxyEvent(f._body,"click",function(a){return function(c){var b=this;MI.app({TalkBoxRich:function(){f.events&&f.events[a]&&f.events[a].call(b,c,f)}})}},[".top .close",".creatNew",".btnASFeedback",".atSome",".btnTextToPic",".btnRealWord",".insertFace .txt,.ico_face",".atWen .txt",".addComt",".addReply",".sendBtn",".newFeel .txt",".newVote .txt",".newOrder .txt",".newGift .txt",".uploadFile .txt",".uploadVideo .txt",".uploadMusic .txt",".record .txt",".uploadPic .txt",".synchFrm .diary",".synchFrm .qq",".replayQzoneCheckbox",".autoBackspace",".uploadPicConfirm",".uploadPicCancel",".schBrace .txt",".btnMicoZt",".text2PicBtn a, .longWB .txt",".btnMicoZj",".moreBox .more"]);f._guide&&UI.ready(function(){if(UI.B.chrome&&UI.text(f._guide)=="来，说说你在做什么，想什么"){f._speech=UI.html('<input type="text" speech="speech" x-webkit-speech="x-webkit-speech" onclick="MI.Bos(\'btnSpeech\')" title="'+_("语音输入")+'" />')[0];f._speech.onwebkitspeechchange=function(){f.addTopic(this.value);this.value="";MI.Bos("btnSpeechOK")};UI.append(f._speech,f._guide)}f.guide=f._guide.innerHTML});f.guideTextValue=UI.trim(UI.A(f._txt,"guide")||"");f.guideTextTopic=f.guideTextValue.match(/#[^#]+#/g)||"";if(f.guideTextTopic){f.guideTextTopic=f.guideTextTopic[0];f.guideTextValue=f.guideTextValue.replace(f.guideTextTopic,"")}f.guideTextValue&&setTimeout(function(){f.guideTextAdd(f.guideTextValue)},200);f._txt.onfocus=function(){UI.removeClass(f._body,"condensed");UI.addClass(f._sendCnt,"focus");this.focused=1;UI.linkEvent("talkBoxFocus",f)};f._txt.onblur=function(){clearTimeout(f.delay.blur);f.delay.blur=setTimeout(function(){UI.removeClass(f._sendCnt,"focus");if(f.condensed&&!f._txt.value&&!f.hasMedia())f.delay.condensed=setTimeout(function(){UI.addClass(f._body,"condensed");setTimeout(function(){f.hideMedia()},0)},200);f.sending||f.countTxt()},200);this.focused=0;f.guideTextAdd(f.guideTextValue);UI.linkEvent("talkBoxBlur",f)};UI.ready(function(){setTimeout(function(){f._txt.blur();f.countTxt()},0)});f.iconPic=MI.user.fun.iconPic;if(c)for(var g in c)f[g]=c[g]}};MI.TalkBox.showDraft=function(a){if(a&&!UI.B.ipad){var c=MI.user.account,b="draft_"+c,g="draft_pic_"+c,q="draft_pics_"+c;if(a.autoSave&&MI.isS){if(!a._txt.value)a._txt.value=MI.S(b).replace(/^undefined|^Null/,"")||"";a.countTxt();if(UI.parseUrl().p>1){c=250;(b=a._body)&&(c=UI.getY(b)+UI.height(b));window.scrollTo(0,c)}else setTimeout(function(){if(!a._msgTo&&location.hash!="#M"&&UI.scrollY()<250&&a._txt.value)try{a.focus()}catch(c){}g=MI.json(MI.S(g));q=MI.json(MI.S(q)||"[]");if(g.result==0){a.pics=q;UI.fireEvent(e(a._body,".uploadPic .txt")[0],"click");a.addPic(g)}},500)}}};MI.TalkBox.showBox=function(a,c,b){var g,q,j=new MI.Reply,h=j.talkBox,n=b&&b.tweetDom,k,l,y,b=b||{};switch(c){case 0:g=b.title||_("来，说说你在做什么，想什么");c=null;break;case 1:g=b.title||_("转播原文，顺便说两句：");if(n&&UI.GC(n,".replyBox").length){q=MI.TalkList.getRelayOld(n);k=80}break;case 2:case 7:b.title&&(g=_(b.title));if(b.talkTo)h.talkTo=b.talkTo;else if(n){n=UI.GC(n,".userName strong a")[0];h.talkTo=MI.string.account(n.title||UI.A(n,"rel"))}if(c===7){h.topic="@"+h.talkTo+" ";h.txtMax=h.txtMax-h.topic.length}else{h.topic="";h.txtMax=MI.TalkBox.prototype.txtMax}break;case 4:g=b.title||_("评论原文：");if(n&&UI.GC(n,".replyBox").length){q=MI.TalkList.getRelayOld(n);k=80}break;default:return}b.hasOrigin&&(g='<h1 class="DmainTit">'+g+"</h1>");if(b.content){q=b.content;k=80}j.show({title:g,cont:q,height:k,type:c,talkId:a,doFocus:false,success:b.success||null});c=b.pref||"";j.talkBox.data?j.talkBox.data.pgv_ref=c:j.talkBox.data={pgv_ref:c};if(b.config)for(var m in b.config)j.talkBox[m]=b.config[m];b.focusLast?setTimeout(function(){MI.focus(h._txt)},200):setTimeout(function(){try{h._txt.focus();MI.selectTxt(h._txt,0,0,0);h.countTxt()}catch(a){}},200);if(b.hasOrigin){j._talkTo.innerHTML=b.talkToTip||" ";UI.addClass(j._talkTo,"c_tx5");j._talkTo.parentNode.style.paddingTop="10px";b=b.originPos||"down";if(b=="down"){l=UI.html('<ul class="LC LC_sc_app LC_sc_app_noHead  LC_sc_app_loading"></ul>')[0];UI.after(l,j._body);UI.before(UI.html('<div class="D_bor"></div>')[0],l)}else{l=UI.html('<ul class="LC LC_sc_app LC_sc_app_loading"></ul>')[0];UI.before(l,j._body);UI.after(UI.html('<div class="D_bor"></div>')[0],l)}y=function(){MI.dialog.show({title:g})};y();MI.ajax({url:"http://api.t.qq.com/asyn/messageHtmlById.php",data:{mid:a},success:function(a){a=MI.json(a);if(a.result==0){l.innerHTML=a.info;UI.removeClass(l,"LC_sc_app_loading");setTimeout(function(){UI.each(e(l,"a"),function(a){UI.A(a,"target","_blank")})},10);MI.Crs(1,l);y();new MI.TalkList(l,{viewRelayToMsg:1})}else UI.remove(l)}})}return j};var m=MI.TalkBox,o=MI.url.talkPublish,K=0,R,Y;try{Y=parent.source,R=top.document.location.hostname}catch(ia){}"web2.qq.com"==R||"web.qq.com"==R?K=1009:Y&&(K=Y);m.prototype={delay:{},delayTime:1500,delayVideo:null,delayVideoTime:null,url:o,event:function(a,c,b){var e=this;MI.proxyEvent(e._body,a,function(){return function(a){c.call(this,a,e)}},[b])},source:K,feelTip:1,txtTopic:_("#输入话题标题#"),txtKeyword:_("{输入搜索关键词}"),txtPic:_("#分享图片#"),txtVideo:"",txtMusic:_("#分享音乐#"),txtTip:{empty:_("请输入内容"),fail:_("发送失败,请重试"),repeat:_("请不要连续发表重复内容")},txtTipSend:_("广播中"),startTime:0,condensed:0,addCheck:null,addNum:1,autoHeight:0,autoSave:0,audioUpload:function(){var a="http://p.t.qq.com/uploadaudio.php",c=(window.screen.availHeight-30-320)/2,b=(window.screen.availWidth-10-594)/2;this.data&&this.data.wqid&&(a=a+"?qid="+this.data.wqid+"&zone="+this.data.cflag);window.open(a,"wbAudio","height=320,width=594,top="+c+",left="+b+",scrollbars=yes,resizable=yes");MI.Bos("btnAudioUpload")},guideTextKeep:1,guideTextAdd:function(a){if((this._txt.value==""||this._txt.value==a||this._txt.value==this.guideTextTopic)&&a){var c=this.guideTextTopic,b=MI.json(MI.S("option_topic_"+MI.user.account)),e;c&&b&&b[encodeURI(c)]&&(e=1);if(!e){this.guideText=a;UI.addClass(this._txt,"cNote");this._txt.value=this.guideTextValue}}},guideTextRemove:function(a){var c=this;if(c.guideText){if(a)c._txt.value="";else if(c._txt.value==c.guideText){a=c.guideText.match(/#[^#]+#/g);if(c.guideTextKeep){c._txt.value=c.guideTextTopic||c.guideTextValue;setTimeout(function(){c._txt.select()},0)}else{c._txt.value=a?a.join(""):"";c.focus()}}UI.removeClass(c._txt,"cNote");c.countTxt();c.guideText=null}},countUrl:1,txtMax:140,zhCount:1,countTxt:function(){var a=this,c=a._txt.value,b=a._autoBackspace,e,g;if(!a.tipNoChange){a.guideText&&c==a.guideText&&(c="");if((a.length=g=MI.countTxt(c,a.countUrl,a.zhCount,a.txtMax))||!a._tip.innerHTML.hasString(a.txtTip.empty)){if(g>this.txtMax){e='<em class="error">';a._btn.disable=1;b&&c.indexOf("||")===-1?UI.hide(b):UI.show(b)}else{e="<em>";b&&UI.hide(b);a._btn.disable=0}if(!a.isEmpty&&g==0)a._btn.disable=1;MI.user.fun.sendBtnDisabledOnNoText&&(g==0?UI.addClass(a._btn,"disabled"):UI.removeClass(a._btn,"disabled"));c=Math.abs(a.txtMax-g);g>this.txtMax?a.miniCount?a.showTip(_("{0}-{1}</em>",e,c)):a.showTip(_("超出{0}{1}</em>字",e,c)):a.miniCount?a.showTip(_("{0}{1}</em>",e,c)):a.showTip(_("还能输入{0}{1}</em>字",e,c));if(a._msgTo&&(a._msgTo.value==""||a._msgTo.error))a._btn.disable=1;if(g<=a.txtMax&&a.type==1&&a.boxType!="trans"){a._btn.disable=0;MI.user.fun.sendBtnDisabledOnNoText&&UI.removeClass(a._btn,"disabled")}if(a.autoHeight){clearTimeout(this.delay.height);this.delay.height=setTimeout(function(){UI.C(a._txt,"height","");UI.A(a._txt,"padding")||UI.A(a._txt,"padding",parseInt(UI.C(a._txt,"paddingTop"))+parseInt(UI.C(a._txt,"paddingBottom")));var c=a._txt.scrollHeight,b=a._txt.clientHeight,f=Number(UI.A(a._txt,"padding")),c=c>b?c:b;!isNaN(f)&&!UI.B.firefox&&(c=c-f);UI.B.ie&&(a.autoHeight>40&&c<38?c=37:a.autoHeight<=40&&c<=18&&(c=16));if(a.autoHeight>40&&c>=a.autoHeight)c=a.autoHeight;if(c>=136){c=136;UI.C(a._txt,"overflowY","auto")}else UI.C(a._txt,"overflowY","hidden");if(c){UI.C(a._txt,"height",c+"px");(f=UI.next(a._txt))&&UI.C(f,"height",c+"px")}},UI.B.ipad?800:100)}if(a.autoSave&&g<=this.txtMax&&MI.isS){clearTimeout(a.delay.save);a.delay.save=setTimeout(function(){a.save()},80)}if(MI.Text2Pic&&!a.type&&a.uploadCollection&&!UI.B.ipad){a.overFlow=g>this.txtMax;a._pic&&(a._pic.style.display!="none"&&!UI.hasClass(a._body,"dialogPics"))&&MI.Text2Pic.formTalk(a,g-this.txtMax>0&&!a.longWBModify)}a.countTxtCall&&a.countTxtCall()}}},focus:function(){this._txt&&MI.focus(this._txt)},guideReset:function(){},save:function(){var a=this._txt.value;if(!(this.guideText&&a!=this.guideText))try{var c=a.replace(RegExp(this.txtTopic,"g"),"").replace(RegExp(this.txtKeyword,"g"),"")||"";this.guideText&&c==this.guideText&&(c="");MI.S("draft_"+MI.user.account,c)}catch(b){}},showTip:function(a,c){c==2?UI.addClass(this._tip,"loading"):UI.removeClass(this._tip,"loading");this._tip.innerHTML=c==1?'<span class="error">'+a+"</span>":a},flashTip:function(){clearInterval(this.delay.flashTip);UI.C(this._tip,"opacity","0");this.delay.flashTip=UI.animate(this._tip,"opacity",1,0,0.1);clearTimeout(this.delay.condensed)},hideMedia:function(){this.upVideo&&this.upVideo.hide();this.upMusic&&this.upMusic.hide();this.hideVote&&this.hideVote();this.upPic&&this.upPic.hide();this.upOrder&&this.upOrder.hide();this.upRelTopic&&this.upRelTopic.hide&&this.upRelTopic.hide();this.upVote&&this.upVote.hide();this.guideTextRemove(true);clearTimeout(this.delay.condensed);UI.linkEvent("talkBoxHideMedia",this)},hasMedia:function(){return this._pic&&(UI.hasClass(this._pic,"disabled")||UI.hasClass(this._picAnchor,"disabled"))||this._music&&UI.hasClass(this._musicAnchor,"disabled")||this._video&&UI.hasClass(this._videoAnchor,"disabled")?true:false},hide:function(){UI.remove(this._body);this.hideCall&&this.hideCall();clearTimeout(this.delay.tip);UI.hide(this._tipBig);this.display=this.sending=0;UI.removeClass(this._btn,"btnNoStr")},hideCall:null,success:null,reset:function(){var a=this;UI.removeClass(a._btn,"btnNoStr");a._btn.disable=0;setTimeout(function(){a.countTxt()},500)},resetRtPic:function(a){var c=this;MI.app({TalkBoxRich:function(){c._resetRtPic(a)}})},data:{},send:function(){var a=this;MI.app({TalkBoxRich:function(){a._send()}})},countNum:function(a){if((!(a>0)||this.addNum)&&this._num&&this._num.length)for(var c=0,b=this._num.length;c<b;c++)MI.countNum(this._num[c],a)},addTopic:function(a){var c=1;a?c=0:a=this.txtTopic;try{this._txt.focus()}catch(b){}this.hideMedia();(!this._txt.value.hasString(this.txtTopic)||!c)&&MI.insertTxt(this._txt,a,MI.cursorX(this._txt));if(c){c=this._txt.value.replace(/\r/g,"").indexOf(a);c==-1&&(c=0);MI.selectTxt(this._txt,c+1,c+a.length-1,c)}this.countTxt()},addKeyword:function(a,c){var c=c||{},b=1;a?b=0:a=c.defaultTxt?c.defaultTxt:this.txtKeyword;try{this._txt.focus()}catch(e){}(!this._txt.value.hasString(a)||!b)&&MI.insertTxt(this._txt,a,MI.cursorX(this._txt));if(b){b=this._txt.value.replace(/\r/g,"").indexOf(a);b==-1&&(b=0);MI.selectTxt(this._txt,b+1,b+a.length-1,b)}this.countTxt()},goUser:function(a){MI.hostType==1?document.location.href=a:window.open(a)},addPic:function(a){var c=this;MI.app({TalkBoxRich:function(){c._addPic(a)}})},addMusic:function(a){var c=this;MI.app({TalkBoxRich:function(){c._addMusic(a)}})},getVideo:function(a){var c=this;MI.app({TalkBoxRich:function(){c._getVideo(a)}})},$:function(a){return e(this._body,a)[0]}};MI.TalkBox.captureEnable=function(){return UI.B.win&&(UI.B.ie||UI.B.chrome||UI.B.firefox)||UI.B.mac&&(UI.B.firefox||UI.B.chrome||UI.B.safari)};MI.TalkBox.cur=null;MI.TalkList=function(a,c){var f=this,g=b("moreList");f._body=UI.isString(a)?b(a):a;if(!f._body)return false;f._more=f._bottom=g?e(g,"a")[0]:UI.DC("a");f._new=b("talkNew");f._list=UI.children(f._body);g=function(a){return function(c){var b=this;MI.app({TalkListRich:function(){f.events&&f.events[a]&&f.events[a].call(b,c,UI.closest(b,"li,.talkListLi")||b,f)}})}};MI.proxyEvent(f._body,"click",g,[".relay",".comt",".reply",".comtOrg",".delBtn",".alarm",".view",".upTop",".shield",".fav.light",".fav",".upTop.light",".upTop",".shield.light",".shield",".privacyBtn",".selectCls .popupDropBtn",".replyMsg",".areaInfo a",".orderWrap",".time",".ico_shield",".eventPic",".medalMsgClickBtn",".tl_imgGroup_link img",".cap_panel",".msgCnt .ic_pic",".zfNum2",".at_stranger a",".at_detail a",".tl_prepic_lk",".readNum",".int_like",".picTools .btnMobile","a.detail",".shieldUser",".shieldFrom",".btn_trans"]);MI.proxyEvent(f._body,"mousedown",g,["li",".f"]);MI.proxyEvent(f._body,"mouseover",g,["li",".btn_trans",".msgCnt .ic_pic",".ico_shield",".pubInfo a .sico"]);MI.proxyEvent(f._body,"mouseout",g,["li",".btn_trans"]);setTimeout(function(){f.cacheLast();f.cacheFirst()},0);f.iconPic=MI.user.fun.iconPic;f.iconPic&&UI.addClass(f._body,"iconPic");f.useSidePanel=MI.user.fun.userSidePanel;f.tmplData={};if(c)for(var q in c)f[q]=c[q];UI.each(["replyBox","relayBox","comtBox","relayListBox"],function(a){f[a]=f[a]||{};if(f.isAt)f[a].isAt=f.isAt});if(f._more&&!UI.A(f._more,"load")){UI.A(f._more,"load","1");f._more.onmouseover=MI.hideFocus;UI.EA(f._more,"click",UI.bind(f._moreClick,f))}if(f._new&&!UI.A(f._new,"load")){UI.A(f._new,"load","1");UI.EA(f._new,"click",UI.bind(f._newClick,f));UI.linkEvent.add("windowScroll",function(a){if(f.news){var c=a.scrollY+a.windowHeight;UI.each(f._news,function(a){if(UI.hasClass(a,"newMsg")&&UI.getY(a)+UI.height(a)+70<c){UI.removeClass(a,"newMsg bg4 bor_bg5");f.news--}})}})}f.card();f.buildTips();setTimeout(function(){f.bottom();for(var a=0,c=f._list.length;a<c;a++)f.addEvent(f._list[a]);f.addFollowBtn(f._body)},0)};MI.TalkList.rtPics={};MI.TalkList.showPicPreview=function(a){var c=this;MI.app({TalkListRich:function(){c._showPicPreview(a)}})};MI.TalkList.getRelayOld=function(a,c,b){var g=c||UI.GC(a,".msgCnt")[0],c=UI.GC(a,".userName strong a")[0],c=MI.string.account(c.title||UI.A(c,"rel")),q,j="",h;g&&UI.GC(a,".replyBox").length===0&&(q=1);g=g.cloneNode(1);if(!q){UI.each(UI.GC(g,"em"),function(a){var c=UI.A(a,"rel");if(c)a.innerHTML=c});UI.each(UI.GC(g,"img"),function(a){var c=a.title;c&&UI.after(UI.html("<b>/"+c+"</b>")[0],a)});UI.each(UI.GC(g,".btn_trans"),function(a){UI.remove(a)});UI.each(e(g,"i.ic_pic"),function(a){var c=UI.A(a,"data-rpid"),b=UI.A(a,"data-rpurl");if(c.match(/^[1-9]$/)&&b){h=h||{};a.innerHTML=" [image"+c+"]";h[c]=b}});if(h)(a=a.id?a.id.match(/([0-9]{5,})($|\D)/):0)&&a[1]&&(MI.TalkList.rtPics[a[1]]=h);j=" || @"+c+": "+UI.text(g)}if(b){b._txt.value=j;try{b._txt.focus();MI.selectTxt(b._txt,0,0,0);b.countTxt()}catch(n){}}else return j};MI.TalkList.prototype={cur:null,curSource:null,isQun:0,_moreClick:function(a){this.more();UI.E(a).prevent()},_newClick:function(){var a=e(this._new,"strong")[0];if(a){this.newly();MI.Bos("btnkNew",parseInt(a.innerHTML))}return false},_tip:null,_news:[],news:0,hasBottom:1,type:0,apiType:0,tmpl:"",relay2Cur:0,relayAtCur:0,moreTimes:0,newlyUrl:MI.url.newly,refreshUrl:"",removeUrl:MI.url.talkDel,removeTip:_("确定删除这条广播？"),favorUrl:MI.url.talkFavor,shieldUrl:MI.url.talkShield,upTopUrl:MI.url.talkUpTop,unfavTip:_("确定删除这条收藏？"),unUpTopTip:_("确定删除这条置顶？"),unShieldTip:_("确定取消屏蔽这条信息？"),shieldTip:_("不再接收来自本条广播的<br>@提醒？"),xhr:{},last:{},iconPics:{},picsDelay:null,_iconPics:function(a){var c=this;if(!UI.parents(a,"tl_prepic_wp").length){var b=UI.html('<div class="tl_prepic_wp"><a href="#" class="tl_prepic_lk"><i class="ico_pics"></i>查看图片</a></div>')[0];UI.replace(b,a);UI.append(a,b);UI.hide(a);b=e(b,".tl_prepic_lk")[0];UI.EA(b,"mouseover",function(){c.picsDelay&&clearTimeout(c.picsDelay);c.picsDelay=setTimeout(function(){UI.show(a)},50)});UI.EA(b,"mouseout",function(){c.picsDelay&&clearTimeout(c.picsDelay);c.picsDelay=setTimeout(function(){UI.A(a,"show")||UI.hide(a)},200)});a.onmouseover=function(){c.picsDelay&&clearTimeout(c.picsDelay)};a.onmouseout=function(){c.picsDelay&&clearTimeout(c.picsDelay);c.picsDelay=setTimeout(function(){UI.A(a,"show")||UI.hide(a)},300)}}},first:{time:1},add:[],time:[],page:1,pageMode:function(a){var c=this;MI.user.fun.pageMode&&MI.app({TalkListRich:function(){c._pageMode(a)}})},lastVideo:null,lastMusic:null,musicState:0,musicPlayDetec:0,musicDelay:0,checkTalkId:function(){},bosHead:function(){MI.Bos("btnHead")},fav:function(a,c){this.remove(a,c)},upTop:function(a,c){this.remove(a,c)},unfav:function(a){var c=b(a);if(this.isQun==1){c=parseInt(UI.A(c,"wqid"));MI.Group.qid=c}this.confirm(a,2);MI.Bos("btnUnFav")},selectFav:function(a){MI.app({TalkListFav:function(){MI.favorites&&MI.favorites.showDrop(a)}});MI.Bos("btnSelectFav");return false},comtBoxList:1,replyCont:"",replyTarget:null,replyHide:function(){UI.removeClass(b(this.cur),"cur");UI.removeClass(b(this.cur),"hover");this.talkBox&&this.talkBox.hide();UI.linkEvent("MI.TalkList.resize")},relayListOption:null,relayListCreate:function(a,c){var a=a||"",f=this,g="_relayList"+a,q="_relayListLoad"+a,j="_relayListTips"+a,h="_relayListCont"+a,n=b(a),n=e(n,".relayList")[0];if(c&&n){f[g]=n;f[q]=e(n," .loading")[0];f[h]=e(n," .cont")[0]}else{f[g]=UI.html('<div class="relayList bgr3"><div class="top"><span class="left"><a href="#" class="vClose"><em></em>'+_("收起")+'</a></span><a class="w_close" href="#" title="'+_("点击关闭")+'"><b class="close">×</b></a></div><div class="loading">'+_("正在加载")+'...</div><div class="contTips"></div><div class="cont"></div></div>')[0];f[q]=e(f[g],".loading")[0];f[j]=e(f[g],".contTips")[0];f[h]=e(f[g],".cont")[0]}e(f["_relayList"+a],".w_close")[0].onclick=function(){var c=this;UI.B.ie&&UI.C(c,"left","9999px");setTimeout(function(){f.relayListHide(a);f.collapseInit();UI.C(c,"left","")},0);MI.Bos("btnRelayListClose");return false};var k=f[h];e(f[g],".left a")[0].onclick=function(){f.relayListHide(a);f.collapseInit();MI.Bos("btnRelayListUp");return false};k.ondblclick=function(){var c=0;UI.each(e(k,".pages a"),function(a){a.innerHTML.hasString(_("下一页"))&&(c=a)});if(c)c.onclick();else{f.relayListPosition();f.relayListHide(a);f.collapseInit()}MI.S("tips_relayList_"+MI.user.account,-1)};if(UI.B.ie){k.onmousedown=function(){k.onselectstart=null};k.onmouseup=function(){k.onselectstart=function(){return false}}}},relayListHide:function(a){var c=this["_relayList"+a]||this._relayList;if(c){UI.remove(c);if(UI.B.ie&&this["relayListBox_"+a]&&this["relayListBox_"+a]._body){if(!this._relayListHideContainer)this._relayListHideContainer=document.createElement("div");UI.append(this["relayListBox_"+a]._body,this._relayListHideContainer)}c.display=0;UI.removeClass(b(this.cur),"cur");UI.removeClass(b(this.cur),"hover");this.relay2Cur=this.relayAtCur=null;if(this.talkBox)this.talkBox._txt.value="";!this.relayListMulti&&this.focus();this.showComtReply(b(this.cur))}},getRelayOld:function(a,c,b){var g=UI.sortElement(e(a,c),c.match(/\w+/g))[0],q=e(a,".userName strong a,.userName strong span")[0]||e(a,"strong a,strong span")[0],j,c="@",h="",n,k;if(q)if(q.nodeName=="A"){q.href.split("/");j=MI.string.account(q.title||UI.A(q,"rel"))}else{j=UI.text(q).replace(/(@|\/)/g,"$1 ");c=""}if(g){e(a,".time").length==1&&!UI.hasClass(a,"subHover")&&(n=1);g=g.cloneNode(1);if(!n||!b){UI.each(e(g,"strong"),function(a){UI.remove(a)});UI.each(e(g,"em"),function(a){var c=UI.A(a,"rel");if(c)a.innerHTML=c});UI.each(e(g,"img"),function(a){var c=(UI.A(a,"k")||"")+a.title;c&&UI.after(UI.html("<b>/"+c+"</b>")[0],a)});UI.each(e(g,".btn_trans"),function(a){UI.remove(a)});UI.each(e(g,"i.ic_pic"),function(a){var c=UI.A(a,"data-rpid"),b=UI.A(a,"data-rpurl");if(c.match(/^[1-9]$/)&&b){k=k||{};a.innerHTML=" [image"+c+"]";k[c]=b}});if(k)(a=a.id?a.id.match(/([0-9]{5,})($|\D)/):0)&&a[1]&&(MI.TalkList.rtPics[a[1]]=k);h=" || "+c+j+": "+UI.text(g)}}else j&&(h=" || "+c+j+": ");if(b){b._txt.value=h;try{b._txt.focus();MI.selectTxt(b._txt,0,0,0);b.countTxt()}catch(l){}}else return h},updateRelayNum:function(a){if(this.type==1||this.type==2||this.type==4||this.notUpdateRelayNum||this.notUpdateComtNum)return false;var c=b(this.cur),a=a||this.talkBox.type,f;a==4||a==5?f=".comt":a==1&&(f=".relay");if(f&&c)if(a=e(c,f)[0]){UI.A(a,"num",1+parseInt(UI.A(a,"num")||0));if(MI.user.fun.newRelay2&&e(c,".replyBox")[0]){c=UI.A(a,"num")||0;f=a.title;if(c)a.innerHTML=a.innerHTML.replace(/[(]\d+[)]/g,"")+"("+c+")";if(f)a.title=f.replace(/\d+/g,c)}}},setData:function(a){if(!this.replyBox.data)this.replyBox.data=this.relayBox.data=this.comtBox.data=this.relayListBox.data={};for(var c in a)this.replyBox.data[c]=this.relayBox.data[c]=this.comtBox.data[c]=this.relayListBox.data[c]=a[c]},setArrow:function(a){if(a)a.style.cssText="left:"+(this.setArrow.x+3)+"px"},setArrowX:function(a,c){if(c=c.length==2?c[1]:c[0])this.setArrow.x=UI.getX(a)-UI.getX(c)-12+(UI.width(a)-24)/2},card:function(a){if(this.hideUserCard==1)return false;a=a||this._body;MI.app({Base:function(){MI.Card.build(a,".userPic img",MI.user.fun.wideStyle&&MI.user.fun.userSidePanel?2:1);MI.Card.build(a,".need-card,.msgBox strong a,.msgBox em a",2)}})},buildTips:function(a){var c=this,a=a||c._body;MI.app({Base:function(){MI.tips.build({area:a,target:".ico_phone",txt:MI.Tips.txt[0]});MI.tips.build({area:a,target:".url,.ico_video,.ico_vote",txt:c.urlTips,click:function(){MI.Bos("btnClickUrl")},width:MI.api.type==4?280:236});MI.tips.build({area:a,target:".tIcon.ico_gy",txt:c.gongyiTips,click:function(){MI.Bos("btnClickGongyi")}});MI.tips.build({area:a,target:".tIcon.myIcon",txt:c.removeIcon});MI.tips.build({area:a,target:".pubInfo .sico",txt:c.fromIcon})}})},addFollowBtn:function(a){var c=function(){setTimeout(function(){MI.FollowBtn.build(a,".userPic a");if(MI.boss==35||MI.boss==12||MI.boss==55){var c=MI.boss==35?79:MI.boss==12?80:81;MI.FollowBtn.followCall=function(){MI.feedBack({name:"timeline",id:1191,iPos:c,iBak1:3,sBak1:""})};MI.FollowBtn.unFollowCall=function(){MI.feedBack({name:"timeline",id:1191,iPos:c,iBak1:8,sBak1:""})}}},100)};if(a.nodeName=="LI")c();else{this.followBtn&&c();this.eventsCall&&this.eventsCall(a)}},iconPicToggle:function(){var a=this;MI.app({TalkListRich:function(){a._iconPicToggle()}})},event:function(a,c,b){var e=this;MI.proxyEvent(e._body,a,function(){return function(a){c.call(this,a,UI.closest(this,"li,.talkListLi")||this,e);a.prevent()}},[b])},addEvent:function(a){var c=this,b=a.id,g=e(a,".time"),h=e(a,"a")[0],j=e(a,".userPic img"),k=e(a,".mFun a")[0],n=e(a,".picBox"),l=e(a,".mediaWrap .videoBox"),m=e(a,".mod_tl_recom")[0],y=e(a,".replyBox");if(UI.A(a,"isPics")){var p=e(a,".zfNum")[0]||e(a,".relay")[0]||e(a,".left .time")[0];tweetId=(href=UI.A(p,"href"))&&href!="#"&&href.indexOf("#")<0&&href.match(/[^\/]+$/g)[0]||b;isReplay=y.length?1:0;(b=e(a,".tl_imgGroup")[0])&&(c.iconPics[tweetId]&&isReplay?c._iconPics(b):c.iconPics[tweetId]=b)}var o=function(b){UI.ER(a,UI.B.ipad?"touchstart":"mouseover",o);h&&UI.ER(h,"focus",o);MI.app({TalkListRich:function(){c._addEvent(a);b&&UI.isFunction(b)&&b()}})};UI.EA(a,UI.B.ipad?"touchstart":"mouseover",o);h&&UI.EA(h,"focus",o);a.nodeName!="LI"&&UI.addClass(a,"talkListLi");if(k)k.onclick=function(){o(function(){k.onclick()});return false};if(m){MI.FollowBtn.build(m,".msgBox .mod_tl_recom p a.BossHref","text",function(a){return a.parentNode},function(a){UI.hasClass(a,"addAttention")&&MI.Bos({name:"btnFollowBtnRecom",id:1191})});(m=e(m,".msgBox .mod_tl_recom .userPic a")[0])&&UI.A(m,"followBtn",1)}UI.each(j,function(a){a.onerror=function(){MI.picError(this)}});n&&MI.TalkList.picEvent(n);l&&MI.TalkList.videoEvent(l);c.eventCall&&c.eventCall(a);MI.app({Base:function(){UI.linkEvent("MI.TalkList.event",{target:a})}});j=0;for(n=g.length;j<n;j++){UI.A(g[j],"rel")||UI.A(g[j],"rel",UI.A(a,"rel"));l=UI.zoneDate(UI.A(g[j],"rel")+"000",8);g[j].title=UI.formatDate(l,_("yyyy年M月d日 hh:mm"));c.time.push(g[j])}},moreFun:function(a,c){var f=this;f._shareBtn?f._shareBtn!=a&&UI.removeClass(f._shareBtn,"mFunDis"):UI.EA(document.body,"click",function(){UI.removeClass(f._shareBtn,"mFunDis")});f._shareBtn=a;UI.addClass(a,"mFunDis");if(!UI.A(a,"event")){f.moreFunEvent(a,c);UI.A(a,"event",1)}var g=e(a,"a"),h=g.length;if(h){g=g[h-1];UI.hasClass(g,"detail")&&UI.removeClass(g,"line")}if(MI.user.fun.collect){if(g=e(a,".collect_pn")[0]){UI.removeClass(a,"mFunDis_o");UI.remove(g)}if(!e(a,".collect")[0]){g='<p><a class="collect" href="#">'+_("采集")+"</a></p>";g=UI.html(g)[0];g.onclick=function(){f.createCollect(b(c));return false};h=UI.parent(e(a,".fav")[0]);UI.before(g,h)}}},moreFunHide:function(){UI.removeClass(this._shareBtn,"mFunDis")},moreFunEvent:function(a,c){var b=e(a,".shareBtn a")[0];if(b)b.onclick=function(){MI.app({TalkListShare:function(){MI.TalkList.shareCollection.show(c)}});return false}},cacheLast:function(){var a=UI.children(this._body),c=a[a.length-1],b,e;if(c){e=UI.A(c,"fav");a=UI.A(c,"rel");b=UI.A(c,"tid")||c.id;c=UI.A(c,"shield");this.last={id:b,time:a,fav:e?e:0,shield:c?c:0};if(this.date)this.last.pubDate=UI.formatDate(UI.zoneDate(a+"000",8),"yyyy-MM-d")}},cacheFirst:function(){var a=UI.children(this._body)[0],c;if(a){c=UI.A(a,"rel");a=UI.A(a,"tid")||a.id;this.first={time:c,id:a}}},bottom:function(){if(this.hasBottom){var a=UI.parents(this._body,"main")[0],c,b,e;if(a&&this._more&&this._more.innerHTML){c=UI.next(a);b=a.parentNode;e;if(c){UI.C(this._body,"marginBottom",0);UI.C(a,"min-height",0);e=UI.height(a)-UI.height(b)-1;e=e+MI.bottomFix;UI.C(this._body,"marginBottom",e<-1?-e+"px":"");UI.C(a,"min-height",UI.height(c)+"px")}}}},updateTime:function(a){if(a){a=Number(a);MI.time=a;UI.each(this.time,function(a){var b;b=MI.time;var e=new Date,g=UI.A(a,"rel"),j=UI.zoneDate(g+"000",8),h=b-g,g=parseInt(h/60);parseInt(h/3600);var h=parseInt(h/86400),k=a.title.split(" ")[1];e.setTime(b+"000");if(b=g<=0?_("刚刚"):g<60?g>1?g+_('分钟前<i class="l"></i>'):g+_("分钟前"):g>59&&h==0?(e.getDate()==j.getDate()?_("今天"):_("昨天"))+" "+k:h==1&&e.getDate()-j.getDate()<2?_("昨天 ")+k:e.getFullYear()==j.getFullYear()?a.title.split(_("年"))[1]:a.title)a.innerHTML=b})}},hasNext:1,moreLoading:function(a){if(a){UI.removeClass(this._more,"loading c_tx5");UI.addClass(this._more,"c_tx2")}else{UI.addClass(this._more,"loading c_tx5");UI.removeClass(this._more,"c_tx2")}},more:function(a){var c=this;UI.children(c._body);var b;if(c.hasNext){b=c.last.fav?c.last.fav:c.last.shield?c.last.shield:c.last.time;b={time:b,page:c.page+1,id:c.last.id};var e=UI.A(c._more,"rel"),g,j,h,k;if(c.guest)b.u=c.guest;if(MI.Group&&typeof MI.Group.viewMode!="undefined")b.mode=MI.Group.viewMode;if(!c._more.sending){c.moreLoading();if(e){g=+new Date;MI.ajax({url:e,type:"get",data:b,timeout:3E4,fail:function(){c.moreLoading(1);c._more.sending=0},success:function(a){j=+new Date-g;MI.app({Tmpl:function(){if(!c.tmpl)c.tmpl=MI.tmpl.listAll;c.addMore(a)}});h=+new Date-g;setTimeout(function(){k=+new Date-g;MI.Speed("t_asyn_more",0.0050,j,h,k)},0)}});MI.Bos(a?"btnMoreAuto":"btnMore","",0.01)}}c._more.sending=1}},newly:function(){var a=this,b=a._new,f;f="";if(!b.sending)if(b.num>15||a.refresh){if(a.refreshUrl&&UI.isString(a.refreshUrl)){f=a.refreshUrl+(a.refreshUrl.hasString("?")?"":"?");if(MI.newCount.data)for(var g in MI.newCount.data)f=f+("&"+g+"="+MI.newCount.data[g])}document.location.href=UI.isString(a.refreshUrl)?f:"/"+MI.user.account}else{UI.addClass(b,"loading");if(a.pageModeCur&&a.pageModeCur!=1)UI.fireEvent(e(a._page,"a")[1],"click");else{if(f=e(a._new,"strong")[0])f.innerHTML="";f={time:a.first.time,id:a.first.id,p:2,type:1};if(MI.newCount.data)for(g in MI.newCount.data)f[g]=MI.newCount.data[g];a.xhr["new"]=MI.ajax({url:a.newlyUrl,type:"get",data:f,fail:function(){UI.removeClass(a._new,"loading");a._new.sending=0},success:function(b){a.addNewly(b);a._new.sending=0}})}}b.sending=1},addNewly:function(a){var c=this,f=c._new,g=UI.isString(a),h=g?MI.json(a):a;if(c.tmpl){c.newlyCall&&c.newlyCall(h);if(h.result==0){h.info.guest=c.guest;h.info.fav=0;h.info.shield=0;h.info.iconPic=c.iconPic;h.info.type=c.type;h.info.isReply=c.isReply;h.info.isMyLike=!!c.isMyLike;h.info.hasLike=!!c.hasLike;UI.each(c.tmplData,function(a,b){h.info[b]=a});if(!c.guest&&h.info.user!=MI.user.account){document.location.reload();return}UI.each(c.add,function(a){b(a)&&UI.remove(b(a))});var j,k=document.createDocumentFragment(),n=UI.html(UI.txTpl(c.tmpl,h.info).replace(/<li id="/gi,g?'<li class="bor2 newMsg bg4 bor_bg5" id="':'<li id="')),l=h.info.talk.length;if(l){c._newLine&&UI.removeClass(c._newLine,"pageLine");for(var m=0,y=n.length;m<y;m++){c.addEvent(n[m]);UI.append(n[m],k);if(m==y-1){c._newLine=n[m];UI.addClass(n[m],"pageLine")}}if(l>50)c._body.innerHTML="";j=c._news;m=0;for(y=j.length;m<y;m++)UI.removeClass(j[m],"newMsg bg4 bor_bg5");UI.prepend(k,c._body);c.addFollowBtn(n);c._news=e(c._body,".newMsg");c.news=c._news.length;UI.each(c.add,function(a){b(a)&&UI.removeClass(b(a),"newMsg bg4 bor_bg5")});c.cacheFirst();c.add=[];c._tip&&UI.hide(c._tip);c.updateTime(h.info.time);j="new";c.pv&&(j=j+("/"+c.pv));MI.PV(j);MI.Crs(1);if(g){MI.ajaxTimes++;MI.talkNew.push(a)}f&&f.num!=l&&MI.Bos("btnNewTalkNumError")}}if(f){UI.hide(f);f.num<=5&&MI.boss==11&&MI.app({Base:function(){MI.showGuessYourPrefer()}});UI.removeClass(f,"loading")}if(document.titleTmp)document.title=document.titleTmp;MI.newCountNum=0;c.bottom();UI.linkEvent("MI.TalkList.resize");UI.linkEvent("MI.TalkList.more",h)}else MI.app({Tmpl:function(){c.tmpl=MI.tmpl.listAll;c.addNewly(a)}})},addMore:function(a,b){var f=this,e=UI.isString(a),g=UI.children(f._body),g=g[g.length-1],j=e?MI.json(a):a;if(f.tmpl){f.pageModeShow&&f.pageModeShow(a);f.moreCall&&f.moreCall(j);if(j.result==0){if(!f.guest&&j.info.user!=MI.user.account){document.location.reload();return}j.info.guest=f.guest;j.info.fav=f.last.fav?1:0;j.info.iconPic=f.iconPic;j.info.type=f.type;j.info.shield=f.last.shield?1:0;j.info.pubDate=f.last.pubDate;j.info.isReply=f.isReply;j.info.isMyLike=!!f.isMyLike;j.info.hasLike=!!f.hasLike;UI.each(f.tmplData,function(a,b){j.info[b]=a});var h=document.createDocumentFragment(),k=UI.html(UI.txTpl(f.tmpl,j.info));if(j.info.talk.length){for(var l=0,m=k.length;l<m;l++)UI.append(k[l],h);setTimeout(function(){for(var a=0,b=k.length;a<b;a++)f.addEvent(k[a]);MI.Crs(1)},0);UI.append(h,f._body);f.addFollowBtn(k);UI.C(f._body,"marginBottom","");MI.dialog&&MI.dialog.display&&MI.dialog.resizeBg();if(!b){h="more";f.pv&&(h=h+("/"+f.pv));MI.api.type===5&&(h="mb/qzone/"+h);MI.PV(h)}if(e){MI.ajaxTimes++;MI.talkMore.push(a)}}if(j.info.hasNext==0||!j.info.talk.length){f._more&&UI.addClass(f._more.parentNode,"hide");f.hasNext=0}else{if(j.info.hasNext==1){f._more&&UI.removeClass(f._more.parentNode,"hide");f.hasNext=1}g&&UI.addClass(g,"pageLine");f.cacheLast()}f.updateTime(j.info.time);f.page++}if(!f.pageModeCur){f.moreTimes++;if(MI.user.fun.autoMoreContinue&&f.moreTimes>MI.autoMoreTimes)f.moreTimes=0}f.bottom();f.moreLoading(1);if(f._more)f._more.sending=0;UI.linkEvent("MI.TalkList.resize");UI.linkEvent("MI.TalkList.more",j)}else MI.app({Tmpl:function(){if(!f.tmpl)f.tmpl=MI.tmpl.listAll;f.addMore(a,b)}})},clear:function(a){var b=this.talkBox;MI.TalkList.musicStop&&MI.TalkList.musicStop();b&&b.hide();this.longWB={count:0};this._body.innerHTML=a||""}};MI.TalkList.cur=null;MI.TalkList.date=0;MI.TalkList.showEvent=function(a){if(a)a.style.cssText="display:block;_display:inline;"};MI.TalkList.videoEvent=function(a){var b=this;if(a.length&&!UI.hasClass(a[0],"voteBox")){var a=a[0],f=e(a,".vWrap")[0],g=Number(f.getAttribute("thumbs")),f=e(a,".vThumbsBox")[0];e(f,".vSimple");var h=e(f,".vThumbs")[0];e(a,".vTools");var j=e(a,".vClose")[0],k=e(f,"span")[1],l=e(h,"img")[0];if(l){if((h=UI.A(l,"crs"))&&(h.hasString("shp.qpic.cn")||h.hasString("vpic.video.qq.com")))l.width=140;l.onload=function(){if(g)this.load=1;if(k)k.style.display="inline";setTimeout(function(){b.resizePic(l)},0)}}if(g){l.onerror=function(){MI.videoThumb(this)};setTimeout(function(){if(l.load&&k)k.style.display="inline"},1500)}else{f.onmouseover=function(){UI.addClass(this,"hover")};f.onmouseout=function(){UI.removeClass(this,"hover")}}f.onclick=function(){MI.TalkList.video&&MI.TalkList.video(this,2);return false};j.onclick=function(){MI.TalkList.videoClose();return false};a=e(a.parentNode.parentNode,".msgCnt")[0];if((a=e(a,".ico_video"))&&a.length>0){f=0;for(j=a.length;f<j;f++)a[f].onclick=function(){var a=e(this.parentNode.parentNode,".videoBox")[0];a&&a.isOpen?b.videoClose():b.video(this,1);return false}}}};MI.TalkList.resizePic=function(a){var b=UI.width(a)||a.width,f=UI.height(a)||a.height,e=a.style;if(b>150||f>150){e.visibility="hidden";b=a.style;f=a.clientWidth;e=a.clientHeight;if(!e||!(f<150&&e<150)){f=a.clientWidth/a.clientHeight;if(f>1){a.style.height=150/f+"px";a.style.width="150px"}else{a.style.height="150px";a.style.width=150*f+"px"}b.visibility="visible"}}};MI.TalkList.pic=function(){var a=this,b=e(a,"img")[0],f,g=a.href,h=a.parentNode,j=UI.hasClass(h,"big");if(UI.hasClass(b,"preview"))b=b.nextSibling;if(b.loaded){a.blur();f=b.nextSibling;f.style.display=="none"&&UI.toggle(f.nextSibling);if(j){var k=UI.getY(f);UI.height(f)>UI.windowHeight()&&k<UI.scrollY()&&setTimeout(function(){window.scrollTo(0,k)},0);MI.mediaMutex&&MI.mediaMutex(b,1)}else MI.mediaMutex&&MI.mediaMutex(b);UI.toggleClass(h,"big bgr2");UI.toggleClass(h,"ico_gif_pn");if(!UI.hasClass(h,"big")){a.style.width="auto";a.style.height="auto"}g=e(a,"img.large")[0];if(MI.user.fun.minSizePicCheck){var l;g.width&&g.width>460&&(l=460);g.height&&g.height>460&&(l=460);l||(l=Math.max(g.width,g.height));if(l<460){var m=UI.parents(g,"picBox")[0];m.style.width=l+"px";g.parentNode.style.width=l+"px"}else{m=UI.parents(g,"picBox")[0];m.style.width="460px";g.parentNode.style.width="460px"}UI.hasClass(h,"big")}if(!UI.hasClass(h,"big")){a.style.width="auto";h.style.cssText=""}MI.user.fun.checkPicOnSmall&&b.parentNode.clientWidth<=75&&(UI.hasClass(h,"big")?UI.C(a,"width","75px"):UI.C(a,"width","auto"))}else{MI.mediaMutex&&MI.mediaMutex(b);if(b.loading)return false;b.loading=1;var o=UI.html('<em class="ico_load"></em>')[0];o.style.cssText="width:"+UI.width(a)+"px;height:"+UI.height(a)+"px;";UI.prepend(o,a);f=UI.DC("img");f.className="large";f.r=0;UI.after(f,b);f.onload=function(){if(!UI.B.ie||this.fileSize||!this.load){this.load=1;UI.toggleClass(h,"big bgr2");UI.removeClass(h,"ico_gif_pn");if(MI.user.fun.minSizePicCheck){var e;this.width&&this.width>460&&(e=460);this.height&&this.height>460&&(e=460);e||(e=Math.max(this.width,this.height));if(e<460){var g=UI.parents(this,"picBox")[0];g.style.width=e+"px";this.parentNode.style.width=e+"px"}else{g=UI.parents(this,"picBox")[0];g.style.width="460px";this.parentNode.style.width="460px"}if(!UI.hasClass(h,"big"))h.style.cssText=""}b.loading=0;b.loaded=1;b.parentNode.blur();UI.remove(o);MI.user.fun.checkPicOnSmall&&a.clientWidth<=75&&(UI.hasClass(h,"big")?UI.C(a,"width","75px"):UI.C(a,"width","auto"));MI.TalkList.picSize(f);this.onload=null}};f.onerror=function(){MI.picError(this)};f.src=g}if(!j&&!b.use){b.use=1;MI.Bos("btnPicBigPreloadUse","",0.0010)}else MI.Bos(j?"btnPicSmall":"btnPicBig","",0.01);UI.linkEvent("MI.TalkList.resize");return false};MI.TalkList.picEvent=function(a){for(var b=0,f=a.length;b<f;b++){var g=a[b],h=e(g,"img")[0],j=h.parentNode,k=e(g,".picTools"),l="",m=0;if(!j.href)break;var o=UI.parents(j,"msgBox")[0];if(o){var o=e(o,".userName a")[0]||e(o,".msgCnt a")[0],y=o.href;UI.A(o,"gender");l="http://t.qq.com/app/qzphoto/"+MI.string.id(y)+"?preview"}else m=1;if(k.length)UI.each(k,function(a){var a=a.parentNode,b=e(a,"img")[0];UI.removeClass(a,"big bgr2");b.src=b.src.replace(/460$/,"160")});else{if(!MI.user.fun.wideStyle)MI.tmpl.picTool=['<div class="tools bor_bg picTools"><a href="#" class="btnBack"><em></em>',_("向左转"),'</a><span>|</span><a href="#" class="btnPrev"><em></em>',_("向右转"),'</a><a href="$Url/2000" class="btnOriginal" onclick="MI.Bos(\'btnPicSource\')" target="_blank">',_("查看原图"),"</a></div>"].join("");UI.before(UI.html(MI.tmpl.picTool.replace("$Url",j.href.replace(/\/460$/g,"")).replace("$hisUrl",l).replace("$codeUrl",j.href))[0],j)}o=e(g,".picTools .btnMobile");MI.user.fun.picCode&&o[0]&&UI.show(o[0]);if(m){UI.hide(e(g,".picTools .btnMore")[0]);o.length&&UI.hide(o[0])}l=UI.html('<img class="preview" crs="'+j.href.replace(/460$/,"160")+'"/>')[0];UI.prepend(l,j);if(!UI.B.ipad){var p;j.onmouseover=function(){var a=UI.A(l,"crs");if(a){UI.A(l,"src",a);UI.A(l,"crs","")}if(MI.user.fun.checkBtnOriginalPic){a=UI.GC(this.parentNode,".btnOriginal")[0];j.clientWidth<460?UI.C(a,"display","none"):UI.C(a,"display","")}UI.addClass(this,"hover");UI.A(this,"hideFocus","true");clearTimeout(p)};j.onmouseout=function(){var a=this;p=setTimeout(function(){UI.removeClass(a,"hover")},250)}}j.onclick=MI.TalkList.pic;if(!UI.B.ie){UI.A(h,"alt",_("[图片]"));m=document.createElement("canvas");m.id=MI.random()*Math.random()+"C";MI.canvas[m.id]=m.getContext("2d");if(k){UI.remove(e(g,"canvas")[0]);UI.remove(e(g,".large")[0])}UI.after(m,h);UI.A(m,"width",h.width);UI.A(m,"height",h.height)}h.r=0;h.onload=function(){MI.TalkList.picLoad.call(this,g)};e(g,".btnBack")[0].onclick=e(g,".btnPrev")[0].onclick=MI.TalkList.picTool}};MI.TalkList.picLoad=function(a){if(!this.load){this.load=1;!UI.B.ie&&this.whirl&&MI.TalkList.picDraw(this,this.nextSibling);this.loaded?UI.addClass(a,"big bgr2"):UI.hasClass(this.parentNode.lastChild,"ic_gif")&&UI.addClass(a,"ico_gif_pn");if(!this.loaded&&this.width&&this.width<50)this.style.padding="0 25px"}};MI.TalkList.picTool=function(){var a=this.parentNode.parentNode,b=UI.hasClass(this,"btnPrev"),f=e(a,".shade");if(f.length){UI.remove(f[0]);UI.removeClass(a,"pic_shade_pn")}a=e(a,"img");MI.TalkList.rotateImg(b,a[a.length-1]);this.blur();b?MI.Bos("btnRightTurn"):MI.Bos("btnLeftTurn");return false};MI.TalkList.rotateImg=function(a,b){var f,e;if(!UI.B.ie)b.whirl=1;if(b.w===void 0){b.w=b.width;b.h=b.height;if(UI.B.opera){b.w=b.offsetWidth;b.h=b.offsetHeight}}a?b.r++:b.r--;if(b.r>3)b.r=0;else if(b.r<0)b.r=4+b.r;if(b.r%2!=0)if(b.h>460){f=460/b.h*b.w;e=460}else{f=b.w;e=b.h}else{f=b.w;e=b.h}b.style.width=f+"px";b.style.height=e+"px";if(UI.B.ie){b.style.filter="progid:DXImageTransform.Microsoft.BasicImage(Rotation="+b.r+")";if(MI.user.fun.minSizePicCheck){var g=UI.parents(b,"picBox")[0],h=b.parentNode;if(b.r%2!=0){g.style.height=f+"px";b.parentNode.style.height=f+"px"}else{g.style.height=e+"px";b.parentNode.style.height=e+"px"}h.style.textAlign="left";b.style.marginLeft=g.clientWidth!=460?b.r%2!=0?(g.clientWidth-e)/2+"px":(g.clientWidth-f)/2+"px":b.r%2!=0?(g.clientWidth-b.height)/2+"px":(g.clientWidth-b.width)/2+"px"}}else MI.TalkList.picDraw(b,b.nextSibling,{w:f,h:e})};MI.TalkList.picDraw=function(a,b,f){var e=MI.canvas[b.id],g,h;g=a.width;h=a.height;if(f){g=f.w;h=f.h}a.style.cssText="display:none!important";b.style.display="inline";b.t=g;switch(a.r){case 0:UI.A(b,"width",g);UI.A(b,"height",h);e.drawImage(a,0,0);break;case 1:UI.A(b,"width",h);UI.A(b,"height",g);e.rotate(90*Math.PI/180);e.drawImage(a,0,-h,g,h);break;case 2:UI.A(b,"width",g);UI.A(b,"height",h);e.rotate(180*Math.PI/180);e.drawImage(a,-g,-h);break;case 3:UI.A(b,"width",h);UI.A(b,"height",g);e.rotate(270*Math.PI/180);e.drawImage(a,-g,0,g,h)}};MI.TalkList.picSize=function(a){a.w=a.width;a.h=a.height};MI.FollowBtn={boss:null,followCall:null,unFollowCall:null,hideCancle:null,build:function(a,b,f,g,h){function j(a){a=e(a||e(".comList")[0],b);UI.each(a,function(a){if(!UI.hasClass(a,"cusPic")&&!UI.A(a,"followBtn")){UI.A(a,"followBtn",1);var b=MI.string.id(a.href);m.push(b);if(!e(a.parentNode,".attentBoxWrap").length){var c=a;UI.hasClass(a,"masPic")&&(c=UI.next(a));g&&(c=g(c));UI.after(UI.html('<div class="attentBoxWrap '+(f?"":"attentBox")+'" user="'+b+'"></div>')[0],c)}l.push(a)}})}var b=b||".pic a",k=this,l=[],m=[];UI.isArray(a)?UI.each(a,function(a){j(a)}):j(a);m.length&&MI.ajax({url:MI.url.userRelation,type:"get",data:"u="+m.join(","),success:function(b){b=MI.json(b);if(b.result==0){var c,j;UI.each(l,function(a){var h=MI.string.id(a.href),k;if(!UI.hasClass(a,"cusPic")){k=f?'<a class="foFun addAttention" href="#">'+_("+")+_("收听")+"</a>":'<input type="button" class="addAttention" value="'+_("立即收听")+'" />';if(b.info[h]){j=g?g(a).parentNode:a.parentNode;c=e(j,".attentBoxWrap")[0];h==MI.user.account&&(k="");c.innerHTML=k;b.info[h][0]&&UI.hide(c.firstChild)}}});k.addEvent(a,f,h)}}});return false},addEvent:function(a,b,f){function g(a){UI.each(e(a||document.body,".addAttention"),function(a){if(!UI.A(a,"addEvent")){UI.A(a,"addEvent",1);var e='<a href="#" class="delAttention" style="display:none">'+_('取消<i class="l"></i>')+"</a>";if(MI.tmpl.fcancle)e=MI.tmpl.fcancle;e=UI.html(b?'<div class="foFun disabled" style="display:none">'+_("已收听")+"</div>":e)[0];UI.after(e,a);a.style.display=="none"&&UI.show(e);a.onclick=function(){var a=this,e=h.user(a);MI.follow(e,a,function(){UI.hide(a);a.className="addAttention";UI.show(a.nextSibling)});MI.Bos(j+(b||""));h.followCall&&h.followCall(a);f&&f(a);return false};if(!b){h.hideCancle&&UI.hide(e);e.onclick=function(){var a=this,e=h.user(a);MI.follow(e,a,function(){UI.hide(a);a.className="delAttention";UI.show(a.previousSibling)});MI.Bos(k+(b||""));h.unFollowCall&&h.unFollowCall(a);f&&f(a);return false}}}})}var h=this,j="btnHeadFollow",k="btnHeadUnFollow";if(h.boss){j=h.boss[0];k=h.boss[1]}UI.isArray(a)?UI.each(a,function(a){g(a)}):g(a)},user:function(a){var b=UI.parents(a,"userList")[0],f="",b=b?e(b,".userInfo a,.userPic a")[0]:a.parentNode.previousSibling;
b.nodeName!="A"&&a.parentNode?f=UI.A(a.parentNode,"user"):b&&(f=MI.string.id(b.href));return f}};MI.Flash={version:0,getObject:function(a,b,f,e,g,h){b="<object "+(g?'id="'+g+'"':"")+' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+f+'" height="'+e+'" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"><param name="allowScriptAccess" value="always" /><param name="movie" value="'+b+'" /><param name="quality" value="high" /><param name="wmode" value="transparent" /><param value="'+(h||"")+"&langVer="+window.MILang+'" name="FlashVars" /><embed '+(g?'name="'+g+'"':"")+' src="'+b+'" width="'+f+'" height="'+e+'" quality="high" wmode="transparent" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" allowScriptAccess="always" FlashVars="'+(h||"")+"&langVer="+window.MILang+'" type="application/x-shockwave-flash"/></object>';if(a)a.innerHTML=b;else return b}};MI.bannerTips=function(a){if(a=a||MI.bannerTipsCache){var c=a.banner,f=a.newBanner,g=a.tips,h=a.msg,j=a.newTips,k=b("talkBox"),l=function(){};if(h&&k){var m,o=[];if(m=b("homeMsgTip")){m.innerHTML='<em class="ico_ntips"></em><span class="left">'+h.content+"</span><a href=\"#\" onclick=\"UI.hide('homeMsgTip');MI.ajax({url:'"+MI.url.updateTips+"',data:{id:'"+h.id+"',status:0}});MI.Bos('btnMsg_"+h.id+'\');return false" class="close" title="'+_("关闭")+'"></a>';k=e(m,".left a");m=e(m,".newsTipsFollow")[0];UI.each(k,function(a){var b=UI.A(a,"href")||"",c=MI.string.id(b);if(!b.hasString("#")&&!b.hasString("/k/")&&c.length<=20){o.push(c);UI.EA(a,"click",function(){MI.Bos("btnMsgUser_"+h.id)})}});if(m)m.onclick=function(){o.length&&MI.follow(o.join(","),this,function(){(!MI.user.fun.followList||o.length>1)&&MI.tip(_("收听成功"))});MI.Bos("btnMsgFollow_"+h.id);return false}}delete a.msg}if(c){var p=function(){var f=b("homeBannerTip"),g,h="MI.ajax({url:'"+MI.url.updateTips+"',data:{id:'"+c.id+"',status:0}});",j=[],k=c.pic.split(","),m=c.url.split(","),q=c.title.split(",");UI.each(k,function(a,b){a&&j.push("<li><a"+(c.blank?' target="_blank"':"")+' href="'+m[b]+'" style="background:url('+k[b]+') 50% 50% no-repeat;" title="'+(q[b]||"")+'" class="content"></a></li>')});if(MI.host=="t.qq.com"&&!MI.user.fun.wideStyle&&!MI.guest&&MI.user.fun.bannerAd){g=j.length;g>=3&&j.splice(3,g-3);if(j.length>0){j.splice(1,0,'<li class="l_qq_com" id="weibo_FB_ZRY_PIC1"><a target="_blank" href="http://c.t.qq.com/k/default" style="background:url(http://mat1.gtimg.com/microblog/aweibo/weipindao.jpg) 50% 50% no-repeat;" title="微频道" class="content"></a></li>');j.length>=3?j.splice(3,0,'<li class="l_qq_com" id="weibo_FB_ZRY_PIC2"><a target="_blank" href="http://t.qq.com/?doTask=1" style="background:url(http://img1.gtimg.com/microblog/pics/hv1/221/79/1027/66801041.jpg) 50% 50% no-repeat;" title="玩微博任务，加速QQ升级" class="content"></a></li>'):j.unshift('<li class="l_qq_com" id="weibo_FB_ZRY_PIC2"><a target="_blank" href="http://t.qq.com/?doTask=1" style="background:url(http://img1.gtimg.com/microblog/pics/hv1/221/79/1027/66801041.jpg) 50% 50% no-repeat;" title="玩微博任务，加速QQ升级" class="content"></a></li>')}}if(f){f.innerHTML='<a href="#" class="close" title="'+_("关闭")+'"></a><ul>'+j.join("")+'</ul><div class="nums_list page"></div>';g=e(f,"a");UI.each(g,function(a,b){a.onclick=function(){if(b==0){UI.hide("homeBannerTip");eval(h);l();return false}MI.Bos({name:"homeBannerTip",iBak1:b-1,id:1158});MI.Bos("homeBannerTip_"+c.id);c.close&&eval(h)}});k.length>1&&MI.app({Slide:function(){MI.slide=new MI.Slide({target:f,auto:5E3,tmpl:'<%for(var i=0;i<num;i++){%><a href="#" class="<%if(i==0){%>on<%}%>"><%=i+1%></a><%}%>'})}});delete a.banner}};if(MI.user.fun.showRecommend){UI.hide("homeBannerTip");UI.hide("NewGuideBannerTip");MI.app({Base:function(){var a=10,b=setInterval(function(){if(a!=0){a--;MI.MayBeKnow.returnResult==1&&clearInterval(b)}else{clearInterval(b);p();UI.show("NewGuideBannerTip");UI.show("homeBannerTip")}},200)}})}else p()}if(f){var u=function(){var c=b("homeBannerNew");if(!f.title&&!f.width){UI.B.ie6&&MI.addHover(c,"main_bn_hover");if(c){if(f.url){MI.ajax({url:f.url,type:"get",success:function(a){a=MI.json(a);if(a.result==0){c.innerHTML=a.info;UI.evalScript(a.info)}}});f.url=null}else if(f.html){c.innerHTML=f.html;UI.evalScript(f.html)}if(!UI.A(c,"event")){MI.proxyEvent(c,"click",function(){return function(a){MI.app({Base:function(){MI.bannerTips.close(f.id)}});a.prevent()}},[".btnBannerClose"]);UI.A(c,"event",1)}}}else{var g,h="MI.ajax({url:'"+MI.url.updateTips+"',data:{id:'"+(f.pushSeq||f.id)+"',status:0}});UI.linkEvent('bannerTipsClose');",j;UI.each(["title","url","pic","width","type","typeName","html"],function(a){var b=f&&f[a];UI.isString(b)&&(f[a]=b.replace(/,$/g,"").split(","))});UI.B.ipad&&UI.each(f.type,function(a){if(a==101)f.pic=[]});if(f.unitid)f.unitid=f.unitid.split(",");if(f.industry)f.industry=f.industry.split(",");j=f.pic.length;f.blank=f.blank?'target="_blank"':"";g=['<div class="main_bn_in clear"><a title="',_("关闭"),'" class="main_bn_remove_btn" href="#"><span>×</span></a>\t<div class="main_bn_stage"><ul class="main_bn_lst clear" style="width:3000px"><%var icon = ["","ic_bn_shopping","ic_bn_topic","ic_bn_person","ic_bn_commend","ic_bn_app","ic_bn_act"],html = html || [];if(pic) for(var i=0,num=pic.length;i<num;i++){\tif(pic[i]){%><li><%if(icon[type[i]]){\t%><span class="ic ic_bn_outer"><i class="ic <%=icon[type[i]]%>"></i></span><%}if(type[i] == 101){\t%><%=MI.Flash.getObject("",pic[i],width[i],90,"")%><%}else{\t%><a href="<%=url[i]%>" <%=blank%> class="main_bn_item" class="content"><img src="<%=pic[i]%>" width="<%=width[i]%>" height="90"><%\tif(title[i]){%><div class="main_bn_intro main_bn_intro_mini">\t<p class="info"><span class="tx_tit"><%=typeName[i]%></span> <%=title[i]%></p></div><%\t}%>\t</a><%\tif(html[i]){%><%=html[i]%><%\t}}%></li><%\t}}%></ul>\t</div>\t<a href="#" class="main_bn_goleft prev" style="display:none" title="',_("上一页"),'"></a>\t<a href="#" class="main_bn_goright next" style="display:none" title="',_("下一页"),'"></a>\t<div class="page"></div></div><span class="main_bn_bg"></span>'].join("");if(c){UI.B.ie6&&MI.addHover(c,"main_bn_hover");c.innerHTML=UI.txTpl(g,f);g=e(c,"a.main_bn_remove_btn,a.main_bn_item");UI.each(g,function(a,b){a.onclick=function(){if(b==0){UI.hide("homeBannerNew");eval(h);l();MI.Bos({name:"homeNewBannerTipClose",id:1158});return false}MI.Bos({name:"homeNewBannerTip",iBak1:b-1,iBak2:f.id,sBak1:f.unitid&&f.unitid[b-1]?f.unitid[b-1]:"",sBak2:f.industry&&f.industry[b-1]?f.industry[b-1]:"",id:1158});f.close&&eval(h)}});j>3||f.width[0]==580&&j>1?MI.app({Slide:function(){MI.slide=new MI.Slide({target:c,auto:5E3,tmpl:""});UI.show(MI.slide._next);UI.show(MI.slide._prev)}}):j==0&&UI.hide(c);delete a.newBanner}}};if(MI.user.fun.showRecommend){UI.hide("NewGuideBannerTip");MI.app({Base:function(){var a=10,b=setInterval(function(){if(a!=0){a--;MI.MayBeKnow.returnResult==1&&clearInterval(b)}else{clearInterval(b);u();UI.show("NewGuideBannerTip")}},200)}})}else u();delete a.newBanner}if(g){if(UI.parseUrl().firstin!=null||MI.bannerTips.hasShown==1)return;MI.bannerTips.hasShown=1;var t=e(g.target)[0],s,v;if(t){g.css&&UI.css(g.css);s=UI.html(g.content.replace(/{name}/g,MI.user.account))[0];v=UI.A(s,"type");setTimeout(function(){v==1?UI.after(s,t):v==2?UI.append(s,t):UI.append(s,document.body);l()},200);UI.EA(t,"click",function(a){w(UI.E(a).target);return false});UI.each(e(s,".TipsClose"),function(a,b){a.onclick=function(a){w(UI.E(a).target);MI.Bos("btnTips_"+g.id+"_"+b);UI.remove(s);return false}});var w=function(a){var b=a.href;MI.ajax({url:MI.url.updateTips,data:{id:g.id,status:0},success:function(a){a=MI.json(a);if(a.result==0&&b&&!b.hasString("#"))document.location.href=b}})};g.call&&g.call(s);v||(l=function(){t=e(g.target)[0];s.style.cssText=s.style.cssText+(";top:"+UI.getY(t)+"px;left:"+UI.getX(t)+"px;");g.css&&UI.css(g.css)});delete a.tips}}if(j){if(UI.parseUrl().firstin!=
null||MI.bannerTips.hasShown==1)return;var x=10,z=setInterval(function(){var b=e(j.target)[0],c,f;if(x==0)clearInterval(z);else if(b){clearInterval(z);if(j.url&&j.id)MI.ajax({url:MI.url.ajaxTips,type:"get",data:{tid:j.id},success:function(a){a=MI.json(a);if(a.result==0){j.url=null;j.content=a.info;MI.bannerTips({newTips:j})}}});else{j.css&&UI.css(j.css);var g=['<% var dir=dir,dirStyle=dirStyle,index=index,style=style,type=type,img=img,imgUrl=imgUrl,title=title,content=content,action=action;%><div style="display:block;<%if(style){%><%=style%><%}%>" class="tip_pop <% if(dir=="down"){%>tip_pop_hand_down<%}%> <%if(dir=="up"){%>tip_pop_hand_up<%}%>"><div class="tip_pop_in clear" style="display:block;"><%if(img){%><div class="tip_pop_head"><a class="avatar" href="<%=imgUrl%>"><img src="<%=img%>"></a></div><%}%><div class="tip_pop_cont"><%if(title){%><h3 class="tit"><%=title%></h3><%}%><p class="tip_pop_info"><%=content%></p><%if(action){%><p class="opt"><%=action%></p><%}%></div><a href="#" class="tip_pop_remove" title="',_("关闭"),'" <%if(type==2){%>style="color:#C6C6C6;font-size:12px;"<%}%>>×</a><span <%if(dirStyle){%>style="<%=dirStyle%>"<%}%> class="caret"><b class="caret_out"></b> <b class="caret_in"></b></span></div></div>'].join("");j.content=j.content.replace(/{name}/g,MI.user.account);c=UI.html(UI.txTpl(g,j))[0];f=j.type;setTimeout(function(){f==1?UI.after(c,b):f==2?UI.append(c,b):UI.append(c,document.body);l()},200);f!=2&&UI.EA(b,"click",function(a){k(UI.E(a).target);return false});var h=[];UI.each(e(c,".tip_pop_remove"),function(a){h.push(a)});UI.each(e(c,".closeTips"),function(a){h.push(a)});UI.each(h,function(a,b){UI.EA(a,"click",function(f){k(UI.E(f).target);MI.Bos("btnTips_"+j.id+"_"+b);UI.remove(c);if(UI.A(a,"href")!="")return false})});var k=function(a){var b=a.href;MI.ajax({url:MI.url.updateTips,data:{id:j.id,status:0},success:function(a){a=MI.json(a);if(a.result==0){UI.remove(c);if(b&&!b.hasString("#"))document.location.href=b}}})};j.call&&j.call(c);if(!UI.isArray(j.xy))j.xy=[0,0];l=function(){b=e(j.target)[0];if(UI.width(b)!=0){if(!f)c.style.cssText=c.style.cssText+(";top:"+(UI.getY(b)+j.xy[1]+UI.height(b))+"px;left:"+(UI.getX(b)+j.xy[0])+"px;");if(f==1||f==2){c.style.left=j.xy[0]+"px";c.style.top=j.xy[1]+"px"}j.css&&UI.css(j.css)}};delete a.oNewTips;MI.bannerTips.hasShown=1}}else x--},1E3)}var A=5,B=setInterval(function(){if(A!=0){l();A--}else clearInterval(B)},1E3);if(a)MI.bannerTipsCache=a}};MI.App={user:{},guest:null,autoHeight:function(){var a=b("mainWrapper"+MI.layoutFix),c=e(".main"+MI.layoutFix)[0];if(a&&c){UI.C(c,"padding","");UI.C(c,"paddingBottom",UI.height(a)-UI.height(c)+"px")}},showSide:function(){UI.removeClass(document.body,"noSide")},hideSide:function(){UI.addClass(document.body,"noSide")},hideUserInfo:function(){UI.addClass(document.body,"noUserInfo")},showUserInfo:function(){UI.removeClass(document.body,"noUserInfo")},hideUserAppTab:function(){UI.hide("userAppTab")},showUserAppTab:function(){var a=b("userAppTab"),c={MicroBlog:{name:"微博",url:"http://t.qq.com/",on:false},UserInfo:{name:MI.guest&&MI.guest.isEnterprise?"企业信息":"个人资料",url:"http://p.t.qq.com/m/home_userinfo.php?u=",on:false},QzoneBlog:{name:"日志",url:"http://t.qq.com/app/qzblog/",on:false},QzonePhoto:{name:"相册",url:"http://t.qq.com/app/qzphoto/",on:false},QQMusic:{name:"音乐",url:"http://t.qq.com/app/music/",on:false}},f=MIApp.id,e=[],g;if(MI.user.fun.apolloStyle){c={MicroBlog:{name:"全部广播",url:"http://t.qq.com/",on:false},QzonePhoto:{name:"相册",url:"http://t.qq.com/app/qzphoto/",on:false},UserInfo:{name:MI.guest&&MI.guest.isEnterprise?"企业信息":"关于"+MI.guest.sex,url:"http://p.t.qq.com/m/home_userinfo.php?u=",on:false},Follow:{name:"收听/听众",url:"http://t.qq.com/"+MI.guest.user+"/following",okUrl:1,on:false}};if(f=="QQMusic"||f=="QzoneBlog")f="UserInfo"}MI.user.fun.app||delete c.QzonePhoto;MI.user.fun.wideStyle||delete c.UserInfo;if(MI.App.guest&&MI.App.guest.name)g=MI.App.guest.name;if(a){if(g){if(c[f])c[f].on=true;if(MI.user.fun.apolloStyle){f=0;e.push('<ul class="ui_tab_lst">');for(var h in c){var k=c[h].okUrl?c[h].url:c[h].url+g+(c[h].url.hasString("?")?"&":"?")+"preview";c[h].on?e.push('<li class="'+(f==0?"first ":"")+'unit select"><a boss="btn_guest_'+h+'" href="'+k+'" class="t" jump="1"><span class="text">'+c[h].name+"</span></a></li>"):e.push('<li class="'+(f==0?"first ":"")+'unit"><a boss="btn_guest_'+h+'" href="'+k+'" class="t" jump="1"><span class="text">'+c[h].name+"</span></a></li>");f++}}else{e.push("<ul>");for(h in c)c[h].on?e.push('<li class="select"><b>'+c[h].name+"</b></li>"):e.push('<li><a href="'+c[h].url+g+(c[h].url.hasString("?")?"&":"?")+'preview">'+c[h].name+"</a></li>")}e.push("</ul>");a.innerHTML=e.join("");UI.show(a);if(MI.user.fun.apolloStyle){if(MIApp.id=="QzoneBlog"||MIApp.id=="QQMusic"){c='<div class="filterBar1 clear"><div class="subTab1 pl10"><a boss="btnApolloBasicInfo" href="http://p.t.qq.com/m/home_userinfo.php?u='+g+'"> 基本资料</a>'+(MIApp.id=="QzoneBlog"?'<a class="cur">日志</a><a boss="btnApolloBasicMusic" href="http://t.qq.com/app/music/'+g+'?preview">音乐</a>':'<a boss="btnApolloBlog" href="http://t.qq.com/app/qzblog/'+g+'?preview">日志</a><a class="cur">音乐</a>');UI.after(UI.html(c+"</div></div>")[0],a)}(a=b("LUI_wide"))&&window.scrollTo(0,UI.height(a)-180)}}}else setTimeout(function(){MI.App.showUserAppTab()},200)},showDialog:function(a){MI.app({Base:function(){MI.dialog.show(a)}})},hideDialog:function(){MI.app({Base:function(){MI.dialog.hide()}})},talk:function(a){var b=new MI.TalkBox(a.target);if(a.addList)b.addList=a.addList;if(a.txtMax)b.txtMax=a.txtMax;if(a.txt){b._txt.value=a.txt;b.countTxt()}if(a.sourcePic)b.sourcePic=a.sourcePic;if(a.success)b.success=a.success;if(a.successStart)b.successStart=a.successStart;if(a.failStart)b.failStart=a.failStart;return b},talkList:function(a){var b=new MI.TalkList(a.target);if(a.relayCall)b.relayCall=a.relayCall;if(a.commentCall)b.commentCall=a.commentCall;if(a.replyCall)b.replyCall=a.replyCall;return b},relayList:function(a){if(a.target&&a.id){var b=1,f=function(g){MI.ajax({url:g,type:"get",data:"format="+b,success:function(g){g=MI.json(g);if(g.result==0){if(b==1){a.target.innerHTML=g.info;var h=new MI.TalkList(e(a.target,"ul")[0]);h.eventCall=function(a){var b=h.getRelayOld(a,".msgCnt");UI.each(e(a,".relay,.comt"),function(a){UI.A(a,"cont",b)})};UI.each(e(a.target,".title .left a,.blueFoot a"),function(a){a.onclick=function(){f(this.href);return false}});UI.each(e(a.target,"a"),function(a){UI.A(a,"target","_blank")});MI.Crs(1)}a.success(g)}else g.msg&&a.fail(g)}})};a.type=="json"&&(b=2);f(MI.url.t+"?id="+a.id)}},reply:function(a,b,f){MI.reply(a,b,f)},chat:function(a,b,f){MI.chat(a,b,f)},recom:function(a,b){MI.recom(a,b)},hotLine:function(a,b){MI.hotLine(a,b)},message:function(a,b){MI.message(a,b)},report:function(a){MI.report(a)},alert:function(a,b){MI.alert(a,b)},tip:function(a,b){MI.tip(a,b)},relay:function(a,b){MI.relay(a,b)},comment:function(a,b){MI.comment(a,b)},qqDownload:function(a,b,f){MI.app({QQDownload:function(){var e=UI.A(a,"href"),g=UI.A(a,"qHref");(!g||!g.hasString("qqdl://"))&&UI.A(a,"qHref","qqdl://"+MI.qqdl.base64encode(e));MI.qqdl.OnDownloadClick_Simple(a,b,f);a.oncontextmenu=function(){MI.qqdl.OnContextClick(a,b)}}});return false}};MI.getInternalUrl=function(a){var b="t.qq.com",f=[["${1}",1],["p/t/${1}${2}",2]],e;if(MI.api.type==5){b="z.t.qq.com";f=[["mb/qzone/index.html#mod=profile&account=${1}",1],["mb/qzone/agg.html#id=${1}",1]]}b="http://"+b+"/";e=f[a];f=e[0];if(e){var g=1;for(e=e[1];g<=e;g++)f=f.replace("${"+g+"}",arguments[g]||"");return b+f}return""};UI.each({Base:"PV Speed Bos follow changeLang addHover goHome sidePanelUserProfile sidePanelTopicProfile alert tip confirm reply talk chat recom hotLine reFollow message addQQ topic topicDel topicOp updateTopic feedBack buildTip showShieldDialog paneLoad pageLoad pageClick miniPlayer RightFloatAd BotAd sceneId butlerTip".split(" "),Wide:["Widget"]},function(a,b){UI.each(a,function(a){MI[a]=function(){var e={},g=arguments;e[b]=function(){MI[a].apply(this,g)};MI.app(e)}})});R=function(){};MI.dialog={show:function(a){MI.app({Base:function(){MI.dialog.show(a)}})}};MI.GoTop={build:R,position:R};MI.Card={build:R};MI.sidePanel={};MI.Error={};window.MI_&&MI_();MI.newCount.setTitle=function(a,b){a=a||0;if(MI.user.fun.wideStyle&&MI.boss==11&&MI.Pane&&MI.Pane.hash&&MI.Pane.hash!="home")MI.newCountNum=0;else{if(!document.titleTmp)document.titleTmp=document.title;document.title=b&&a>b?"("+b+"+) "+document.titleTmp:(a?"("+a+") ":"")+document.titleTmp}};MI.newCount.data={};MI.host=document.location.host;"t.qq.com"==MI.host||"qun.t.qq.com"==MI.host||"event.t.qq.com"==MI.host||"p.t.qq.com"==MI.host?MI.hostType=1:"xy.t.qq.com"==MI.host?MI.hostType=2:"z.t.qq.com"==MI.host?MI.hostType=3:"app.t.qq.com"==MI.host&&(MI.hostType=4);MI.versionSet({"lib\/jquery":"1.8.3","DatePicker":"110906","ColorPicker":"110107","Base":"130411a","Tmpl":"130409","NewMsgBox":"121227","MapPop":"120222","LbsMap":"130226","WebQQ":"130409b","WebQQFull":"130409","Radio":"110905","FAQBox":"111104","NonTx":"110318","TalkBoxRich":"130410","Mood":"130325a","Capture":"130322","TransformST":"110823","FileUploader":"120222","TalkListRich":"130410d","TalkListFav":"120910","TalkListUpdate":"120221","TalkListShare":"130327","Scroll":"101111","QQDownload":"111115b","Music":"130305","QQMusicInstance":"111029","QQMusicPlayer":"110711","QQMusicWmpPlayer":"110711","QQMuicHtml5Player":"110711","Validate":"130228a","ValidateNew":"110920","Slide":"130322","PicList":"130408","RelateSelect":"110524","City":"111017b","CityAll":"110802b","Occupation":"130305","ItemSelect":"130318a","Message":"130328","c\/player\/mi.cSlide.player":"121204","QmEditor":"130407","t\/mi.TalkListTab":"130409","c\/mi.cWaterfall":"130324","Task":"130410","GiftBox":"130325","Theme":"130410d","Tag":"121002b","List":"121224","SettingEdu":"130115","SettingWork":"121002","Face":"121122","Sidebar":"121010b","Wide":"130411e","Vote":"121214","MicroTopic":"130307","SubjectPublish":"130128a","t\/mi.RealWord":"130319","t\/mi.Widget.admin":"130326","Olympics":"120821","p\/mi.TalkPic":"130409","Group":"111228","QunList":"110804","_CallOver":"130105","_ShuoShuoUploader":"121114","_NewMultiPic":"130318","_MultiBeautify":"130318","_Mood":"111031","_MoodDemo":"110805","_MusicRecord":"111101","_VideoRecord":"111104","_CameraPhoto":"111001","_Text2Pic":"110926","_SinglePhoto":"120621","_PingtuEditor":"120920","datePicker":"121106","colorPicker":"101228","base":"130407","mood":"130204","talkListShare":"120221","picList":"130404","itemSelect":"130314","message":"130329","wide":"130326","apollo":"130412a","c\/mi.cSlide.tumblr":"120917a","k\/subscribeTopic":"130407","p\/medal":"130409a","p\/guanjia":"130409","p\/silenceCntPopup":"130321","r\/qqFriendSelector":"130415","r\/qqFriendsBanner":"121219","r\/famousPersonDialog":"121029","r\/homeRecommendBanner":"121105a","r\/sFollowDialog":"130324","r\/qqFriendPush":"130401","r\/silenceFrdPopup":"130325","quan\/quanDialog":"130411","quan\/quanSort":"130415"});window._MIVersion&&MI.versionSet(_MIVersion);MI.app({Base:function(){if(MI.hostType==1)setTimeout(function(){MI.navMenu();MI.linkBoss();MI.badge.build()},0);else if(MI.hostType==2){MI.url.medal="http://xy.t.qq.com/asyn/medalpoint.php";MI.badge.build()}setTimeout(function(){MI.user.fun.goTop&&MI.user.account&&MI.GoTop.build();MI.user.fun.shortcuts&&MI.Shortcuts.add(MI.Shortcuts.talkList)},100);MI.dialog=new MI.Dialog;MI.code=new MI.Code;MI.card=new MI.Card;MI.user.fun.showBotAd&&(11==MI.boss||7==MI.boss)&&MI.BotAd()}});window._MIRun&&UI.each(_MIRun,function(a){a()});MIRun=function(a){a()};UI.ready(function(){if(UI.hasClass(document.body,"ipad"))UI.B.ipad=1;if(MI.user.fun){var a={app:1,atShield:0,audioRecord:0,audioUpload:0,autoMoreContinue:1,autoPic:1,autoTxt2Pic:1,bannerAd:0,card:1,chat:0,favGroup:1,goTop:1,hasThirdAppShield:1,mergePic:1,msgBox:1,newMusic:1,newRelay2:1,note:1,noti:1,report:1,search:1,selfVideo:1,shortcuts:1,collect:0},c;for(c in a)UI.isUndefined(MI.user.fun[c])&&(MI.user.fun[c]=a[c])}if(MI.api.source)MI.TalkBox.prototype.source=MI.api.source;MI.proxyEvent(document.body,"mousedown",function(){return function(){if(boss=UI.A(this,"boss")){boss.hasString("{")&&(boss=MI.json(boss));MI.Bos(boss)}}},["*|boss="]);for(c in MI.lazy)if(a=b(c)){a.innerHTML=MI.lazy[c];delete MI.lazy[c]}MI.tips=new MI.Tips;setTimeout(function(){var a=+new Date,b,c,e=function(){b=+new Date;if(b-a<50){clearTimeout(c);c=setTimeout(e,150)}else{a=b;var f={scrollY:UI.scrollY(),windowHeight:UI.windowHeight()};MI.Crs.disabled||MI.Crs();MI.autoMore&&MI.autoMore(f);MI.card&&MI.card.hide();UI.linkEvent("windowScroll",f)}};MI.Crs.disabled||MI.Crs(1);UI.EA(window,"scroll",e)},10);var e;UI.EA(window,"focus",function(){clearTimeout(e);e=setTimeout(function(){UI.linkEvent("windowFocus")},100)});MI.TalkBox.showDraft(MI.talkBox);MI.hostType==1&&setTimeout(function(){MI.app({Base:function(){var a;a=b("LUI")||b("LUI_wide");var c=b("UIn");if(a=a==null?c:a){MI.tips.build({area:a,target:".tIcon.ico_gy",txt:MI.TalkList.prototype.gongyiTips,click:function(){MI.Bos("btnClickGongyi")}});MI.tips.build({area:a,target:".ico_level",txt:MI.TalkList.prototype.levelTips});MI.tips.build({area:a,target:".ic_mall_small",txt:MI.TalkList.prototype.mallTips});MI.tips.build({area:a,target:".myIcon",txt:MI.TalkList.prototype.removeIcon})}(a=b("listWrapper"))&&MI.tips.build({area:a,target:".ico_level",txt:MI.TalkList.prototype.levelTips});Math.random()<=0.2&&UI.getScript("http://mat1.gtimg.com/www/js/common.js",function(){window.checkNonTxDomain&&checkNonTxDomain(1,10)})}})},3E3);var h=b("cssCheck"),k,j;setTimeout(function(){if(h&&UI.C(h,"display")!="none"){k=b("mainStyle");j=b("mainStyle2");MI.Bos({name:"btnOnerrorCss",id:1210});UI.getCss(k.href.replace(MI._appHost[0],MI._appHost[1]),function(){if(UI.C(h,"display")=="none")MI.Bos({name:"btnOnerrorCssSuccess",id:1210});else{UI.getCss(k.href.replace(MI._appHost[0],MI._appHost[2]),function(){MI.Bos({name:UI.C(h,"display")=="none"?"btnOnerrorCssSuccess2":"btnOnerrorCssFail2",id:1210})},j);MI.Bos({name:"btnOnerrorCssFail",id:1210})}},j)}},200);if(MI.isS)if(g){a=MI.json(MI.S("option_load_js"));for(c in a)if(UI.isArray(a[c])&&a[c][0]==MI.version._js[c]&&MI.version[c]){MI.version[c]=MI.version[c].replace("mat1.gtimg.com/www",a[c][1]);MI.version._auto[c]=MI.version[c]}}else MI.S("option_load_js","");MI.appLoad();UI.parseUrl();MI.miniPlayer();if(MI.user.isLab||MI.user.fun.newMusicBox)MI.user.fun.newMusic=1;MI.user.fun.newSinglePicUpload=1})})();/*version:102386*//*  |xGv00|83c23c8d239c6e9fd7a31c3b241b61c7 */