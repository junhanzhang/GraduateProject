kola("newt.ui.window.Dialog",["jquery.Core","newt.dialog.Notice","mvc.view.TemplateEngine"],function(d,c,b){function a(f){var e=this;f=d.extend({template:null,html:null,id:"weibo_wd_"+(++a.ID),title:"系统提示",className:"",handle:{},templateData:{},complete:function(){}},f);f.handle=d.extend({defOk:function(){e.close()},defCancel:function(){e.close()},defClose:function(){},defShow:function(){},defInit:function(){}},f.handle);d.extend(e,f);d.extend(e,{init_locker:false})}a.ID=0;a.prototype._render=function(g){var e=d("<div>"+g+"</div>");var f=this;f.wnd.setHtml(e.children("div.mwBd").html());f.wndDom=f.wnd.getElement();f.wnd.setTitle(f.title);f.wnd.setId(f.id);var h=e.children("div.mwFt:first");if(h&&h.size()>=1){f.wndDom.find("div.mwFt").html(h.html())}f.wndDom.addClass(f.className);for(var i in f.handle){f.wndDom.find("a.js-wbwd-"+i).data("btnName",i).bind("click",function(){var j=d(this);f.handle[j.data("btnName")](f)})}};a.prototype.getDom=function(){return this.wndDom};a.prototype.show=function(){var e=this;if(e.init_locker==true){return}if(e.wnd){e.wnd.show();e.handle.defShow(e)}else{e.wnd=tw.window.getWindow("tw_empty_window",{onClose:function(){e.handle.defClose(e)},expose:e.expose});e.wnd.setHandle(e.handle.defOk,e.handle.defCancel);e.init_locker=true;if(e.template==null){e._render(e.html);e.wnd.show();e.init_locker=false;e.handle.defInit(e);e.handle.defShow(e)}else{b.getTemplate({name:e.template,complete:function(f){e._render(f.render({data:e.templateData}));e.wnd.show();e.complete(e.wndDom,e.wnd);e.init_locker=false;e.handle.defInit(e);e.handle.defShow(e)}})}}};a.prototype.close=function(){this.wnd.close()};a.prototype.destroy=function(){this.wnd.destory()};return a});kola("newt.ui.window.Modal",["jquery.Core","newt.window.Window","mvc.view.TemplateEngine"],function(d,c,b){function a(f){var e=this;f=d.extend({template:null,templateTxt:null,id:"weibo_wmd_"+(++a.ID),className:"",handle:{},templateData:{},complete:function(){}},f);f.handle=d.extend({defClose:function(){},defShow:function(){},defInit:function(){}},f.handle);d.extend(e,f);d.extend(e,{init_locker:false})}a.ID=0;a.prototype.getDOM=function(){return this.wndDOM};a.prototype._render=function(f){var e=this;e.wnd=tw.window.build(e.id,function(){return f},{parentFixed:false,onClose:function(){e.handle.defClose(e)},expose:{opacity:0.5,color:"#000000"}},{prefixHtml:c.prototype.winNoFootBtnPrefix(),suffixHtml:c.prototype.winNoFootBtnSuffix()});d(e.wnd.getElement()).addClass("mw "+e.className);e.wndDOM=d("#"+e.id);e.wndDOM.find("a.js-modal-close").bind("click",function(){win.close()})};a.prototype.show=function(){var e=this;if(e.init_locker==true){return}if(e.wnd){e.wnd.show();e.handle.defShow(e)}else{e.init_locker=true;if(e.template==null){b.renderFromSource({source:e.templateTxt,data:templateData,complete:function(f){e._render(f);e.wnd.show();e.init_locker=false;e.handle.defInit(e);e.complete(e.wnd);e.handle.defShow(e)}})}else{b.getTemplate({name:e.template,complete:function(f){e._render(f.render({data:e.templateData}));e.wnd.show();e.init_locker=false;e.handle.defInit(e);e.complete(e.wnd);e.handle.defShow(e)}})}}};a.prototype.close=function(){this.wnd.close()};a.prototype.destroy=function(){this.wnd.destroy()};return a});