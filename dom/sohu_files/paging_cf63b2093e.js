kola("bricks.clay.paging.PagingModel",["kola.lang.Class","kola.lang.Object","kola.bom.Dispatcher","jquery.Core"],function(c,b,a,e){var d=c.create({pageSize:20,_init:function(f){var g=this;b.extend(g,f||{});g.currentPage=1;if(typeof g.total=="undefined"){g.total=1}else{g.total=parseInt(g.total)}g.ob=new a();if(g.listeners){b.each(g.listeners,function(h,i){g.ob.on(h,i)})}},getPageData:function(){return{total:this.total,currentPage:this.currentPage,pageCount:Math.ceil(this.total/this.pageSize),fromRecord:((this.currentPage-1)*this.pageSize)+1,toRecord:Math.min(this.currentPage*this.pageSize,this.total)}},doLoad:function(h){var g=this;var f=h.pageNo;if(!g.loading&&g.ob.fire("beforechange",f)!==false){g.loading=true;h.pageSize=g.pageSize;e.ajax({url:g.action,type:"POST",dataType:"json",data:b.extend(h,g.baseParams||{}),success:function(i){if(i.status==0){g.currentPage=f;if(typeof i.data.total!=="undefined"){g.total=i.data.total}else{if(typeof i.data.totalCount!=="undefined"){g.total=i.data.totalCount}}g.onSuccess(i.data)}else{g.onFailure()}},error:function(){g.onFailure()},complete:function(){g.onComplete();g.loading=false}})}},onSuccess:function(f){var g=this.getPageData();g.result=f;this.ob.fire("change",g)},onFailure:function(){this.ob.fire("changefailed")},onComplete:function(){this.ob.fire("requestcomplete")},moveFirst:function(){this.moveTo(1)},moveLast:function(){var f=this.getPageData().pageCount;this.moveTo(f)},movePrevious:function(){this.moveTo(this.currentPage-1)},moveNext:function(){this.moveTo(this.currentPage+1)},moveTo:function(f){if(typeof f=="undefined"){return}var g=this.getPageData();f=parseInt(f);if(f<1){f=1}else{if(f>g.pageCount){f=g.pageCount}}if(f!=g.currentPage){this.doLoad({pageNo:f})}},refresh:function(f){this.doLoad({pageNo:f?f:this.currentPage})},isLoading:function(){return !!this.loading}});return d});