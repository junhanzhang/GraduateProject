kola("newt.cr.crBaseShowHidden","jquery.Core",function(){var a=function(h,g){var d=this;d.elem=$(h);d.opti=$.extend({ns:"abc",init:true,apt:".apt",body:"div.ulist",foot:"p.fucs",slide:false,speed:800,lso:true,handle:function(){},CA:"",clickTitle:false,other:""},g||{});var i=d.opti.speed;if(!i){d.opti.slide=false}d.apt=d.elem.find(d.opti.apt);d.bdy=d.elem.find(d.opti.body).add(d.elem.find(d.opti.foot));if(d.opti.other){d.bdy=d.bdy.add(d.elem.find(d.opti.other))}d.ns=d.opti.ns;var f=$.cr.lso.get(d.ns);if(f){if(f==1){d.status=true}else{d.status=false}}else{d.status=d.opti.init}var e=$('<i class="i iloading2"></i>');var c=$('<a title="展开" href="javascript:void(0);"><i class="i itrig"></i></a>');var b=$('<a title="收起" href="javascript:void(0);"><i class="i itrigon"></i></a>');$.extend(d,{init:function(){d.initView();d.initEvent()},initView:function(){d.checkStatus(true);d.apt.append($("<div class='opt'></div>").append(c.add(b)))},initEvent:function(){var j=c.add(b);if(d.opti.clickTitle){j=d.elem.find("div.apt")}j.click(function(){d.status=!d.status;d.checkStatus()});if(d.opti.CA){c.add(b).mousedown(function(){CA.q(d.opti.CA)})}},checkStatus:function(j){j=j||false;if(!d.opti.lso){j=true}if(d.status){if(d.opti.slide){d.bdy.slideDown(i,function(){c.hide();b.show();d.opti.handle(true)})}else{c.hide();b.show();d.bdy.show();d.opti.handle(true)}!j&&$.cr.lso.set(d.ns,1)}else{if(d.opti.slide){d.bdy.slideUp(i,function(){b.hide();c.show();d.opti.handle(false)})}else{b.hide();c.show();d.bdy.hide();d.opti.handle(false)}!j&&$.cr.lso.set(d.ns,2)}}});d.init()};$.fn.crBaseShowHidden=function(b){return $(this).removeData("crBaseShowHidden").data("crBaseShowHidden",new a(this,b))};return a});kola("newt.cr.crCombox","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.ul=$("<ul></ul>");b.drop=$("<div></div>");b.opti=$.extend({par_on:"select_act",par_hover:"select_hover",parent:"i",cls:"options",editDom:"",data:[],initV:"请选择",max:5,on:"on","z-index":100,type:1,change:function(e,f){}},c||{});b.selected=null;b.DWIDTH=2;b.scroll=false;b.li_height=0;b.max=b.opti.max;b.offsetTop=0;b.uTop=0;b.isA=false;b.ebox=b.opti.editDom?b.elem.find(b.opti.editDom):b.elem;b.pbox=b.opti.parent?b.elem.parents(b.opti.parent):b.elem;$.extend(b,{init:function(){b._initView();b._initData();b._initEvent()},_initView:function(){b.drop.css({position:"absolute",overflow:"hidden","z-index":b.opti["z-index"]});b.ul.css({width:b.pbox[0].offsetWidth-b.DWIDTH,cursor:"pointer","list-style":"none",overflow:"hidden"});$("body").append(b.drop.append(b.ul).addClass(b.opti.cls));b.hide()},_initData:function(){var h=b.opti.data;var j=false;if($.isArray(h[0])){b.isA=true}for(var g=0,e=h.length;g<e;g++){if(b.isA){var f=$("<li vid='"+h[g][0]+"'>"+h[g][1]+"</li>").data("v",h[g][1]).data("i",g).appendTo(b.ul)}else{var f=$("<li>"+h[g]+"</li>").data("v",h[g]).data("i",g).appendTo(b.ul)}if(b.opti.initV==h[g]||b.opti.initV==h[g][1]){b._setText(b.opti.initV);b.selected=f.data("i");f.addClass(b.opti.on);j=true}}if(!j){b.selected=0;b.ul.find("li").eq(0).addClass(b.opti.on);b._setText(b.ul.find("li").eq(0).data("v"))}window.setTimeout(function(){b.offsetTop=b.pbox.offset().top+b.pbox[0].offsetHeight;b.offsetLeft=b.pbox.offset().left;b.drop.css({width:b.ul.width()});b.hide()},0);if(b.max<h.length){b.ul.css("overflow-y","auto");b.li_height=b.ul.find("li:first").height();b.ul.height(b.max*b.li_height);if(b.selected>b.max-1){b._getuTop()}b.hide();b.scroll=true}},_getuTop:function(){b.uTop=b.ul.find("li").eq(b.selected).offset().top-b.ul.offset().top-b.ul.height()+b.li_height;if(b.uTop==0){window.setTimeout(function(){b._getuTop()},13)}else{b.ul.scrollTop(b.uTop)}},_initEvent:function(){var g=b.opti.hover;var e=b.opti.background;var f=b.opti.on;var h=(typeof b.opti.change=="function")?b.opti.change:function(i){};b.ul.find("li").bind("mouseover",function(){b.ul.find("li."+f).removeClass(f);$(this).addClass(f)}).bind("click",function(i){b._enterAndClick($(this),h)});b.pbox.click(function(i){if(b.getVisi()){b.hide()}else{b.show()}});b.pbox.hover(function(){$(this).addClass(b.opti.par_hover)},function(){$(this).removeClass(b.opti.par_hover)});$(document).bind("click",function(i){if(i.target!=b.elem[0]&&i.target!=b.pbox[0]){b.hide()}}).bind("keydown",function(n){if(b.getVisi()||document.activeElement==b.elem[0]){var m=b.ul.find("li");var l=m.index(b.ul.find("li."+f));var j=m.length;if(n){var k=n.keyCode}else{var k=n.which}switch(k){case 38:case 37:if(l>0){b._navigate(l,--l)}return false;break;case 39:case 40:if(l<j-1){b._navigate(l,++l,"down")}return false;break;case 36:if(l>0){b._navigate(l,0)}return false;break;case 35:if(l<j-1){b._navigate(l,j-1)}return false;break;case 13:b._enterAndClick(m.eq(l),h);break}}});$(window).resize(function(){if(b.getVisi()){b._setPos()}}).scroll(function(){if(b.getVisi()){b._setPos()}})},_navigate:function(f,e,h){h=h||"up";var g=b.ul.find("li");b.scroll&&b._offsetPos(g,e,h);g.eq(f).removeClass(b.opti.on);g.eq(e).addClass(b.opti.on);b._setText(g.eq(e).data("v"))},_offsetPos:function(k,j,l){var i=b.drop.offset().top,e=k.eq(j).offset().top,f=b.ul.scrollTop();var g=0;if(l=="down"){var h=Math.round((e-i)/b.li_height);if(h<b.max){return}else{if(j<k.length){g=f+b.li_height}else{return}}}else{if(l=="up"){var h=Math.floor((e-i)/b.li_height);h+=2;if(h>1){return}else{if(j>0){g=f-b.li_height}else{g=0}}}}b.ul.scrollTop(g)},_setPos:function(){var f=b.pbox.offset().top,e=$(window).height(),g=$(window).scrollTop();f=f-g;var h=b.pbox.offset();if(f+b.ul.height()>e){b.drop.css({left:h.left,top:h.top+b.pbox[0].offsetHeight-b.pbox.height()-b.drop.height()})}else{b.drop.css({top:h.top+b.pbox[0].offsetHeight,left:h.left})}},getVisi:function(){return b.drop.hasClass("visi")},_enterAndClick:function(f,e){if(f.data("i")==b.selected){b.hide();return}b._setText(f.data("v"));b.selected=f.data("i");b.hide();e(b.getValue(),b.getValue1())},getValue:function(){if(b.opti.type==1){return b.ebox.text()}else{if(b.opti.type==2){return b.ebox.val()}}},getValue1:function(){if(b.isA){return b.ul.find("li").eq(b.selected).attr("vid")}else{return -1}},getIndex:function(){return b.selected},show:function(){b._setPos();b.drop.addClass("visi");b.pbox.addClass(b.opti.par_on)},hide:function(){b.drop.css({left:"-10000px",top:"-10000px"});b.drop.removeClass("visi");b.pbox.removeClass(b.opti.par_on)},getDrop:function(){return b.drop},_setText:function(e){if(b.opti.type==1){b.ebox.text(e)}else{if(b.opti.type==2){b.ebox.val(e)}}},setValue:function(h){var g=b.opti.data;for(var f=0,e=g.length;f<e;f++){if(h==g[f]){b._setText(h);b.selected=f;b.ul.find("li."+b.opti.on).removeClass(b.opti.on);b.ul.find("li").eq(f).addClass(b.opti.on);b._getuTop();break}}},destroy:function(){b.elem.unbind("click");b.drop.remove()}});b.init()};$.fn.crCombox=function(b){return $(this).each(function(){$(this).removeData("crCombox").data("crCombox",new a(this,b))})};return a});kola("newt.cr.crCustomSelect2",["jquery.Core","kola.lang.Class","kola.lang.Function","newt.cr.crOut","newt.cr.cr"],function(c,b,d){var e=[];var a=b.create({_init:function(h,g){this.elem=c(h);var f=this.elem.attr("name");if(f){this.elem.parents("form:first").append("<input type='hidden' name='"+f+"' id='_"+f+"_hidden'/>");this.elem.data("name",f)}e.push(this);this.opts=c.extend({options:[],selectedIndex:0,change:function(j,i){}},g);this._initHtml();this._bindEvents();this.setOptions(this.opts.options);this.doChange(0)},_initHtml:function(){var f=this;this.inputEl=this.elem.find("input");if(this.inputEl.length==0){this.inputEl=c('<input type="text" value="请选择不良信息的类型" readonly="" />');this.elem.append(this.inputEl)}this.optionsCon=this.elem.find("b.options");if(this.optionsCon.length==0){this.optionsCon=c(['<b class="options noDis">','<b class="option">',"</b>","</b>"].join(""));this.inputEl.after(this.optionsCon)}this.optionEl=this.optionsCon.find("b.option");if(this.opts.options.length>10){this.optionEl.addClass("optionMax")}this.outCtrl=this.optionsCon.crOut({outItems:this.elem,outHandle:function(g){d.bind(f._hide,f)()}}).getCrControl("crOut")},setOptions:function(f){this.selectedIndex=this.opts.selectedIndex;this.optionEl.html("");for(var g=0;g<f.length;g++){if(g==this.opts.selectedIndex){this.inputEl.val(f[g].text)}var h=c('<q title="'+f[g].text+'">'+f[g].text+"</q>");h.data("index",g);this.optionEl.append(h)}if(f.length>10){this.optionEl.addClass("optionMax")}else{this.optionEl.removeClass("optionMax")}},bind:function(f){this.opts.options=f;this.opts.selectedIndex=0;this.setOptions(f);this.doChange(0)},_bindEvents:function(){var f=this;this.elem.hover(function(){c(this).addClass("select_hover")},function(){c(this).removeClass("select_hover")});this.optionEl.delegate("q","mouseover",function(){f._clearHover();c(this).addClass("hover")});this.optionEl.delegate("q","click",function(h){var g=parseInt(c(this).data("index"));var i=f.selectedIndex;f.setSelected(g);if(g!=i){f.doChange(g)}f._hide();h.stopPropagation()});this.elem.click(function(){if(!f.elem.hasClass("select_act")){f._hideAll();f._show()}else{f._hide()}})},_hideAll:function(){for(var g=0,f=e.length;g<f;++g){e[g]._hide()}},_clearHover:function(){this.optionEl.find("q").removeClass("hover")},_hide:function(){this.optionsCon.addClass("noDis");this.elem.removeClass("select_act")},_show:function(){this.elem.addClass("select_act");this._clearHover();this.optionsCon.removeClass("noDis")},setSelected:function(f){var g=this.optionEl.find("q").eq(f);this.inputEl.val(g.html());this.selectedIndex=f},getSelected:function(){return this.opts.options[this.selectedIndex]},setValue:function(j){var h=this.opts.options;for(var g=0,f=h.length;g<f;g++){if(h[g].value==j){this.selectedIndex=g;this.inputEl.val(h[g].text);break}}},getValue:function(){if(this.opts.options.length>0&&this.selectedIndex>-1){return this.opts.options[this.selectedIndex].value}else{return""}},setText:function(j){var h=this.opts.options;for(var g=0,f=h.length;g<f;g++){if(h[g].text==j){this.selectedIndex=g;this.inputEl.val(j);break}}},getText:function(){if(this.opts.options.length>0&&this.selectedIndex>-1){return this.opts.options[this.selectedIndex].text}else{return""}},destructor:function(){this.outCtrl.unbind()},doChange:function(f){var g=this.opts.options[f];this.opts.change(g.text,g.value);var h=c(this);c("#_"+this.elem.data("name")+"_hidden").val(g.value);h.trigger("change",[g.text,g.value])}});c.fn.crCustomSelect=function(f){return c(this).each(function(){var g=c(this).data("crCustomSelect");if(!g){c(this).removeData("crCustomSelect").data("crCustomSelect",new a(this,f))}})};return a});kola("newt.cr.crGrpCroView","jquery.Core,newt.cr.crInput",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend(true,{view:[true,true,true,true],submitHandle:function(){},cancelHandle:function(){},errCls:"span",maxNum:6,maxHandler:b.maxHandler,nonmaxHandler:b.maxHandler},c||{});b.input=null;b.input_initVal="";b.a1=null;b.a2=null;b.span=null;b.submit=b.opts.submitHandle;b.cancel=b.opts.cancelHandle;b.maxHandler=b.opts.maxHandler;b.nonmaxHandler=b.opts.nonmaxHandler;$.extend(b,{init:function(){b._init_input();b._init_a1();b._init_a2();b._init_span()},_init_input:function(){if(b.opts.view[0]){b.input_initVal="新建分组...";b.input=b.elem.crInput({editBox:"i",initText:"新建分组...",submitHandle:b.submit}).data("crInput");b.input.edit.keyup(function(e){var f=b.input.getVal();if($.cr.str.countSimpin(f)>b.opts.maxNum){b.maxHandler()}else{b.nonmaxHandler()}})}},_init_a1:function(){if(b.opts.view[1]){b.a1=b.elem.find("a:first").click(function(){b.submit()})}},_init_a2:function(){if(b.opts.view[2]){b.a2=b.elem.find("a:last").click(function(){b.hide();b.cancel()})}},_init_span:function(){if(b.opts.view[3]){b.span=b.elem.find(b.opts.errCls)}},hide:function(){b.elem.hide()},show:function(){b.elem.show()},changeError:function(e){b.span&&b.span.text(e)},setValue:function(e){b.input.setVal(e)},getElement:function(){return b.elem},getValue:function(){return b.input.getVal()},setFocus:function(){b.input.focus()},setBlur:function(){b.input.blur()},maxHandler:function(){b.changeError("分组名超过"+b.opts.maxNum+"个字了")},nonmaxHandler:function(){b.changeError("")}});b.init()};$.fn.grpCroView=function(b){return $(this).each(function(){$(this).removeData("grpCroView").data("grpCroView",new a($(this),b))})};return a});kola("newt.cr.crScrollList","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({width:620,speed:300,num:5,indicate:6000,pause:12000,auto:true},c||{});b.interval=0;b.timeout=0;b.flag=false;b.shell=b.elem.find("div.ulist2");$.extend(b,{init:function(){b.elem.find("p.flip_pr").unbind().bind("click",b.preScroll);b.elem.find("p.flip_nx").unbind().bind("click",b.nexScroll);if(b.opts.auto){b.autoScroll()}},autoScroll:function(){clearInterval(b.interval);b.interval=setInterval(function(){b.nexScroll("auto")},b.opts.indicate)},pauseAuto:function(e){if(!(typeof e=="string"&&"auto"==e)){clearInterval(b.interval);clearTimeout(b.timeout);b.timeout=setTimeout(b.autoScroll,b.opts.pause)}},preScroll:function(f){if(b.flag){return false}b.flag=true;b.pauseAuto(f);b.shell.css({left:"-"+b.opts.width*2+"px"});for(var e=0;e<b.opts.num;e++){$(b.shell).find("div.pf2:last").prependTo(b.shell)}b.shell.animate({left:"-"+b.opts.width+"px"},b.opts.speed,function(){b.flag=false})},nexScroll:function(f){if(b.flag){return false}b.flag=true;b.pauseAuto(f);b.shell.css({left:0});for(var e=0;e<b.opts.num;e++){$(b.shell).find("div.pf2:first").appendTo(b.shell)}b.shell.animate({left:"-"+b.opts.width+"px"},b.opts.speed,function(){b.flag=false})}});b.init()};$.fn.crScrollList=function(b){return $(this).each(function(){$(this).removeData("crScrollList").data("crScrollList",new a(this,b))})};return a});kola("newt.cr.crSelect","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opti=$.extend({data:[],status:true,initValue:null,initV:"",init:false,handle:function(e){}},c||{});b.isA=false;$.extend(b,{init:function(){b._initData();b._initEvent();b._initStatus()},_initData:function(){b.elem.empty();if($.isArray(b.opti.data[0])){b.isA=true}if(b.opti.init){var g=b.opti.initValue||parseInt(b.elem.attr("val"),10)}else{var g=""}for(var f=0,e=b.opti.data.length;f<e;f++){if(b.isA){$("<option "+(b.opti.data[f][1]==b.opti.initV?"selected":"")+">"+b.opti.data[f][0]+"</option>").attr("value",b.opti.data[f][1]).appendTo(b.elem)}else{$("<option "+(g===f?"selected":"")+" >"+b.opti.data[f]+"</option>").attr("value",f).appendTo(b.elem)}}},_initEvent:function(){b.elem.change(function(){b.opti.handle(b.getValue())})},_initStatus:function(){b.elem.attr("disabled",b.opti.status?false:true)},getIndex:function(){var e=-1;b.elem.find("option").each(function(f){if($(this).attr("selected")){e=f}});return e},getValue:function(){return b.elem.val()},setValue:function(e){b.elem.find("option").removeAttr("selected").each(function(){if($(this).val()==e){$(this).attr("selected","selected")}})},bindData:function(e){b.opti.data=e;b._initData()}});b.init()};$.fn.crSelect=function(b){return $(this).removeData("crSelect").data("crSelect",new a(this,b))};return a});kola("newt.cr.crTab","jquery.Core",function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({auto:false,speed:3000,fade:true,model:"click",tabs:".crJs_tab_box",btn:".crJs_tab_switch"},c||{});b.tabs=b.elem.find(b.opts.tabs);b.swts=b.elem.find(b.opts.btn);b.timer=0;b.tabsNum=b.tabs.length;b.index=0;$.extend(b,{init:function(){b.swts.each(function(e){if($(this).hasClass("on")){b.index=e}$(this).data("index",e).bind(b.opts.model,function(){var f=$(this).data("index");b.on(f);if(b.timer>0){clearInterval(b.timer)}if(b.opts.auto){$(this).one("mouseout",b.start)}})});b.tabs.bind("mouseover",function(){if(b.timer>0){clearInterval(b.timer)}if(b.opts.auto){$(this).one("mouseout",b.start)}});if(b.opts.auto){b.start()}},start:function(){setTimeout(b.autoRun,b.opts.speed)},autoRun:function(){if(b.timer>0){clearInterval(b.timer);b.timer=0}var e=function(){b.on(b.getNextIndex(b.index))};b.timer=setInterval(e,b.opts.speed)},getNextIndex:function(e){return(e+1)>=b.tabsNum?0:(e+1)},on:function(e){var f=$(b.swts.get(e));if(!f.hasClass("on")){b.reset(function(){if(b.opts.fade){$(b.tabs.get(e)).fadeIn("fast")}else{$(b.tabs.get(e)).show()}b.swts.removeClass("on");f.addClass("on");b.index=e})}},reset:function(e){b.swts.removeClass("on");b.tabs.each(function(){if("block"==$(this).css("display")){if(b.opts.fade){$(this).fadeOut("fast",e)}else{$(this).hide();e()}}})}});b.init()};$.fn.crTab=function(b){return $(this).each(function(){$(this).removeData("crTab").data("crTab",new a(this,b))})};return a});kola("newt.cr.crTextAutoSize",["jquery.Core"],function(){var a=function(d,c){var b=this;b.elem=$(d);b.opts=$.extend({width:450,minSize:25,maxSize:1000,animateDuration:150,extraSpace:20,resizeHandle:function(){},filters:[]},c||{});$.extend(b,{init:function(){b.filters=b.opts.filters;b.elem.css("overflow","hidden");b._resizeWrap=$("#crTextareaResizeWrap");if(!b._resizeWrap.length){b._resizeWrap=$('<div id="crTextareaResizeWrap" style="position:absolute;top:-10000px"></div>').appendTo("body")}var e=function(g){for(var f=0;f<b.filters.length;f++){if(g.keyCode==b.filters[f]){return}}window.clearTimeout(b._timer);b._timer=window.setTimeout(function(){var h=b.opts.minSize,i=b.elem.width();i=typeof(i)=="number"?i:0;b._resizeWrap.width(i).html(b.elem.val().replace(/\n/gm,"<br />"));b._resizeWrap.css("lineHeight",b.elem.css("lineHeight")||"16px");h=b._resizeWrap.height()+20;if(h!=b.elem.height()){h=Math.max(h,b.opts.minSize)+b.opts.extraSpace;if(h>=b.opts.maxSize){h=b.opts.maxSize;b.elem.css("overflow-y","auto").css("height",h);return}else{b.elem.css("overflow-y","hidden")}b.elem.stop().animate({height:h},b.opts.animateDuration,b.opts.resizeHandle)}},10)};b.elem.unbind(".crTextAutoSize").bind("keyup.crTextAutoSize",e).bind("mouseup.crTextAutoSize",e)}});b.init()};$.fn.crTextAutoSize=function(b){return $(this).each(function(){$(this).removeData("crTextAutoSize").data("crTextAutoSize",new a(this,b))})};return a});kola("newt.cr.crTimer",["jquery.Core"],function(b){var a=function(f,e,h){var d=this,g=0,c="";d.delay=e;b.extend(d,{start:function(){c=window.setInterval(function(){f();g++;if(h&&g==h){d.remove()}},d.delay)},pause:function(){d.remove()},stop:function(){d.remove();g=0},remove:function(){window.clearInterval(c)},setDelay:function(i){d.delay=i;d.pause();d.start()}})};return a});